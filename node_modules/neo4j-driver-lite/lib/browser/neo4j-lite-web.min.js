!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).neo4j=e()}(function(){return function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(e=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",e}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertImpersonatedUserIsEmpty=r.assertTxConfigIsEmpty=r.assertDatabaseIsEmpty=void 0;var n=e("neo4j-driver-core");r.assertTxConfigIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e&&!e.isEmpty())throw t((e=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality")).message),r.onError(e),e},r.assertDatabaseIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e)throw t((e=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality")).message),r.onError(e),e},r.assertImpersonatedUserIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e)throw t((t=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(e,"."))).message),r.onError(t),t}},{"neo4j-driver-core":75}],2:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},d=(Object.defineProperty(r,"__esModule",{value:!0}),e("./bolt-protocol-util")),o=e("../packstream"),_=n(e("./request-message")),y=e("./stream-observers"),i=e("neo4j-driver-core"),s=n(e("./bolt-protocol-v1.transformer")),a=n(e("./transformer")),u=i.internal.bookmarks.Bookmarks,n=i.internal.constants,c=n.ACCESS_MODE_WRITE,l=n.BOLT_PROTOCOL_V1,f=(i.internal.logger.Logger,i.internal.txConfig.TxConfig),e=(Object.defineProperty(h.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new a.default(Object.values(s.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),h.prototype.packer=function(){return this._packer},h.prototype.packable=function(e){return this._packer.packable(e,this.transformer.toStructure)},h.prototype.unpacker=function(){return this._unpacker},h.prototype.unpack=function(e){return this._unpacker.unpack(e,this.transformer.fromStructure)},h.prototype.transformMetadata=function(e){return e},h.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.authToken,o=e.onError,i=e.onComplete,e=new y.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(_.default.init(r,n),e,!0),e},h.prototype.prepareToClose=function(){},h.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,s=e.beforeError,a=e.afterError,u=e.beforeComplete,e=e.afterComplete;return this.run("BEGIN",t?t.asBeginTransactionParameters():{},{bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i,beforeError:s,afterError:a,beforeComplete:u,afterComplete:e,flush:!1})},h.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("COMMIT",{},{bookmarks:u.empty(),txConfig:f.empty(),mode:c,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},h.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete;return this.run("ROLLBACK",{},{bookmarks:u.empty(),txConfig:f.empty(),mode:c,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e})},h.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=(r.bookmarks,r.txConfig),o=r.database,i=(r.mode,r.impersonatedUser),s=r.beforeKeys,a=r.afterKeys,u=r.beforeError,c=r.afterError,l=r.beforeComplete,f=r.afterComplete,h=r.flush,h=void 0===h||h,p=r.highRecordWatermark,p=void 0===p?Number.MAX_VALUE:p,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,s=new y.ResultStreamObserver({server:this._server,beforeKeys:s,afterKeys:a,beforeError:u,afterError:c,beforeComplete:l,afterComplete:f,highRecordWatermark:p,lowRecordWatermark:r});return(0,d.assertTxConfigIsEmpty)(n,this._onProtocolError,s),(0,d.assertDatabaseIsEmpty)(o,this._onProtocolError,s),(0,d.assertImpersonatedUserIsEmpty)(i,this._onProtocolError,s),this.write(_.default.run(e,t),s,!1),this.write(_.default.pullAll(),s,h),s},Object.defineProperty(h.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),h.prototype.reset=function(e){var e=void 0===e?{}:e,t=e.onError,e=e.onComplete,t=new y.ResetObserver({onProtocolError:this._onProtocolError,onError:t,onComplete:e});return this.write(_.default.reset(),t,!0),t},h.prototype._createPacker=function(e){return new o.v1.Packer(e)},h.prototype._createUnpacker=function(e,t){return new o.v1.Unpacker(e,t)},h.prototype.write=function(e,t,r){this.queueObserverIfProtocolIsNotBroken(t)&&(this._log.isDebugEnabled()&&this._log.debug("C: ".concat(e)),this._lastMessageSignature=e.signature,t=new o.structure.Structure(e.signature,e.fields),this.packable(t)(),this._chunker.messageBoundary(),r&&this._chunker.flush())},h.prototype.isLastMessageLogin=function(){return 1===this._lastMessageSignature},h.prototype.isLastMessageReset=function(){return 15===this._lastMessageSignature},h.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},h.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},h.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},h.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},h.prototype.isBroken=function(){return!!this._fatalError},h.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},h.prototype.resetFailure=function(){this._responseHandler._resetFailure()},h.prototype._onLoginCompleted=function(e,t){var r;e&&(r=e.server,this._server.version||(this._server.version=r)),t&&t(e)},h.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},h);function h(e,t,r,n,o,i){var r=void 0===r?{}:r,s=r.disableLosslessIntegers,r=r.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(s,r),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:s,useBigInt:r}}r.default=e},{"../packstream":58,"./bolt-protocol-util":1,"./bolt-protocol-v1.transformer":3,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],3:[function(e,t,r){"use strict";var l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},f=(Object.defineProperty(r,"__esModule",{value:!0}),e("neo4j-driver-core")),h=e("../packstream"),n=e("./transformer"),o=f.error.PROTOCOL_ERROR,i=78,s=3,a=82,u=5,c=114,p=3,d=80,_=3;r.default={createNodeTransformer:function(){return new n.TypeTransformer({signature:i,isTypeInstance:function(e){return e instanceof f.Node},toStructure:function(e){throw(0,f.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(e),o)},fromStructure:function(e){h.structure.verifyStructSize("Node",s,e.size);var e=l(e.fields,3),t=e[0],r=e[1],e=e[2];return new f.Node(t,r,e)}})},createRelationshipTransformer:function(){return new n.TypeTransformer({signature:a,isTypeInstance:function(e){return e instanceof f.Relationship},toStructure:function(e){throw(0,f.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(e),o)},fromStructure:function(e){h.structure.verifyStructSize("Relationship",u,e.size);var e=l(e.fields,5),t=e[0],r=e[1],n=e[2],o=e[3],e=e[4];return new f.Relationship(t,r,n,o,e)}})},createUnboundRelationshipTransformer:function(){return new n.TypeTransformer({signature:c,isTypeInstance:function(e){return e instanceof f.UnboundRelationship},toStructure:function(e){throw(0,f.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(e),o)},fromStructure:function(e){h.structure.verifyStructSize("UnboundRelationship",p,e.size);var e=l(e.fields,3),t=e[0],r=e[1],e=e[2];return new f.UnboundRelationship(t,r,e)}})},createPathTransformer:function(){return new n.TypeTransformer({signature:d,isTypeInstance:function(e){return e instanceof f.Path},toStructure:function(e){throw(0,f.newError)("It is not allowed to pass paths in query parameters, given: ".concat(e),o)},fromStructure:function(e){h.structure.verifyStructSize("Path",_,e.size);for(var e=l(e.fields,3),t=e[0],r=e[1],n=e[2],o=[],i=t[0],s=0;s<n.length;s+=2){var a=t[n[s+1]],u=(0,f.toNumber)(n[s]),c=void 0;0<u?(c=r[u-1])instanceof f.UnboundRelationship&&(r[u-1]=c=c.bindTo(i,a)):(c=r[-u-1])instanceof f.UnboundRelationship&&(r[-u-1]=c=c.bindTo(a,i)),o.push(new f.PathSegment(i,c,a)),i=a}return new f.Path(t[0],t[t.length-1],o)}})}}},{"../packstream":58,"./transformer":29,"neo4j-driver-core":75}],4:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./bolt-protocol-v1"))),u=s(e("../packstream")),c=e("neo4j-driver-core"),l=s(e("./bolt-protocol-v2.transformer")),f=s(e("./transformer")),h=c.internal.constants.BOLT_PROTOCOL_V2,s=(o=a.default,i(p,o),p.prototype._createPacker=function(e){return new u.default.Packer(e)},p.prototype._createUnpacker=function(e,t){return new u.default.Unpacker(e,t)},Object.defineProperty(p.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new f.default(Object.values(l.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),p);function p(){return null!==o&&o.apply(this,arguments)||this}r.default=s},{"../packstream":58,"./bolt-protocol-v1":2,"./bolt-protocol-v2.transformer":5,"./transformer":29,"neo4j-driver-core":75}],5:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),e("neo4j-driver-core")),s=e("../packstream"),u=e("./transformer"),c=e("./temporal-factory"),o=o(e("./bolt-protocol-v1.transformer")),e=a.internal.temporalUtil,l=e.dateToEpochDay,f=e.localDateTimeToEpochSecond,h=e.localTimeToNanoOfDay,p=88,d=3,_=89,y=4,b=69,m=4,v=116,g=1,w=84,O=2,E=68,T=1,S=100,P=2,C=70,I=3,k=102,R=3;function j(e,t,r){if(!t&&!r)return e;var n,o,i,s=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],s[n]=(0,a.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(s),s}r.default=n(n({},o.default),{createPoint2DTransformer:function(){return new u.TypeTransformer({signature:p,isTypeInstance:function(e){return(0,a.isPoint)(e)&&(null===e.z||void 0===e.z)},toStructure:function(e){return new s.structure.Structure(p,[(0,a.int)(e.srid),e.x,e.y])},fromStructure:function(e){s.structure.verifyStructSize("Point2D",d,e.size);var e=i(e.fields,3),t=e[0],r=e[1],e=e[2];return new a.Point(t,r,e,void 0)}})},createPoint3DTransformer:function(){return new u.TypeTransformer({signature:_,isTypeInstance:function(e){return(0,a.isPoint)(e)&&null!==e.z&&void 0!==e.z},toStructure:function(e){return new s.structure.Structure(_,[(0,a.int)(e.srid),e.x,e.y,e.z])},fromStructure:function(e){s.structure.verifyStructSize("Point3D",y,e.size);var e=i(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new a.Point(t,r,n,e)}})},createDurationTransformer:function(){return new u.TypeTransformer({signature:b,isTypeInstance:a.isDuration,toStructure:function(e){var t=(0,a.int)(e.months),r=(0,a.int)(e.days),n=(0,a.int)(e.seconds),e=(0,a.int)(e.nanoseconds);return new s.structure.Structure(b,[t,r,n,e])},fromStructure:function(e){s.structure.verifyStructSize("Duration",m,e.size);var e=i(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new a.Duration(t,r,n,e)}})},createLocalTimeTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new u.TypeTransformer({signature:v,isTypeInstance:a.isLocalTime,toStructure:function(e){e=h(e.hour,e.minute,e.second,e.nanosecond);return new s.structure.Structure(v,[e])},fromStructure:function(e){s.structure.verifyStructSize("LocalTime",g,e.size);e=i(e.fields,1)[0];return j((0,c.nanoOfDayToLocalTime)(e),t,r)}})},createTimeTransformer:function(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new u.TypeTransformer({signature:w,isTypeInstance:a.isTime,toStructure:function(e){var t=h(e.hour,e.minute,e.second,e.nanosecond),e=(0,a.int)(e.timeZoneOffsetSeconds);return new s.structure.Structure(w,[t,e])},fromStructure:function(e){s.structure.verifyStructSize("Time",O,e.size);var e=i(e.fields,2),t=e[0],e=e[1],t=(0,c.nanoOfDayToLocalTime)(t);return j(new a.Time(t.hour,t.minute,t.second,t.nanosecond,e),r,n)}})},createDateTransformer:function(e){var t=e.disableLosslessIntegers,r=e.useBigInt;return new u.TypeTransformer({signature:E,isTypeInstance:a.isDate,toStructure:function(e){e=l(e.year,e.month,e.day);return new s.structure.Structure(E,[e])},fromStructure:function(e){s.structure.verifyStructSize("Date",T,e.size);e=i(e.fields,1)[0];return j((0,c.epochDayToDate)(e),t,r)}})},createLocalDateTimeTransformer:function(e){var r=e.disableLosslessIntegers,n=e.useBigInt;return new u.TypeTransformer({signature:S,isTypeInstance:a.isLocalDateTime,toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),e=(0,a.int)(e.nanosecond);return new s.structure.Structure(S,[t,e])},fromStructure:function(e){s.structure.verifyStructSize("LocalDateTime",P,e.size);var e=i(e.fields,2),t=e[0],e=e[1];return j((0,c.epochSecondAndNanoToLocalDateTime)(t,e),r,n)}})},createDateTimeWithZoneIdTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new u.TypeTransformer({signature:k,isTypeInstance:function(e){return(0,a.isDateTime)(e)&&null!=e.timeZoneId},toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond),e=e.timeZoneId;return new s.structure.Structure(k,[t,r,e])},fromStructure:function(e){s.structure.verifyStructSize("DateTimeWithZoneId",R,e.size);var e=i(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,c.epochSecondAndNanoToLocalDateTime)(t,r);return j(new a.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,null,e),n,o)}})},createDateTimeWithOffsetTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return new u.TypeTransformer({signature:C,isTypeInstance:function(e){return(0,a.isDateTime)(e)&&null==e.timeZoneId},toStructure:function(e){var t=f(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,a.int)(e.nanosecond),e=(0,a.int)(e.timeZoneOffsetSeconds);return new s.structure.Structure(C,[t,r,e])},fromStructure:function(e){s.structure.verifyStructSize("DateTimeWithZoneOffset",I,e.size);var e=i(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,c.epochSecondAndNanoToLocalDateTime)(t,r);return j(new a.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}})},{"../packstream":58,"./bolt-protocol-v1.transformer":3,"./temporal-factory":28,"./transformer":29,"neo4j-driver-core":75}],6:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),a(e("./bolt-protocol-v2"))),y=a(e("./request-message")),b=e("./bolt-protocol-util"),m=e("./stream-observers"),c=a(e("./bolt-protocol-v3.transformer")),l=a(e("./transformer")),a=e("neo4j-driver-core"),f=(a.internal.bookmarks.Bookmarks,a.internal.constants.BOLT_PROTOCOL_V3),h=a.internal.txConfig.TxConfig,p="context",d="CALL dbms.cluster.routing.getRoutingTable($".concat(p,")"),_=new m.StreamObserver,e=(o=u.default,i(v,o),Object.defineProperty(v.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(c.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),v.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},v.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.authToken,o=e.onError,i=e.onComplete,e=new m.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(y.default.hello(r,n),e,!0),e},v.prototype.prepareToClose=function(){this.write(y.default.goodbye(),_,!0)},v.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.mode,s=e.beforeError,a=e.afterError,u=e.beforeComplete,e=e.afterComplete,s=new m.ResultStreamObserver({server:this._server,beforeError:s,afterError:a,beforeComplete:u,afterComplete:e});return s.prepareToHandleSingleResponse(),(0,b.assertDatabaseIsEmpty)(n,this._onProtocolError,s),(0,b.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,s),this.write(y.default.begin({bookmarks:t,txConfig:r,mode:i}),s,!0),s},v.prototype.commitTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new m.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(y.default.commit(),t,!0),t},v.prototype.rollbackTransaction=function(e){var e=void 0===e?{}:e,t=e.beforeError,r=e.afterError,n=e.beforeComplete,e=e.afterComplete,t=new m.ResultStreamObserver({server:this._server,beforeError:t,afterError:r,beforeComplete:n,afterComplete:e});return t.prepareToHandleSingleResponse(),this.write(y.default.rollback(),t,!0),t},v.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,s=r.impersonatedUser,a=r.mode,u=r.beforeKeys,c=r.afterKeys,l=r.beforeError,f=r.afterError,h=r.beforeComplete,p=r.afterComplete,d=r.flush,d=void 0===d||d,_=r.highRecordWatermark,_=void 0===_?Number.MAX_VALUE:_,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,u=new m.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:c,beforeError:l,afterError:f,beforeComplete:h,afterComplete:p,highRecordWatermark:_,lowRecordWatermark:r});return(0,b.assertDatabaseIsEmpty)(i,this._onProtocolError,u),(0,b.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,u),this.write(y.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,mode:a}),u,!1),this.write(y.default.pullAll(),u,d),u},v.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,r=this.run(d,((t={})[p]=void 0===r?{}:r,t),s(s({},n),{txConfig:h.empty()}));return new m.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:o,onCompleted:e})},v);function v(){return null!==o&&o.apply(this,arguments)||this}r.default=e},{"./bolt-protocol-util":1,"./bolt-protocol-v2":4,"./bolt-protocol-v3.transformer":7,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],7:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v2.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v2.transformer":5}],8:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),a(e("./bolt-protocol-v3"))),m=a(e("./request-message")),v=e("./bolt-protocol-util"),g=e("./stream-observers"),c=a(e("./bolt-protocol-v4x0.transformer")),l=a(e("./transformer")),a=e("neo4j-driver-core"),e=(a.internal.bookmarks.Bookmarks,a.internal.constants),f=e.BOLT_PROTOCOL_V4_0,w=e.FETCH_ALL,h=a.internal.txConfig.TxConfig,p="context",d="database",_="CALL dbms.routing.getRoutingTable($".concat(p,", $").concat(d,")"),e=(o=u.default,i(y,o),Object.defineProperty(y.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(c.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.impersonatedUser,i=e.mode,s=e.beforeError,a=e.afterError,u=e.beforeComplete,e=e.afterComplete,s=new g.ResultStreamObserver({server:this._server,beforeError:s,afterError:a,beforeComplete:u,afterComplete:e});return s.prepareToHandleSingleResponse(),(0,v.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,s),this.write(m.default.begin({bookmarks:t,txConfig:r,database:n,mode:i}),s,!0),s},y.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,s=r.impersonatedUser,a=r.mode,u=r.beforeKeys,c=r.afterKeys,l=r.beforeError,f=r.afterError,h=r.beforeComplete,p=r.afterComplete,d=r.flush,d=void 0===d||d,_=r.reactive,_=void 0!==_&&_,y=r.fetchSize,y=void 0===y?w:y,b=r.highRecordWatermark,b=void 0===b?Number.MAX_VALUE:b,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,u=new g.ResultStreamObserver({server:this._server,reactive:_,fetchSize:y,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:u,afterKeys:c,beforeError:l,afterError:f,beforeComplete:h,afterComplete:p,highRecordWatermark:b,lowRecordWatermark:r}),c=((0,v.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,u),_);return this.write(m.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:a}),u,c&&d),_||this.write(m.default.pull({n:y}),u,d),u},y.prototype._requestMore=function(e,t,r){this.write(m.default.pull({stmtId:e,n:t}),r,!0)},y.prototype._requestDiscard=function(e,t){this.write(m.default.discard({stmtId:e}),t,!0)},y.prototype._noOp=function(){},y.prototype.requestRoutingInformation=function(e){var t,r=e.routingContext,n=e.databaseName,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,r=this.run(_,((t={})[p]=void 0===r?{}:r,t[d]=n,t),s(s({},o),{txConfig:h.empty()}));return new g.ProcedureRouteObserver({resultObserver:r,onProtocolError:this._onProtocolError,onError:i,onCompleted:e})},y);function y(){return null!==o&&o.apply(this,arguments)||this}r.default=e},{"./bolt-protocol-util":1,"./bolt-protocol-v3":6,"./bolt-protocol-v4x0.transformer":9,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],9:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v3.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v3.transformer":7}],10:[function(e,t,r){"use strict";var n,a,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),i(e("./bolt-protocol-v4x0"))),u=i(e("./request-message")),c=e("./stream-observers"),l=e("neo4j-driver-core"),f=i(e("./bolt-protocol-v4x1.transformer")),h=i(e("./transformer")),p=l.internal.constants.BOLT_PROTOCOL_V4_1,i=(a=s.default,o(d,a),Object.defineProperty(d.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(f.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),d.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.authToken,o=e.onError,i=e.onComplete,e=new c.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(u.default.hello(r,n,this._serversideRouting),e,!0),e},d);function d(e,t,r,n,o,i,s){e=a.call(this,e,t,r,n=void 0===n?function(){return null}:n,o,i)||this;return e._serversideRouting=s,e}r.default=i},{"./bolt-protocol-v4x0":8,"./bolt-protocol-v4x1.transformer":11,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],11:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v4x0.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v4x0.transformer":9}],12:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./bolt-protocol-v4x1"))),u=e("neo4j-driver-core"),c=s(e("./bolt-protocol-v4x2.transformer")),l=s(e("./transformer")),f=u.internal.constants.BOLT_PROTOCOL_V4_2,s=(o=a.default,i(h,o),Object.defineProperty(h.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(c.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),h);function h(){return null!==o&&o.apply(this,arguments)||this}r.default=s},{"./bolt-protocol-v4x1":10,"./bolt-protocol-v4x2.transformer":13,"./transformer":29,"neo4j-driver-core":75}],13:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v4x1.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v4x1.transformer":11}],14:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),a(e("./bolt-protocol-v4x2"))),c=a(e("./request-message")),l=e("./stream-observers"),f=a(e("./bolt-protocol-v4x3.transformer")),h=a(e("./bolt-protocol-v5x0.utc.transformer")),p=a(e("./transformer")),a=e("neo4j-driver-core"),d=a.internal.bookmarks.Bookmarks,_=a.internal.constants.BOLT_PROTOCOL_V4_3,e=(o=u.default,i(y,o),Object.defineProperty(y.prototype,"version",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new p.default(Object.values(f.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),y.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.sessionContext,n=void 0===n?{}:n,o=e.onError,e=e.onCompleted,o=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:o,onCompleted:e}),e=n.bookmarks||d.empty();return this.write(c.default.route(t,e.values(),r),o,!0),o},y.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.authToken,o=e.onError,i=e.onComplete,e=new l.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return void 0!==e.patch_bolt&&t._applyPatches(e.patch_bolt),t._onLoginCompleted(e,i)}});return this.write(c.default.hello(r,n,this._serversideRouting,["utc"]),e,!0),e},y.prototype._applyPatches=function(e){e.includes("utc")&&this._applyUtcPatch()},y.prototype._applyUtcPatch=function(){var t=this;this._transformer=new p.default(Object.values(s(s({},f.default),h.default)).map(function(e){return e(t._config,t._log)}))},y);function y(){return null!==o&&o.apply(this,arguments)||this}r.default=e},{"./bolt-protocol-v4x2":12,"./bolt-protocol-v4x3.transformer":15,"./bolt-protocol-v5x0.utc.transformer":20,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],15:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v4x2.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v4x2.transformer":13}],16:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),a(e("./bolt-protocol-v4x3"))),c=e("neo4j-driver-core"),m=a(e("./request-message")),v=e("./stream-observers"),l=a(e("./bolt-protocol-v4x4.transformer")),f=a(e("./bolt-protocol-v5x0.utc.transformer")),h=a(e("./transformer")),a=c.internal.constants,p=a.BOLT_PROTOCOL_V4_4,g=a.FETCH_ALL,d=c.internal.bookmarks.Bookmarks,e=(o=u.default,i(_,o),Object.defineProperty(_.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(l.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),_.prototype.requestRoutingInformation=function(e){var t=e.routingContext,t=void 0===t?{}:t,r=e.databaseName,r=void 0===r?null:r,n=e.impersonatedUser,n=void 0===n?null:n,o=e.sessionContext,o=void 0===o?{}:o,i=e.onError,e=e.onCompleted,i=new v.RouteObserver({onProtocolError:this._onProtocolError,onError:i,onCompleted:e}),e=o.bookmarks||d.empty();return this.write(m.default.routeV4x4(t,e.values(),{databaseName:r,impersonatedUser:n}),i,!0),i},_.prototype.run=function(e,t,r){var r=void 0===r?{}:r,n=r.bookmarks,o=r.txConfig,i=r.database,s=r.mode,a=r.impersonatedUser,u=r.beforeKeys,c=r.afterKeys,l=r.beforeError,f=r.afterError,h=r.beforeComplete,p=r.afterComplete,d=r.flush,d=void 0===d||d,_=r.reactive,_=void 0!==_&&_,y=r.fetchSize,y=void 0===y?g:y,b=r.highRecordWatermark,b=void 0===b?Number.MAX_VALUE:b,r=r.lowRecordWatermark,r=void 0===r?Number.MAX_VALUE:r,u=new v.ResultStreamObserver({server:this._server,reactive:_,fetchSize:y,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:u,afterKeys:c,beforeError:l,afterError:f,beforeComplete:h,afterComplete:p,highRecordWatermark:b,lowRecordWatermark:r}),c=_;return this.write(m.default.runWithMetadata(e,t,{bookmarks:n,txConfig:o,database:i,mode:s,impersonatedUser:a}),u,c&&d),_||this.write(m.default.pull({n:y}),u,d),u},_.prototype.beginTransaction=function(e){var e=void 0===e?{}:e,t=e.bookmarks,r=e.txConfig,n=e.database,o=e.mode,i=e.impersonatedUser,s=e.beforeError,a=e.afterError,u=e.beforeComplete,e=e.afterComplete,s=new v.ResultStreamObserver({server:this._server,beforeError:s,afterError:a,beforeComplete:u,afterComplete:e});return s.prepareToHandleSingleResponse(),this.write(m.default.begin({bookmarks:t,txConfig:r,database:n,mode:o,impersonatedUser:i}),s,!0),s},_.prototype._applyUtcPatch=function(){var t=this;this._transformer=new h.default(Object.values(s(s({},l.default),f.default)).map(function(e){return e(t._config,t._log)}))},_);function _(){return null!==o&&o.apply(this,arguments)||this}r.default=e},{"./bolt-protocol-v4x3":14,"./bolt-protocol-v4x4.transformer":17,"./bolt-protocol-v5x0.utc.transformer":20,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],17:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./bolt-protocol-v4x3.transformer")));r.default=n({},o.default)},{"./bolt-protocol-v4x3.transformer":15}],18:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./bolt-protocol-v4x4"))),u=s(e("./bolt-protocol-v5x0.transformer")),c=s(e("./transformer")),l=s(e("./request-message")),f=e("./stream-observers"),h=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V5_0,s=(o=a.default,i(p,o),Object.defineProperty(p.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new c.default(Object.values(u.default).map(function(e){return e(t._config,t._log)}))),this._transformer},enumerable:!1,configurable:!0}),p.prototype.initialize=function(e){var t=this,e=void 0===e?{}:e,r=e.userAgent,n=e.authToken,o=e.onError,i=e.onComplete,e=new f.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(l.default.hello(r,n,this._serversideRouting),e,!0),e},p);function p(){return null!==o&&o.apply(this,arguments)||this}r.default=s},{"./bolt-protocol-v4x4":16,"./bolt-protocol-v5x0.transformer":19,"./request-message":24,"./stream-observers":27,"./transformer":29,"neo4j-driver-core":75}],19:[function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},c=(Object.defineProperty(r,"__esModule",{value:!0}),e("../packstream")),l=e("neo4j-driver-core"),i=o(e("./bolt-protocol-v4x4.transformer")),o=o(e("./bolt-protocol-v5x0.utc.transformer")),s=4,f=8,a=4;r.default=n(n(n({},i.default),o.default),{createNodeTransformer:function(e){return i.default.createNodeTransformer(e).extendsWith({fromStructure:function(e){c.structure.verifyStructSize("Node",s,e.size);var e=u(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new l.Node(t,r,n,e)}})},createRelationshipTransformer:function(e){return i.default.createRelationshipTransformer(e).extendsWith({fromStructure:function(e){c.structure.verifyStructSize("Relationship",f,e.size);var e=u(e.fields,8),t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],s=e[5],a=e[6],e=e[7];return new l.Relationship(t,r,n,o,i,s,a,e)}})},createUnboundRelationshipTransformer:function(e){return i.default.createUnboundRelationshipTransformer(e).extendsWith({fromStructure:function(e){c.structure.verifyStructSize("UnboundRelationship",a,e.size);var e=u(e.fields,4),t=e[0],r=e[1],n=e[2],e=e[3];return new l.UnboundRelationship(t,r,n,e)}})}})},{"../packstream":58,"./bolt-protocol-v4x4.transformer":17,"./bolt-protocol-v5x0.utc.transformer":20,"neo4j-driver-core":75}],20:[function(e,t,r){"use strict";var i=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),e("../packstream")),u=e("neo4j-driver-core"),c=n(e("./bolt-protocol-v4x4.transformer")),s=e("./temporal-factory"),o=e("../lang/functional"),l=u.internal.temporalUtil.localDateTimeToEpochSecond,f=73,h=3,p=105,d=3;function _(e,t,r){e=new Intl.DateTimeFormat("en-US",{timeZone:e,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"}),r=(0,u.int)(t).multiply(1e3).add((0,u.int)(r).div(1e6)).toNumber(),e=e.formatToParts(r).reduce(function(e,t){return"era"===t.type?e.adjustEra="B"===t.value.toUpperCase()?function(e){return e.subtract(1).negate()}:o.identity:"literal"!==t.type&&(e[t.type]=(0,u.int)(t.value)),e},{}),e.year=e.adjustEra(e.year),r=l(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond);return e.timeZoneOffsetSeconds=r.subtract(t),e.hour=e.hour.modulo(24),e}function y(e,t,r){if(!t&&!r)return e;var n,o,i,s=Object.create(Object.getPrototypeOf(e));for(n in e)!0===Object.prototype.hasOwnProperty.call(e,n)&&(o=e[n],s[n]=(0,u.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(s),s}r.default={createDateTimeWithZoneIdTransformer:function(e,s){var n=e.disableLosslessIntegers,o=e.useBigInt;return c.default.createDateTimeWithZoneIdTransformer(e).extendsWith({signature:p,fromStructure:function(e){a.structure.verifyStructSize("DateTimeWithZoneId",d,e.size);var e=i(e.fields,3),t=e[0],r=e[1],e=e[2],t=_(e,t,r);return y(new u.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,(0,u.int)(r),t.timeZoneOffsetSeconds,e),n,o)},toStructure:function(e){var t=l(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=null!=e.timeZoneOffsetSeconds?e.timeZoneOffsetSeconds:(r=e.timeZoneId,i=t,o=e.nanosecond,n=_(r,i,o),n=l(n.year,n.month,n.day,n.hour,n.minute,n.second,o).subtract(i),i=i.subtract(n),n=_(r,i,o),l(n.year,n.month,n.day,n.hour,n.minute,n.second,o).subtract(i)),n=(null==e.timeZoneOffsetSeconds&&s.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.'),t.subtract(r)),o=(0,u.int)(e.nanosecond),i=e.timeZoneId;return new a.structure.Structure(p,[n,o,i])}})},createDateTimeWithOffsetTransformer:function(e){var n=e.disableLosslessIntegers,o=e.useBigInt;return c.default.createDateTimeWithOffsetTransformer(e).extendsWith({signature:f,toStructure:function(e){var t=l(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),r=(0,u.int)(e.nanosecond),e=(0,u.int)(e.timeZoneOffsetSeconds),t=t.subtract(e);return new a.structure.Structure(f,[t,r,e])},fromStructure:function(e){a.structure.verifyStructSize("DateTimeWithZoneOffset",h,e.size);var e=i(e.fields,3),t=e[0],r=e[1],e=e[2],t=(0,u.int)(t).add(e),t=(0,s.epochSecondAndNanoToLocalDateTime)(t,r);return y(new u.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,e,null),n,o)}})}}},{"../lang/functional":52,"../packstream":58,"./bolt-protocol-v4x4.transformer":17,"./temporal-factory":28,"neo4j-driver-core":75}],21:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},v=(Object.defineProperty(r,"__esModule",{value:!0}),e("neo4j-driver-core")),g=n(e("./bolt-protocol-v1")),w=n(e("./bolt-protocol-v2")),O=n(e("./bolt-protocol-v3")),E=n(e("./bolt-protocol-v4x0")),T=n(e("./bolt-protocol-v4x1")),S=n(e("./bolt-protocol-v4x2")),P=n(e("./bolt-protocol-v4x3")),C=n(e("./bolt-protocol-v4x4")),I=n(e("./bolt-protocol-v5x0")),k=n(e("./response-handler"));r.default=function(e){var t=(e=void 0===e?{}:e).version,r=e.chunker,n=e.dechunker,o=e.channel,i=e.disableLosslessIntegers,s=e.useBigInt,a=e.serversideRouting,u=e.server,c=e.log,l=e.observer,f=t,h=u,p=r,d={disableLosslessIntegers:i,useBigInt:s},_=a,y=function(t){var r=new k.default({transformMetadata:t.transformMetadata.bind(t),log:c,observer:l});return o.onerror=l.onError.bind(l),o.onmessage=function(e){return n.write(e)},n.onmessage=function(e){try{r.handleResponse(t.unpack(e))}catch(e){return l.onError(e)}},r},b=l.onProtocolError.bind(l),m=c;switch(f){case 1:return new g.default(h,p,d,y,m,b);case 2:return new w.default(h,p,d,y,m,b);case 3:return new O.default(h,p,d,y,m,b);case 4:return new E.default(h,p,d,y,m,b);case 4.1:return new T.default(h,p,d,y,m,b,_);case 4.2:return new S.default(h,p,d,y,m,b,_);case 4.3:return new P.default(h,p,d,y,m,b,_);case 4.4:return new C.default(h,p,d,y,m,b,_);case 5:return new I.default(h,p,d,y,m,b,_);default:throw(0,v.newError)("Unknown Bolt protocol version: "+f)}}},{"./bolt-protocol-v1":2,"./bolt-protocol-v2":4,"./bolt-protocol-v3":6,"./bolt-protocol-v4x0":8,"./bolt-protocol-v4x1":10,"./bolt-protocol-v4x2":12,"./bolt-protocol-v4x3":14,"./bolt-protocol-v4x4":16,"./bolt-protocol-v5x0":18,"./response-handler":25,"neo4j-driver-core":75}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../channel"),i=e("neo4j-driver-core"),s=1616949271;function a(e,t){return{major:e,minor:t}}function u(){var e=[a(5,0),[a(4,4),a(4,2)],a(4,1),a(3,0)];if(4<e.length)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var o=(0,n.alloc)(20);return o.writeInt32(s),e.forEach(function(e){var t,r,n;e instanceof Array?(r=(n=e[0]).major,n=n.minor,t=e[1].minor,o.writeInt32(n-t<<16|n<<8|r)):(r=e.major,n=e.minor,o.writeInt32(n<<8|r))}),o.reset(),o}r.default=function(t){var o=this;return new Promise(function(r,n){function e(e){n(e)}t.onerror=e.bind(o),t._error&&e(t._error),t.onmessage=function(t){try{var e=function(e){if(72===(e=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()])[0]&&84===e[1]&&84===e[2]&&80===e[3])throw(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(e[3]+"."+e[2])}(t);r({protocolVersion:e,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(e){n(e)}},t.write(u())})}},{"../channel":39,"neo4j-driver-core":75}],23:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.RawRoutingTable=r.BoltProtocol=void 0,i(e("./handshake"))),a=i(e("./create")),u=i(e("./bolt-protocol-v4x3")),i=i(e("./routing-table-raw"));o(e("./stream-observers"),r),r.BoltProtocol=u.default,r.RawRoutingTable=i.default,r.default={handshake:s.default,create:a.default}},{"./bolt-protocol-v4x3":14,"./create":21,"./handshake":22,"./routing-table-raw":26,"./stream-observers":27}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("neo4j-driver-core"),e=o.internal.constants,s=e.ACCESS_MODE_READ,n=e.FETCH_ALL,a=o.internal.util.assertString,e=(i.init=function(e,t){return new i(1,[e,t],function(){return"INIT ".concat(e," {...}")})},i.run=function(e,t){return new i(16,[e,t],function(){return"RUN ".concat(e," ").concat(o.json.stringify(t))})},i.pullAll=function(){return l},i.reset=function(){return f},i.hello=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);t=Object.assign({user_agent:e},t);return r&&(t.routing=r),n&&(t.patch_bolt=n),new i(1,[t],function(){return"HELLO {user_agent: '".concat(e,"', ...}")})},i.begin=function(e){var e=void 0===e?{}:e,t=u(e.bookmarks,e.txConfig,e.database,e.mode,e.impersonatedUser);return new i(17,[t],function(){return"BEGIN ".concat(o.json.stringify(t))})},i.commit=function(){return h},i.rollback=function(){return p},i.runWithMetadata=function(e,t,r){var r=void 0===r?{}:r,n=u(r.bookmarks,r.txConfig,r.database,r.mode,r.impersonatedUser);return new i(16,[e,t,n],function(){return"RUN ".concat(e," ").concat(o.json.stringify(t)," ").concat(o.json.stringify(n))})},i.goodbye=function(){return d},i.pull=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=c(null==t?-1:t,(void 0===e?n:e)||n);return new i(63,[r],function(){return"PULL ".concat(o.json.stringify(r))})},i.discard=function(e){var e=void 0===e?{}:e,t=e.stmtId,t=void 0===t?-1:t,e=e.n,r=c(null==t?-1:t,(void 0===e?n:e)||n);return new i(47,[r],function(){return"DISCARD ".concat(o.json.stringify(r))})},i.route=function(e,t,r){return new i(102,[e=void 0===e?{}:e,t=void 0===t?[]:t,r=void 0===r?null:r],function(){return"ROUTE ".concat(o.json.stringify(e)," ").concat(o.json.stringify(t)," ").concat(r)})},i.routeV4x4=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=[]);var n={};return(r=void 0===r?{}:r).databaseName&&(n.db=r.databaseName),r.impersonatedUser&&(n.imp_user=r.impersonatedUser),new i(102,[e,t,n],function(){return"ROUTE ".concat(o.json.stringify(e)," ").concat(o.json.stringify(t)," ").concat(o.json.stringify(n))})},i);function i(e,t,r){this.signature=e,this.fields=t,this.toString=r}function u(e,t,r,n,o){var i={};return e.isEmpty()||(i.bookmarks=e.values()),null!==t.timeout&&(i.tx_timeout=t.timeout),t.metadata&&(i.tx_metadata=t.metadata),r&&(i.db=a(r,"database")),o&&(i.imp_user=a(o,"impersonatedUser")),n===s&&(i.mode="r"),i}function c(e,t){t={n:(0,o.int)(t)};return-1!==e&&(t.qid=(0,o.int)(e)),t}var l=new(r.default=e)(63,[],function(){return"PULL_ALL"}),f=new e(15,[],function(){return"RESET"}),h=new e(18,[],function(){return"COMMIT"}),p=new e(19,[],function(){return"ROLLBACK"}),d=new e(2,[],function(){return"GOODBYE"})},{"neo4j-driver-core":75}],25:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=e("neo4j-driver-core");function n(){}function o(e){return e}var s={onNext:n,onCompleted:n,onError:n};function a(e){var e=void 0===e?{}:e,t=e.transformMetadata,r=e.log,e=e.observer;this._pendingObservers=[],this._log=r,this._transformMetadata=t||o,this._observer=Object.assign({onPendingObserversChange:n,onError:n,onFailure:n,onErrorApplyTransformation:o},e)}Object.defineProperty(a.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),a.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(i.json.stringify(e))),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(i.json.stringify(e)));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(i.json.stringify(e)));try{var n=function(e){{if("Neo.TransientError.Transaction.Terminated"===e)return"Neo.ClientError.Transaction.Terminated";if("Neo.TransientError.Transaction.LockClientStopped"===e)return"Neo.ClientError.Transaction.LockClientStopped"}return e}(t.code),o=(0,i.newError)(t.message,n);this._currentFailure=this._observer.onErrorApplyTransformation(o),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(i.json.stringify(e)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,i.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,i.newError)("Unknown Bolt protocol message: "+e))}},a.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},a.prototype._queueObserver=function(e){return(e=e||s).onCompleted=e.onCompleted||n,e.onError=e.onError||n,e.onNext=e.onNext||n,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},a.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},a.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},a.prototype._resetFailure=function(){this._currentFailure=null},r.default=a},{"neo4j-driver-core":75}],26:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=(Object.defineProperty(r,"__esModule",{value:!0}),s.ofRecord=function(e){return null===e?s.ofNull():new d(e)},s.ofMessageResponse=function(e){return null===e?s.ofNull():new u(e)},s.ofNull=function(){return new f},Object.defineProperty(s.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),s);function s(){}r.default=i;o(c,a=i),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0});var a,u=c;function c(e){var t=a.call(this)||this;return t._response=e,t}o(h,l=i),Object.defineProperty(h.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0});var l,f=h;function h(){return null!==l&&l.apply(this,arguments)||this}o(_,p=i),Object.defineProperty(_.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0});var p,d=_;function _(e){var t=p.call(this)||this;return t._record=e,t}},{}],27:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.ProcedureRouteObserver=r.RouteObserver=r.CompletedObserver=r.FailedObserver=r.ResetObserver=r.LoginObserver=r.ResultStreamObserver=r.StreamObserver=void 0,e("neo4j-driver-core")),a=i(e("./routing-table-raw")),d=s.internal.constants.FETCH_ALL,u=s.error.PROTOCOL_ERROR,i=(c.prototype.onNext=function(e){},c.prototype.onError=function(e){},c.prototype.onCompleted=function(e){},c);function c(){}r.StreamObserver=i;o(l,_=i),l.prototype.pause=function(){this._paused=!0},l.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},l.prototype.onNext=function(e){var t=new s.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},l.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},l.prototype.onError=function(e){this._state.onError(this,e)},l.prototype.cancel=function(){this._discard=!0},l.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(P.STREAMING)},l.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(P.SUCCEEDED)},l.prototype.subscribe=function(e){if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===P.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._error&&e.onError(this._error),this._observers.push(e),this._state===P.READY&&this._handleStreaming()},l.prototype._handleHasMore=function(e){this._setState(P.READY),this._handleStreaming(),delete e.has_more},l.prototype._handlePullSuccess=function(e){var t,r=this,n=Object.assign(this._server?{server:this._server}:{},this._meta,e);[void 0,null,"r","w","rw","s"].includes(n.type)?(this._setState(P.SUCCEEDED),e=null,t=function(){r._tail=n,r._observers.some(function(e){return e.onCompleted})&&r._observers.forEach(function(e){e.onCompleted&&e.onCompleted(n)}),r._afterComplete&&r._afterComplete(n)},(e=this._beforeComplete?this._beforeComplete(n):e)?Promise.resolve(e).then(t):t()):this.onError((0,s.newError)('Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got \''.concat(n.type,"'"),u))},l.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n;delete e.fields}null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var o=null,i=(this._beforeKeys&&(o=this._beforeKeys(this._fieldKeys)),function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()});o?Promise.resolve(o).then(i):i()}},l.prototype._handleError=function(t){function e(){r._observers.some(function(e){return e.onError})&&r._observers.forEach(function(e){e.onError&&e.onError(t)}),r._afterError&&r._afterError(t)}var r=this,n=(this._setState(P.FAILED),this._error=t,null);this._beforeError&&(n=this._beforeError(t));n?Promise.resolve(n).then(e):e()},l.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._paused||!this._discard&&!this._autoPull||this._more())},l.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):this._moreFunction(this._queryId,this._fetchSize,this),this._setState(P.STREAMING)},l.prototype._storeMetadataForCompletion=function(e){for(var t,r=Object.keys(e),n=r.length;n--;)t=r[n],this._meta[t]=e[t]},l.prototype._setState=function(e){this._state=e},l.prototype._setupAutoPull=function(){this._autoPull=!0};var _,e=l;function l(e){var e=void 0===e?{}:e,t=e.reactive,t=void 0!==t&&t,r=e.moreFunction,n=e.discardFunction,o=e.fetchSize,o=void 0===o?d:o,i=e.beforeError,s=e.afterError,a=e.beforeKeys,u=e.afterKeys,c=e.beforeComplete,l=e.afterComplete,f=e.server,h=e.highRecordWatermark,h=void 0===h?Number.MAX_VALUE:h,e=e.lowRecordWatermark,e=void 0===e?Number.MAX_VALUE:e,p=_.call(this)||this;return p._fieldKeys=null,p._fieldLookup=null,p._head=null,p._queuedRecords=[],p._tail=null,p._error=null,p._observers=[],p._meta={},p._server=f,p._beforeError=i,p._afterError=s,p._beforeKeys=a,p._afterKeys=u,p._beforeComplete=c,p._afterComplete=l,p._queryId=null,p._moreFunction=r,p._discardFunction=n,p._discard=!1,p._fetchSize=o,p._lowRecordWatermark=e,p._highRecordWatermark=h,p._setState(t?P.READY:P.READY_STREAMING),p._setupAutoPull(),p._paused=!1,p}r.ResultStreamObserver=e;o(p,f=i),p.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when initializing "+s.json.stringify(e)))},p.prototype.onError=function(e){this._onError&&this._onError(e)},p.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)};var f,h=p;function p(e){var e=void 0===e?{}:e,t=e.onError,e=e.onCompleted,r=f.call(this)||this;return r._onError=t,r._onCompleted=e,r}r.LoginObserver=h;o(b,y=i),b.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},b.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},b.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)};var y,h=b;function b(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onComplete,n=y.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onComplete=e,n}r.ResetObserver=h;o(v,m=e);var m,h=v;function v(e){var t=e.error,e=e.onError,e=m.call(this,{beforeError:e})||this;return e.onError(t),e}r.FailedObserver=h;o(w,g=e);var g,h=w;function w(){var e=g.call(this)||this;return g.prototype.markCompleted.call(e),e}r.CompletedObserver=h;o(E,O=i),E.prototype.onNext=function(e){this._records.push(e)},E.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},E.prototype.onCompleted=function(){null!==this._records&&1!==this._records.length?this.onError((0,s.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+s.json.stringify(this._records),u)):this._onCompleted&&this._onCompleted(a.default.ofRecord(this._records[0]))};var O,e=E;function E(e){var t=e.resultObserver,r=e.onProtocolError,n=e.onError,e=e.onCompleted,o=O.call(this)||this;return o._resultObserver=t,o._onError=n,o._onCompleted=e,o._records=[],o._onProtocolError=r,t.subscribe(o),o}r.ProcedureRouteObserver=e;o(S,T=i),S.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},S.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},S.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(a.default.ofMessageResponse(e))};var T,h=S;function S(e){var e=void 0===e?{}:e,t=e.onProtocolError,r=e.onError,e=e.onCompleted,n=T.call(this)||this;return n._onProtocolError=t,n._onError=r,n._onCompleted=e,n}r.RouteObserver=h;var P={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(P.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"},pull:function(e){return e._more()}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(e){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},{"./routing-table-raw":26,"neo4j-driver-core":75}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.epochSecondAndNanoToLocalDateTime=r.nanoOfDayToLocalTime=r.epochDayToDate=void 0;var o=e("neo4j-driver-core"),e=o.internal.temporalUtil,i=e.DAYS_0000_TO_1970,s=e.DAYS_PER_400_YEAR_CYCLE,a=e.NANOS_PER_HOUR,u=e.NANOS_PER_MINUTE,c=e.NANOS_PER_SECOND,n=e.SECONDS_PER_DAY,l=e.floorDiv,f=e.floorMod;function h(e){var e=(e=(0,o.int)(e)).add(i).subtract(60),t=(0,o.int)(0),r=(e.lessThan(0)&&(t=(r=e.add(1).div(s).subtract(1)).multiply(400),e=e.add(r.multiply(-s))),e.multiply(400).add(591).div(s)),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400))),e=(n.lessThan(0)&&(r=r.subtract(1),n=e.subtract(r.multiply(365).add(r.div(4)).subtract(r.div(100)).add(r.div(400)))),r=r.add(t),n),t=e.multiply(5).add(2).div(153),n=t.add(2).modulo(12).add(1),e=e.subtract(t.multiply(306).add(5).div(10)).add(1),r=r.add(t.div(10));return new o.Date(r,n,e)}function p(e){var t=(e=(0,o.int)(e)).div(a),r=(e=e.subtract(t.multiply(a))).div(u),n=(e=e.subtract(r.multiply(u))).div(c),e=e.subtract(n.multiply(c));return new o.LocalTime(t,r,n,e)}r.epochDayToDate=h,r.nanoOfDayToLocalTime=p,r.epochSecondAndNanoToLocalDateTime=function(e,t){var r=l(e,n),e=f(e,n).multiply(c).add(t),t=h(r),r=p(e);return new o.LocalDateTime(t.year,t.month,t.day,r.hour,r.minute,r.second,r.nanosecond)}},{"neo4j-driver-core":75}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypeTransformer=void 0;var n=e("../packstream"),o=e("neo4j-driver-core").internal.objectUtil;function i(e){this._transformers=e,this._transformersPerSignature=new Map(e.map(function(e){return[e.signature,e]})),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}function s(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;this.signature=t,this.isTypeInstance=e,this.fromStructure=r,this.toStructure=n,Object.freeze(this)}i.prototype.fromStructure=function(e){try{return e instanceof n.structure.Structure&&this._transformersPerSignature.has(e.signature)?(0,this._transformersPerSignature.get(e.signature).fromStructure)(e):e}catch(e){return o.createBrokenObject(e)}},i.prototype.toStructure=function(t){var e=this._transformers.find(function(e){return(0,e.isTypeInstance)(t)});return void 0!==e?e.toStructure(t):t},r.default=i,s.prototype.extendsWith=function(e){var t=e.signature,r=e.fromStructure,n=e.toStructure,e=e.isTypeInstance;return new s({signature:t||this.signature,fromStructure:r||this.fromStructure,toStructure:n||this.toStructure,isTypeInstance:e||this.isTypeInstance})},r.TypeTransformer=s},{"../packstream":58,"neo4j-driver-core":75}],30:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=(Object.defineProperty(r,"__esModule",{value:!0}),s.prototype.getUInt8=function(e){throw new Error("Not implemented")},s.prototype.getInt8=function(e){throw new Error("Not implemented")},s.prototype.getFloat64=function(e){throw new Error("Not implemented")},s.prototype.putUInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putFloat64=function(e,t){throw new Error("Not implemented")},s.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},s.prototype.getSlice=function(e,t){return new u(e,t,this)},s.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},s.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},s.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},s.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},s.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},s.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},s.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},s.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},s.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},s.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},s.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},s.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},s.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},s.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},s.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},s.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},s.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},s.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},s.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},s.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},s.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},s.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},s.prototype.remaining=function(){return this.length-this.position},s.prototype.hasRemaining=function(){return 0<this.remaining()},s.prototype.reset=function(){this.position=0},s.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},s.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);e+=r=1===r.length?"0"+r:r,t!==this.length-1&&(e+=" ")}return e},s);function s(e){this.position=0,this.length=e}r.default=i;o(c,a=i),c.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},c.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},c.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},c.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},c.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},c.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)};var a,u=c;function c(e,t,r){t=a.call(this,t)||this;return t._start=e,t._inner=r,t}},{}],31:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.BaseBuffer=void 0,n(e("./base-buf")));r.BaseBuffer=n.default,r.default=n.default},{"./base-buf":30}],32:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),n(e("../channel-buf"))),a=e("neo4j-driver-core"),n=a.internal.util,u=n.ENCRYPTION_OFF,c=n.ENCRYPTION_ON;function o(e,t,r){void 0===t&&(t=l),void 0===r&&(r=function(e){return new WebSocket(e)});var n,o=this,t=(this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=e,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,function(e,t){var r=function(e){return!0===e.encrypted||e.encrypted===c}(e),n=function(e){return!1===e.encrypted||e.encrypted===u}(e),e=e.trust,t=function(e){e="function"==typeof e?e():"";return e&&0<=e.toLowerCase().indexOf("https")}(t);if(function(e,t,r){null!==r&&(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,t),n)return{scheme:"ws",error:null};if(t)return{scheme:"wss",error:null};if(r)return e&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==e?{scheme:null,error:(0,a.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+e+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+u+'"` in the driver configuration.')}:{scheme:"wss",error:null};return{scheme:"ws",error:null}}(e,t)),i=t.scheme,t=t.error;t?this._error=t:(this._ws=function(t,r,n){var o=t+"://"+r.asHostPort();try{return n(o)}catch(e){if(function(e,t){return"SyntaxError"===e.name&&function(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}(t.asHostPort())}(e,r))return o=function(e,t){var r=t.host().replace(/:/g,"-").replace("%","s")+".ipv6-literal.net";return"".concat(e,"://").concat(r,":").concat(t.port())}(t,r),n(o);throw e}}(i,e.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(e){e&&!e.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var e=n._pending;n._pending=null;for(var t=0;t<e.length;t++)n.write(e[t])},this._ws.onmessage=function(e){o._resetTimeout(),n.onmessage&&(e=new s.default(e.data),n.onmessage(e))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}function l(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}o.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,a.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,a.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},o.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof s.default))throw(0,a.newError)("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(1===this._ws.readyState)throw e;this._handleConnectionError()}}},o.prototype.close=function(){var r=this;return new Promise(function(e,t){r._ws&&3!==r._ws.readyState?(r._open=!1,r._clearConnectionTimeout(),r._ws.onclose=function(){return e()},r._ws.close()):e()})},o.prototype.setupReceiveTimeout=function(e){this._receiveTimeout=e},o.prototype.stopReceiveTimeout=function(){null!==this._receiveTimeout&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,null!=this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},o.prototype.startReceiveTimeout=function(){null===this._receiveTimeout||this._receiveTimeoutStarted||(this._receiveTimeoutStarted=!0,this._resetTimeout())},o.prototype._resetTimeout=function(){var e=this;this._receiveTimeoutStarted&&(null!==this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout(function(){e._receiveTimeoutId=null,e._timedout=!0,e.stopReceiveTimeout(),e._error=(0,a.newError)("Connection lost. Server didn't respond in ".concat(e._receiveTimeout,"ms"),e._config.connectionErrorCode),e.close(),e.onerror&&e.onerror(e._error)},this._receiveTimeout))},o.prototype._setupConnectionTimeout=function(){var e,t=this,r=this._config.connectionTimeout;return r?(e=this._ws,setTimeout(function(){1!==e.readyState&&(t._connectionTimeoutFired=!0,e.close())},r)):null},o.prototype._clearConnectionTimeout=function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))},r.default=o},{"../channel-buf":35,"neo4j-driver-core":75}],33:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,e=e("neo4j-driver-core").internal.resolver.BaseHostNameResolver,o=(o(s,i=e),s.prototype.resolve=function(e){return this._resolveToItself(e)},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.default=o},{"neo4j-driver-core":75}],34:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.HostNameResolver=r.Channel=void 0,n(e("./browser-channel"))),n=n(e("./browser-host-name-resolver"));r.Channel=o.default,r.HostNameResolver=n.default},{"./browser-channel":32,"./browser-host-name-resolver":33}],35:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.alloc=void 0,s(e("buffer"))),s=s(e("../buf")),u=(o=s.default,i(c,o),c.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},c.prototype.getInt8=function(e){return this._buffer.readInt8(e)},c.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},c.prototype.putUInt8=function(e,t){this._buffer.writeUInt8(t,e)},c.prototype.putInt8=function(e,t){this._buffer.writeInt8(t,e)},c.prototype.putFloat64=function(e,t){this._buffer.writeDoubleBE(t,e)},c.prototype.putBytes=function(e,t){var r;t instanceof c?(r=Math.min(t.length-t.position,this.length-e),t._buffer.copy(this._buffer,e,t.position,t.position+r),t.position+=r):o.prototype.putBytes.call(this,e,t)},c.prototype.getSlice=function(e,t){return new c(this._buffer.slice(e,e+t))},c);function c(e){var t=this,e=(e=e)instanceof a.default.Buffer?e:"number"==typeof e&&"function"==typeof a.default.Buffer.alloc?a.default.Buffer.alloc(e):new a.default.Buffer(e);return(t=o.call(this,e.length)||this)._buffer=e,t}r.default=u,r.alloc=function(e){return new u(e)}},{"../buf":31,buffer:108}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("neo4j-driver-core"),e=n.internal.util,o=e.ENCRYPTION_OFF,e=e.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,s=[null,void 0,!0,!1,e,o],a=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];r.default=function(e,t,r){this.address=e,this.encrypted=function(e){e=e.encrypted;if(-1!==s.indexOf(e))return e;throw(0,n.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(s))}(t),this.trust=function(e){e=e.trust;if(-1!==a.indexOf(e))return e;throw(0,n.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(a))}(t),this.trustedCertificates=t.trustedCertificates||[],this.knownHostsPath=t.knownHosts||null,this.connectionErrorCode=r||i,this.connectionTimeout=t.connectionTimeout}},{"neo4j-driver-core":75}],37:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.Dechunker=r.Chunker=void 0,s(e("../buf/base-buf"))),u=e("./channel-buf"),c=s(e("./combined-buf")),s=(o=a.default,i(l,o),l.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},l.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},l.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},l.prototype.putBytes=function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},l.prototype.flush=function(){var e;return 0<this._buffer.position&&(this._closeChunkIfOpen(),e=this._buffer,this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,u.alloc)(this._bufferSize),this._chunkOpen=!1),this},l.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},l.prototype._ensure=function(e){e=this._chunkOpen?e:e+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},l.prototype._closeChunkIfOpen=function(){var e;this._chunkOpen&&(e=this._buffer.position-(this._currentChunkStart+2),this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1)},l);function l(e,t){var r=o.call(this,0)||this;return r._bufferSize=t||1400,r._ch=e,r._buffer=(0,u.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}r.Chunker=s,f.prototype.AWAITING_CHUNK=function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))},f.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(e){},f.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new c.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},f.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},r.Dechunker=f},{"../buf/base-buf":30,"./channel-buf":35,"./combined-buf":38}],38:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=(Object.defineProperty(r,"__esModule",{value:!0}),e("../buf")),a=e("./channel-buf"),e=(o=s.BaseBuffer,i(u,o),u.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},u.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},u.prototype.getFloat64=function(e){for(var t=(0,a.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},u);function u(e){for(var t=this,r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=o.call(this,r)||this)._buffers=e,t}r.default=e},{"../buf":31,"./channel-buf":35}],39:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.utf8=r.alloc=r.ChannelConfig=void 0,o(e("./node"),r),o(e("./chunking"),r),e("./channel-config")),a=(Object.defineProperty(r,"ChannelConfig",{enumerable:!0,get:function(){return i(s).default}}),e("./channel-buf")),u=(Object.defineProperty(r,"alloc",{enumerable:!0,get:function(){return a.alloc}}),e("./utf8"));Object.defineProperty(r,"utf8",{enumerable:!0,get:function(){return i(u).default}})},{"./channel-buf":35,"./channel-config":36,"./chunking":37,"./node":34,"./utf8":40}],40:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),n(e("./channel-buf"))),u=e("neo4j-driver-core"),i=n(e("buffer")),c=new(e("string_decoder").StringDecoder)("utf8");r.default={encode:function(e){return new o.default((e=e,"function"==typeof i.default.Buffer.from?i.default.Buffer.from(e,"utf8"):new i.default.Buffer(e,"utf8")))},decode:function(e,t){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return n=t,a=(r=e).position,n=a+n,r.position=Math.min(n,r.length),r._buffer.toString("utf8",a,n);var o,i,s,r,n,a;if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return o=function(e){return c.write(e._buffer)},r=function(){return c.end()},i=t,s=(a=e).position,a._updatePos(Math.min(t,a.length-s)),a._buffers.reduce(function(e,t){var r,n;return i<=0?e:s>=t.length?(s-=t.length,""):(t._updatePos(s-t.position),r=Math.min(t.length-s,i),n=t.readSlice(r),t._updatePos(r),i=Math.max(i-n.length,0),s=0,e+o(n))},"")+r();throw(0,u.newError)("Don't know how to decode strings from '".concat(e,"'"))}}},{"./channel-buf":35,buffer:108,"neo4j-driver-core":75,string_decoder:111}],41:[function(e,t,r){"use strict";var n,s,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},a=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),u(e("./connection-provider-pooled"))),c=e("../connection"),e=e("neo4j-driver-core"),l=e.internal.constants,f=l.BOLT_PROTOCOL_V3,h=l.BOLT_PROTOCOL_V4_0,p=l.BOLT_PROTOCOL_V4_4,d=e.error.SERVICE_UNAVAILABLE,l=(s=u.default,o(_,s),_.prototype.acquireConnection=function(e){var r=this,e=void 0===e?{}:e,n=(e.accessMode,e.database),t=(e.bookmarks,c.ConnectionErrorHandler.create({errorCode:d,handleAuthorizationExpired:function(e,t){return r._handleAuthorizationExpired(e,t,n)}}));return this._connectionPool.acquire(this._address).then(function(e){return new c.DelegateConnection(e,t)})},_.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this._connectionPool.purge(t).catch(function(){}),e},_.prototype._hasProtocolVersion=function(n){return i(this,void 0,void 0,function(){var t,r;return a(this,function(e){switch(e.label){case 0:return[4,(0,c.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return t=e.sent(),r=t.protocol()?t.protocol().version:null,[4,t.close()];case 2:return e.sent(),r?[2,n(r)]:[2,!1]}})})},_.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return h<=e})];case 1:return[2,e.sent()]}})})},_.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},_.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return f<=e})];case 1:return[2,e.sent()]}})})},_.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return p<=e})];case 1:return[2,e.sent()]}})})},_.prototype.verifyConnectivityAndGetServerInfo=function(){return i(this,void 0,void 0,function(){return a(this,function(e){switch(e.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,e.sent()]}})})},_);function _(e){var t=e.id,r=e.config,n=e.log,o=e.address,i=e.userAgent,e=e.authToken,t=s.call(this,{id:t,config:r,log:n,userAgent:i,authToken:e})||this;return t._address=o,t}r.default=l},{"../connection":50,"./connection-provider-pooled":42,"neo4j-driver-core":75}],42:[function(e,t,r){"use strict";var n,a,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},c=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},l=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},f=(Object.defineProperty(r,"__esModule",{value:!0}),e("../connection")),h=u(e("../pool")),p=e("neo4j-driver-core"),d=p.error.SERVICE_UNAVAILABLE,u=(a=p.ConnectionProvider,o(_,a),_.prototype._createConnectionErrorHandler=function(){return new f.ConnectionErrorHandler(d)},_.prototype._createConnection=function(e,r){var n=this;return this._createChannelConnection(e).then(function(t){return t._release=function(){return r(e,t)},(n._openConnections[t.id]=t).connect(n._userAgent,n._authToken).catch(function(e){throw n._destroyConnection(t),e})})},_.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var t=this._config.maxConnectionLifetime;return Date.now()-e.creationTimestamp<=t},_.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},_.prototype._verifyConnectivityAndGetServerVersion=function(e){var n=e.address;return c(this,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.acquire(n)];case 1:t=e.sent(),r=new p.ServerInfo(t.server,t.protocol().version),e.label=2;case 2:return e.trys.push([2,,5,7]),t.protocol().isLastMessageLogin()?[3,4]:[4,t.resetAndFlush()];case 3:e.sent(),e.label=4;case 4:return[3,7];case 5:return[4,t._release()];case 6:return e.sent(),[7];case 7:return[2,r]}})})},_.prototype.close=function(){return c(this,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},_._installIdleObserverOnConnection=function(e,t){e._queueObserver(t)},_._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},_);function _(e,t){var r=e.id,n=e.config,o=e.log,i=e.userAgent,e=e.authToken,s=(void 0===t&&(t=null),a.call(this)||this);return s._id=r,s._config=n,s._log=o,s._userAgent=i,s._authToken=e,s._createChannelConnection=t||function(e){return(0,f.createChannelConnection)(e,s._config,s._createConnectionErrorHandler(),s._log)},s._connectionPool=new h.default({create:s._createConnection.bind(s),destroy:s._destroyConnection.bind(s),validate:s._validateConnection.bind(s),installIdleObserver:_._installIdleObserverOnConnection.bind(s),removeIdleObserver:_._removeIdleObserverOnConnection.bind(s),config:h.PoolConfig.fromDriverConfig(n),log:s._log}),s._openConnections={},s}r.default=u},{"../connection":50,"../pool":62,"neo4j-driver-core":75}],43:[function(e,M,t){"use strict";var n,l,r=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),f=this&&this.__assign||function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},p=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},d=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},h=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},_=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},y=(Object.defineProperty(t,"__esModule",{value:!0}),e("neo4j-driver-core")),b=s(e("../rediscovery")),m=e("../channel"),u=a(e("./connection-provider-single")),s=a(e("./connection-provider-pooled")),v=e("../load-balancing"),g=e("../connection"),w=y.error.SERVICE_UNAVAILABLE,O=y.error.SESSION_EXPIRED,c=y.internal.bookmarks.Bookmarks,a=y.internal.constants,E=a.ACCESS_MODE_READ,T=a.ACCESS_MODE_WRITE,S=a.BOLT_PROTOCOL_V3,P=a.BOLT_PROTOCOL_V4_0,C=a.BOLT_PROTOCOL_V4_4,I="Neo.ClientError.Database.DatabaseNotFound",k="Neo.ClientError.Transaction.InvalidBookmark",R="Neo.ClientError.Transaction.InvalidBookmarkMixture",j="Neo.ClientError.Security.AuthorizationExpired",N=(0,y.int)(3e4),e=(l=s.default,r(A,l),A.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(O)},A.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forget(t,r||null),e},A.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this._connectionPool.purge(t).catch(function(){}),e},A.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(t," for database '").concat(r,"' because of an error ").concat(e.code," '").concat(e.message,"'")),this.forgetWriter(t,r||null),(0,y.newError)("No longer possible to write to server at "+t,O,e)},A.prototype.acquireConnection=function(e){var e=void 0===e?{}:e,u=e.accessMode,c=e.database,l=e.bookmarks,f=e.impersonatedUser,h=e.onDatabaseNameResolved;return p(this,void 0,void 0,function(){var t,r,n,o,i,s,a=this;return d(this,function(e){switch(e.label){case 0:return n={database:c||null},o=new g.ConnectionErrorHandler(O,function(e,t){return a._handleUnavailability(e,t,n.database)},function(e,t){return a._handleWriteFailure(e,t,n.database)},function(e,t){return a._handleAuthorizationExpired(e,t,n.database)}),[4,this._freshRoutingTable({accessMode:u,database:n.database,bookmarks:l,impersonatedUser:f,onDatabaseNameResolved:function(e){n.database=n.database||e,h&&h(e)}})];case 1:if(i=e.sent(),u===E)r=this._loadBalancingStrategy.selectReader(i.readers),t="read";else{if(u!==T)throw(0,y.newError)("Illegal mode "+u);r=this._loadBalancingStrategy.selectWriter(i.writers),t="write"}if(!r)throw(0,y.newError)("Failed to obtain connection towards ".concat(t," server. Known routing table is: ").concat(i),O);e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(r,t,i)];case 3:return s=e.sent(),[2,new g.DelegateConnection(s,o)];case 4:throw s=e.sent(),o.handleAndTransformError(s,r);case 5:return[2]}})})},A.prototype._hasProtocolVersion=function(s){return p(this,void 0,void 0,function(){var t,r,n,o,i;return d(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=e.sent(),n=0,e.label=2;case 2:if(!(n<t.length))return[3,8];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,(0,g.createChannelConnection)(t[n],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return i=e.sent(),o=i.protocol()?i.protocol().version:null,[4,i.close()];case 5:return e.sent(),o?[2,s(o)]:[2,!1];case 6:return i=e.sent(),r=i,[3,7];case 7:return n++,[3,2];case 8:if(r)throw r;return[2,!1]}})})},A.prototype.supportsMultiDb=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return P<=e})];case 1:return[2,e.sent()]}})})},A.prototype.supportsTransactionConfig=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return S<=e})];case 1:return[2,e.sent()]}})})},A.prototype.supportsUserImpersonation=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return C<=e})];case 1:return[2,e.sent()]}})})},A.prototype.getNegotiatedProtocolVersion=function(){var r=this;return new Promise(function(e,t){r._hasProtocolVersion(e).catch(t)})},A.prototype.verifyConnectivityAndGetServerInfo=function(e){var l=e.database,f=e.accessMode;return p(this,void 0,void 0,function(){var t,r,n,o,i,s,a,u,c;return d(this,function(e){switch(e.label){case 0:return t={database:l||null},[4,this._freshRoutingTable({accessMode:f,database:t.database,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:r=e.sent(),r=f===T?r.writers:r.readers,n=(0,y.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(f,"'"),w),e.label=2;case 2:e.trys.push([2,9,10,11]),o=h(r),i=o.next(),e.label=3;case 3:if(i.done)return[3,8];s=i.value,e.label=4;case 4:return e.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:s})];case 5:return[2,e.sent()];case 6:return a=e.sent(),n=a,[3,7];case 7:return i=o.next(),[3,3];case 8:return[3,11];case 9:return a=e.sent(),u={error:a},[3,11];case 10:try{i&&!i.done&&(c=o.return)&&c.call(o)}finally{if(u)throw u.error}return[7];case 11:throw n}})})},A.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},A.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},A.prototype._acquireConnectionToServer=function(e,t,r){return this._connectionPool.acquire(e)},A.prototype._freshRoutingTable=function(e){var e=void 0===e?{}:e,t=e.accessMode,r=e.database,n=e.bookmarks,o=e.impersonatedUser,e=e.onDatabaseNameResolved,i=this._routingTableRegistry.get(r,function(){return new b.RoutingTable({database:r})});return i.isStaleFor(t)?(this._log.info('Routing table is stale for database: "'.concat(r,'" and access mode: "').concat(t,'": ').concat(i)),this._refreshRoutingTable(i,n,o,e)):i},A.prototype._refreshRoutingTable=function(e,t,r,n){var o=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(o,e,t,r,n):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(o,e,t,r,n)},A.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(s,a,u,c,l){return p(this,void 0,void 0,function(){var t,r,n,o,i;return d(this,function(e){switch(e.label){case 0:return t=[],[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,a,u,c)];case 1:return(t=_.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],r)?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(s,a,u,c)];case 3:i=_.apply(void 0,[e.sent(),2]),o=i[0],i=i[1],r=o,n=i||n,e.label=4;case 4:return[4,this._applyRoutingTableIfPossible(a,r,l,n)];case 5:return[2,e.sent()]}})})},A.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(o,i,s,a,u){return p(this,void 0,void 0,function(){var t,r,n;return d(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(o,i,s,a)];case 1:return r=_.apply(void 0,[e.sent(),2]),t=r[0],r=r[1],t?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,i,s,a)];case 2:n=_.apply(void 0,[e.sent(),2]),t=n[0],r=n[1],e.label=3;case 3:return[4,this._applyRoutingTableIfPossible(i,t,u,r)];case 4:return[2,e.sent()]}})})},A.prototype._fetchRoutingTableUsingKnownRouters=function(n,o,i,s){return p(this,void 0,void 0,function(){var t,r;return d(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTable(n,o,i,s)];case 1:return(t=_.apply(void 0,[e.sent(),2]),r=t[0],t=t[1],r)?[2,[r,null]]:(r=n.length-1,A._forgetRouter(o,n,r),[2,[null,t]])}})})},A.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i,s){return p(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return t=e.sent(),t=t.filter(function(e){return r.indexOf(e)<0}),[4,this._fetchRoutingTable(t,o,i,s)];case 2:return[2,e.sent()]}})})},A.prototype._resolveSeedRouter=function(n){return p(this,void 0,void 0,function(){var t,r=this;return d(this,function(e){switch(e.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return t=e.sent(),[4,Promise.all(t.map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=e.sent(),[2,[].concat.apply([],t)]}})})},A.prototype._fetchRoutingTable=function(u,c,l,f){return p(this,void 0,void 0,function(){var t=this;return d(this,function(e){return[2,u.reduce(function(i,s,a){return p(t,void 0,void 0,function(){var t,r,n,o;return d(this,function(e){switch(e.label){case 0:return[4,i];case 1:return(t=_.apply(void 0,[e.sent(),1]),t=t[0])?[2,[t,null]]:(A._forgetRouter(c,u,a-1),[4,this._createSessionForRediscovery(s,l,f)]);case 2:if(t=_.apply(void 0,[e.sent(),2]),r=t[0],n=t[1],!r)return[3,8];e.label=3;case 3:return e.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(r,c.database,s,f)];case 4:return[2,[e.sent(),null]];case 5:return o=e.sent(),[2,this._handleRediscoveryError(o,s)];case 6:return r.close(),[7];case 7:return[3,9];case 8:return[2,[null,n]];case 9:return[2]}})})},Promise.resolve([null,null]))]})})},A.prototype._createSessionForRediscovery=function(o,i,s){return p(this,void 0,void 0,function(){var t,r,n=this;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._connectionPool.acquire(o)];case 1:return r=e.sent(),t=g.ConnectionErrorHandler.create({errorCode:O,handleAuthorizationExpired:function(e,t){return n._handleAuthorizationExpired(e,t)}}),t=new u.default(new g.DelegateConnection(r,t)),r.protocol().version<4?[2,[new y.Session({mode:T,bookmarks:c.empty(),connectionProvider:t}),null]]:[2,[new y.Session({mode:E,database:"system",bookmarks:i,connectionProvider:t,impersonatedUser:s}),null]];case 2:return r=e.sent(),[2,this._handleRediscoveryError(r,o)];case 3:return[2]}})})},A.prototype._handleRediscoveryError=function(e,t){if([I,k,R].includes(e.code)||(r=e).code.startsWith("Neo.ClientError.Security.")&&![j].includes(r.code))throw e;if("Neo.ClientError.Procedure.ProcedureNotFound"===e.code)throw(0,y.newError)("Server at ".concat(t.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),w,e);var r;return this._log.warn("unable to fetch routing table because of an error ".concat(e)),[null,e]},A.prototype._applyRoutingTableIfPossible=function(t,r,n,o){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:if(r)return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r,n)];throw(0,y.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),w,o);case 1:return e.sent(),[2,r]}})})},A.prototype._updateRoutingTable=function(t,r){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),r(t.database),this._log.info("Updated routing table ".concat(t)),[2]}})})},A._forgetRouter=function(e,t,r){t=t[r];e&&t&&e.forgetRouter(t)},A);function A(e){var t=e.id,r=e.address,n=e.routingContext,o=e.hostNameResolver,i=e.config,s=e.log,a=e.userAgent,u=e.authToken,e=e.routingTablePurgeDelay,c=l.call(this,{id:t,config:i,log:s,userAgent:a,authToken:u},function(e){return(0,g.createChannelConnection)(e,c._config,c._createConnectionErrorHandler(),c._log,c._routingContext)})||this;return c._routingContext=f(f({},n),{address:r.toString()}),c._seedRouter=r,c._rediscovery=new b.default(c._routingContext),c._loadBalancingStrategy=new v.LeastConnectedLoadBalancingStrategy(c._connectionPool),c._hostNameResolver=o,c._dnsResolver=new m.HostNameResolver,c._log=s,c._useSeedRouter=!0,c._routingTableRegistry=new D(e?(0,y.int)(e):N),c}t.default=e;U.prototype.register=function(e){return this._tables.set(e.database,e),this},U.prototype.apply=function(e,t){var t=void 0===t?{}:t,r=t.applyWhenExists,t=t.applyWhenDontExists,t=void 0===t?function(){}:t;return this._tables.has(e)?r(this._tables.get(e)):"string"==typeof e||null===e?t():this._forEach(r),this},U.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},U.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},U.prototype._forEach=function(e){var t,r;try{for(var n=h(this._tables),o=n.next();!o.done;o=n.next())e(_(o.value,2)[1])}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},U.prototype._remove=function(e){return this._tables.delete(e),this},U.prototype._removeIf=function(e){var t,r;try{for(var n=h(this._tables),o=n.next();!o.done;o=n.next()){var i=_(o.value,2),s=i[0];e(i[1])&&this._remove(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this};var D=U;function U(e){this._tables=new Map,this._routingTablePurgeDelay=e}},{"../channel":39,"../connection":50,"../load-balancing":54,"../rediscovery":65,"./connection-provider-pooled":42,"./connection-provider-single":44,"neo4j-driver-core":75}],44:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),e=(Object.defineProperty(r,"__esModule",{value:!0}),e("neo4j-driver-core")),e=(o=e.ConnectionProvider,i(s,o),s.prototype.acquireConnection=function(e){e=void 0===e?{}:e,e.accessMode,e.database,e.bookmarks,e=this._connection;return this._connection=null,Promise.resolve(e)},s);function s(e){var t=o.call(this)||this;return t._connection=e,t}r.default=e},{"neo4j-driver-core":75}],45:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingConnectionProvider=r.DirectConnectionProvider=r.PooledConnectionProvider=r.SingleConnectionProvider=void 0,e("./connection-provider-single")),i=(Object.defineProperty(r,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(o).default}}),e("./connection-provider-pooled")),s=(Object.defineProperty(r,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(i).default}}),e("./connection-provider-direct")),a=(Object.defineProperty(r,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(s).default}}),e("./connection-provider-routing"));Object.defineProperty(r,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(a).default}})},{"./connection-provider-direct":41,"./connection-provider-pooled":42,"./connection-provider-routing":43,"./connection-provider-single":44}],46:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},f=(Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=void 0,e("../channel")),u=e("neo4j-driver-core"),c=a(e("./connection")),h=a(e("../bolt")),l=u.error.PROTOCOL_ERROR,p=u.internal.logger.Logger,d=0;r.createChannelConnection=function(i,s,a,u,c,e){void 0===c&&(c=null);var l=(e=void 0===e?function(e){return new f.Channel(e)}:e)(new f.ChannelConfig(i,s,a.errorCode()));return h.default.handshake(l).then(function(e){var r=e.protocolVersion,e=e.consumeRemainingBuffer,n=new f.Chunker(l),o=new f.Dechunker,t=new y(l,a,i,u,s.disableLosslessIntegers,c,n,function(t){return h.default.create({version:r,channel:l,chunker:n,dechunker:o,disableLosslessIntegers:s.disableLosslessIntegers,useBigInt:s.useBigInt,serversideRouting:c,server:t.server,log:t.logger,observer:{onPendingObserversChange:t._handleOngoingRequestsNumberChange.bind(t),onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})});return e(function(e){return o.write(e)}),t}).catch(function(e){return l.close().then(function(){throw e})})};_=c.default,o(b,_),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),b.prototype.connect=function(e,t){return this._initialize(e,t)},b.prototype._initialize=function(e,n){var o=this,i=this;return new Promise(function(r,t){o._protocol.initialize({userAgent:e,authToken:n,onError:function(e){return t(e)},onComplete:function(e){var t;e&&(t=e.server,o.version&&!t||(o.version=t),t=e.connection_id,o.databaseId||(o.databaseId=t),e.hints&&null!=(t=e.hints["connection.recv_timeout_seconds"])&&(e=(0,u.toNumber)(t),Number.isInteger(e)&&0<e?o._ch.setupReceiveTimeout(1e3*e):o._log.info("Server located at ".concat(o._address," supplied an invalid connection receive timeout value (").concat(e,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue."))),r(i)}})})},b.prototype.protocol=function(){return this._protocol},Object.defineProperty(b.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),b.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(u.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},b.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},b.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},b.prototype.resetAndFlush=function(){var r=this;return new Promise(function(e,t){r._reset({onError:function(e){r._isBroken?t(e):(e=r._handleProtocolError("Received FAILURE as a response for RESET: "+e),t(e))},onComplete:function(){e()}})})},b.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},b.prototype._reset=function(t){var e,r=this;this._reseting?this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(e){t.onError(e)},onComplete:function(){t.onComplete()}}):(this._resetObservers.push(t),this._reseting=!0,e=function(e){r._reseting=!1;var t=r._resetObservers;r._resetObservers=[],t.forEach(e)},this._protocol.reset({onError:function(t){e(function(e){return e.onError(t)})},onComplete:function(){e(function(e){return e.onComplete()})}}))},b.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},b.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},b.prototype._handleOngoingRequestsNumberChange=function(e){0===e?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},b.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},b.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},b.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();e=(0,u.newError)(e,l);return this._handleFatalError(e),e};var _,y=b;function b(e,t,r,n,o,i,s,a){void 0===o&&(o=!1),void 0===i&&(i=null);var u,c,t=_.call(this,t)||this;return t._reseting=!1,t._resetObservers=[],t._id=d++,t._address=r,t._server={address:r.asHostPort()},t.creationTimestamp=Date.now(),t._disableLosslessIntegers=o,t._ch=e,t._chunker=s,t._log=(u=t,new p((c=n)._level,function(e,t){return c._loggerFunction(e,"".concat(u," ").concat(t))})),t._serversideRouting=i,t._dbConnectionId=null,t._protocol=a(t),t._isBroken=!1,t._log.isDebugEnabled()&&t._log.debug("created towards ".concat(r)),t}r.default=y},{"../bolt":23,"../channel":39,"./connection":49,"neo4j-driver-core":75}],47:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./connection"))),e=(o=s.default,i(a,o),Object.defineProperty(a.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),a.prototype.isOpen=function(){return this._delegate.isOpen()},a.prototype.protocol=function(){return this._delegate.protocol()},a.prototype.connect=function(e,t){return this._delegate.connect(e,t)},a.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},a.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},a.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},a.prototype.close=function(){return this._delegate.close()},a.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},a);function a(e,t){var r=o.call(this,t)||this;return t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}r.default=e},{"./connection":49}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("neo4j-driver-core"),n=e.error.SERVICE_UNAVAILABLE,o=e.error.SESSION_EXPIRED;function i(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||s,this._handleWriteFailure=r||s,this._handleAuthorizationExpired=n||s}function s(e){return e}i.create=function(e){return new i(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleAuthorizationExpired)},i.prototype.errorCode=function(){return this._errorCode},i.prototype.handleAndTransformError=function(e,t){return!(r=e)||"Neo.ClientError.Security.AuthorizationExpired"!==r.code&&"Neo.ClientError.Security.TokenExpired"!==r.code?function(e){if(e)return e.code===o||e.code===n||"Neo.TransientError.General.DatabaseUnavailable"===e.code;return}(e)?this._handleUnavailability(e,t):function(e){if(e)return"Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code;return}(e)?this._handleWriteFailure(e,t):e:this._handleAuthorizationExpired(e,t);var r},r.default=i},{"neo4j-driver-core":75}],49:[function(e,t,r){"use strict";function n(e){this._errorHandler=e}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(n.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),n.prototype.isOpen=function(){throw new Error("not implemented")},n.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(n.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),n.prototype.connect=function(e,t){throw new Error("not implemented")},n.prototype.write=function(e,t,r){throw new Error("not implemented")},n.prototype.resetAndFlush=function(){throw new Error("not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw new Error("not implemented")},n.prototype.close=function(){throw new Error("not implemented")},n.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t):e},r.default=n},{}],50:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=r.ConnectionErrorHandler=r.DelegateConnection=r.ChannelConnection=r.Connection=void 0,s(e("./connection"))),u=(r.Connection=a.default,i(e("./connection-channel"))),i=(r.ChannelConnection=u.default,Object.defineProperty(r,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}}),s(e("./connection-delegate"))),i=(r.DelegateConnection=i.default,s(e("./connection-error-handler")));r.ConnectionErrorHandler=i.default,r.default=a.default},{"./connection":49,"./connection-channel":46,"./connection-delegate":47,"./connection-error-handler":48}],51:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.pool=r.packstream=r.channel=r.buf=r.bolt=r.loadBalancing=void 0,r.loadBalancing=i(e("./load-balancing")),r.bolt=i(e("./bolt")),r.buf=i(e("./buf")),r.channel=i(e("./channel")),r.packstream=i(e("./packstream")),r.pool=i(e("./pool")),s(e("./connection-provider"),r)},{"./bolt":23,"./buf":31,"./channel":39,"./connection-provider":45,"./load-balancing":54,"./packstream":58,"./pool":62}],52:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.identity=void 0,r.identity=function(e){return e}},{}],53:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.functional=void 0,r.functional=i(e("./functional"))},{"./functional":52}],54:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.LeastConnectedLoadBalancingStrategy=r.LoadBalancingStrategy=void 0,n(e("./load-balancing-strategy"))),o=(r.LoadBalancingStrategy=o.default,n(e("./least-connected-load-balancing-strategy")));r.LeastConnectedLoadBalancingStrategy=o.default,r.default=o.default},{"./least-connected-load-balancing-strategy":55,"./load-balancing-strategy":56}],55:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./round-robin-array-index"))),s=s(e("./load-balancing-strategy")),e=(o=s.default,i(u,o),u.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},u.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},u.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),o=n,i=null,s=Number.MAX_SAFE_INTEGER;do{var a=e[o],u=this._connectionPool.activeResourceCount(a)}while(u<s&&(i=a,s=u),o===r-1?o=0:o++,o!==n);return i},u);function u(e){var t=o.call(this)||this;return t._readersIndex=new a.default,t._writersIndex=new a.default,t._connectionPool=e,t}r.default=e},{"./load-balancing-strategy":56,"./round-robin-array-index":57}],56:[function(e,t,r){"use strict";function n(){}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype.selectReader=function(e){throw new Error("Abstract function")},n.prototype.selectWriter=function(e){throw new Error("Abstract function")},r.default=n},{}],57:[function(e,t,r){"use strict";function n(e){this._offset=e||0}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype.next=function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},r.default=n},{}],58:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.structure=r.v2=r.v1=void 0,i(e("./packstream-v1"))),s=(r.v1=s,i(e("./packstream-v2"))),i=(r.v2=s,i(e("./structure")));r.structure=i,r.default=s},{"./packstream-v1":59,"./packstream-v2":60,"./structure":61}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0;var o=e("../channel"),a=e("../lang"),u=e("./structure"),c=e("neo4j-driver-core"),n=c.error.PROTOCOL_ERROR;function i(e){this._ch=e,this._byteArraysSupported=!0}function s(e,t){void 0===t&&(t=!1),this._disableLosslessIntegers=e=void 0===e?!1:e,this._useBigInt=t}i.prototype.packable=function(o,i){var e,s=this;void 0===i&&(i=a.functional.identity);try{o=i(o)}catch(e){return function(){throw e}}if(null===o)return function(){return s._ch.writeUInt8(192)};if(!0===o)return function(){return s._ch.writeUInt8(195)};if(!1===o)return function(){return s._ch.writeUInt8(194)};if("number"==typeof o)return function(){return s.packFloat(o)};if("string"==typeof o)return function(){return s.packString(o)};if("bigint"==typeof o)return function(){return s.packInteger((0,c.int)(o))};if((0,c.isInt)(o))return function(){return s.packInteger(o)};if(o instanceof Int8Array)return function(){return s.packBytes(o)};if(o instanceof Array)return function(){s.packListHeader(o.length);for(var e=0;e<o.length;e++)s.packable(void 0===o[e]?null:o[e],i)()};if(null!=(e=o)&&"function"==typeof e[Symbol.iterator])return this.packableIterable(o,i);if(o instanceof u.Structure){for(var t=[],r=0;r<o.fields.length;r++)t[r]=this.packable(o.fields[r],i);return function(){return s.packStruct(o.signature,t)}}return"object"==typeof o?function(){for(var e=Object.keys(o),t=0,r=0;r<e.length;r++)void 0!==o[e[r]]&&t++;s.packMapHeader(t);for(r=0;r<e.length;r++){var n=e[r];void 0!==o[n]&&(s.packString(n),s.packable(o[n],i)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(o))},i.prototype.packableIterable=function(t,e){try{var r=Array.from(t);return this.packable(r,e)}catch(e){throw(0,c.newError)("Cannot pack given iterable, ".concat(e.message,": ").concat(t))}},i.prototype.packStruct=function(e,t){this.packStructHeader((t=t||[]).length,e);for(var r=0;r<t.length;r++)t[r]()},i.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))},i.prototype.packFloat=function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)},i.prototype.packString=function(e){var e=o.utf8.encode(e),t=e.length;if(t<16)this._ch.writeUInt8(128|t),this._ch.writeBytes(e);else if(t<256)this._ch.writeUInt8(208),this._ch.writeUInt8(t),this._ch.writeBytes(e);else if(t<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(t/256>>0),this._ch.writeUInt8(t%256),this._ch.writeBytes(e);else{if(!(t<4294967296))throw(0,c.newError)("UTF-8 strings of size "+t+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((t/16777216>>0)%256),this._ch.writeUInt8((t/65536>>0)%256),this._ch.writeUInt8((t/256>>0)%256),this._ch.writeUInt8(t%256),this._ch.writeBytes(e)}},i.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,c.newError)("Lists of size "+e+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},i.prototype.packBytes=function(e){if(!this._byteArraysSupported)throw(0,c.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])},i.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,c.newError)("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},i.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,c.newError)("Maps of size "+e+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},i.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw(0,c.newError)("Structures of size "+e+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}},i.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},i.prototype._nonPackableValue=function(e){return function(){throw(0,c.newError)(e,n)}},r.Packer=i,s.prototype.unpack=function(e,t){void 0===t&&(t=a.functional.identity);var r=e.readUInt8(),n=240&r,o=15&r;if(192===r)return null;var i=this._unpackBoolean(r);if(null!==i)return i;i=this._unpackNumberOrInteger(r,e);if(null!==i){if((0,c.isInt)(i)){if(this._useBigInt)return i.toBigInt();if(this._disableLosslessIntegers)return i.toNumberOrInfinity()}return i}i=this._unpackString(r,n,o,e);if(null!==i)return i;i=this._unpackList(r,n,o,e,t);if(null!==i)return i;i=this._unpackByteArray(r,e);if(null!==i)return i;i=this._unpackMap(r,n,o,e,t);if(null!==i)return i;i=this._unpackStruct(r,n,o,e,t);if(null!==i)return i;throw(0,c.newError)("Unknown packed value with marker "+r.toString(16))},s.prototype.unpackInteger=function(e){var t=e.readUInt8(),e=this._unpackInteger(t,e);if(null==e)throw(0,c.newError)("Unable to unpack integer value with marker "+t.toString(16));return e},s.prototype._unpackBoolean=function(e){return 195===e||194!==e&&null},s.prototype._unpackNumberOrInteger=function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)},s.prototype._unpackInteger=function(e,t){var r;return 0<=e&&e<128?(0,c.int)(e):240<=e&&e<256?(0,c.int)(e-256):200===e?(0,c.int)(t.readInt8()):201===e?(0,c.int)(t.readInt16()):202===e?(r=t.readInt32(),(0,c.int)(r)):203===e?(r=t.readInt32(),e=t.readInt32(),new c.Integer(e,r)):null},s.prototype._unpackString=function(e,t,r,n){return 128===t?o.utf8.decode(n,r):208===e?o.utf8.decode(n,n.readUInt8()):209===e?o.utf8.decode(n,n.readUInt16()):210===e?o.utf8.decode(n,n.readUInt32()):null},s.prototype._unpackList=function(e,t,r,n,o){return 144===t?this._unpackListWithSize(r,n,o):212===e?this._unpackListWithSize(n.readUInt8(),n,o):213===e?this._unpackListWithSize(n.readUInt16(),n,o):214===e?this._unpackListWithSize(n.readUInt32(),n,o):null},s.prototype._unpackListWithSize=function(e,t,r){for(var n=[],o=0;o<e;o++)n.push(this.unpack(t,r));return n},s.prototype._unpackByteArray=function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null},s.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},s.prototype._unpackMap=function(e,t,r,n,o){return 160===t?this._unpackMapWithSize(r,n,o):216===e?this._unpackMapWithSize(n.readUInt8(),n,o):217===e?this._unpackMapWithSize(n.readUInt16(),n,o):218===e?this._unpackMapWithSize(n.readUInt32(),n,o):null},s.prototype._unpackMapWithSize=function(e,t,r){for(var n={},o=0;o<e;o++)n[this.unpack(t,r)]=this.unpack(t,r);return n},s.prototype._unpackStruct=function(e,t,r,n,o){return 176===t?this._unpackStructWithSize(r,n,o):220===e?this._unpackStructWithSize(n.readUInt8(),n,o):221===e?this._unpackStructWithSize(n.readUInt16(),n,o):null},s.prototype._unpackStructWithSize=function(e,t,r){for(var n=t.readUInt8(),o=new u.Structure(n,[]),i=0;i<e;i++)o.fields.push(this.unpack(t,r));return r(o)},r.Unpacker=s},{"../channel":39,"../lang":53,"./structure":61,"neo4j-driver-core":75}],60:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&s(t,e,r);return a(t,e),t},u=(Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0,u(e("./packstream-v1"))),e=(o=u.Packer,i(c,o),c.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},c);function c(){return null!==o&&o.apply(this,arguments)||this}r.Packer=e;l=u.Unpacker,i(f,l);var l,e=f;function f(e,t){return l.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t)||this}r.Unpacker=e},{"./packstream-v1":59}],61:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.verifyStructSize=r.Structure=void 0;var n=e("neo4j-driver-core"),o=n.error.PROTOCOL_ERROR,e=(Object.defineProperty(i.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),i.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},i);function i(e,t){this.signature=e,this.fields=t}r.Structure=e,r.verifyStructSize=function(e,t,r){if(t!==r)throw(0,n.newError)("Wrong struct size for ".concat(e,", expected ").concat(t," but was ").concat(r),o)},r.default=e},{"neo4j-driver-core":75}],62:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MAX_SIZE=r.DEFAULT_ACQUISITION_TIMEOUT=r.PoolConfig=r.Pool=void 0,i(e("./pool-config"))),i=(r.PoolConfig=a.default,Object.defineProperty(r,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return a.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(r,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return a.DEFAULT_MAX_SIZE}}),s(e("./pool")));r.Pool=i.default,r.default=i.default},{"./pool":64,"./pool-config":63}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACQUISITION_TIMEOUT=r.DEFAULT_MAX_SIZE=void 0;r.DEFAULT_MAX_SIZE=100;r.DEFAULT_ACQUISITION_TIMEOUT=6e4,o.defaultConfig=function(){return new o(100,6e4)},o.fromDriverConfig=function(e){return new o(s(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,s(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)};var n=o;function o(e,t){this.maxSize=i(e,100),this.acquisitionTimeout=i(t,6e4)}function i(e,t){return 0===e||e?e:t}function s(e){return 0===e||e}r.default=n},{}],64:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),o(e("./pool-config"))),u=e("neo4j-driver-core"),l=u.internal.logger.Logger,o=(i.prototype.acquire=function(o){var i=this,s=o.asKey(),a=this._acquireRequests;return a[s]||(a[s]=[]),new Promise(function(e,t){var r=null,n=setTimeout(function(){var e,t=a[s];t&&(a[s]=t.filter(function(e){return e!==r})),r.isCompleted()||(t=i.activeResourceCount(o),e=i.has(o)?i._pools[s].length:0,r.reject((0,u.newError)("Connection acquisition timed out in ".concat(i._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(t,", Idle conn count = ").concat(e,"."))))},i._acquisitionTimeout),r=new h(s,e,t,n,i._log);a[s].push(r),i._processPendingAcquireRequests(o)})},i.prototype.purge=function(e){return this._purgeKey(e.asKey())},i.prototype.close=function(){return n(this,void 0,void 0,function(){var t=this;return c(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(e){return t._purgeKey(e)}))];case 1:return[2,e.sent()]}})})},i.prototype.keepAll=function(e){var t=this,r=e.map(function(e){return e.asKey()}),e=Object.keys(this._pools).filter(function(e){return-1===r.indexOf(e)});return Promise.all(e.map(function(e){return t._purgeKey(e)}))},i.prototype.has=function(e){return e.asKey()in this._pools},i.prototype.activeResourceCount=function(e){return this._activeResourceCounts[e.asKey()]||0},i.prototype._getOrInitializePoolFor=function(e){var t=this._pools[e];return t||(t=new p,this._pools[e]=t,this._pendingCreates[e]=0),t},i.prototype._acquire=function(s){return n(this,void 0,void 0,function(){var t,r,n,o,i=this;return c(this,function(e){switch(e.label){case 0:if(this._closed)throw(0,u.newError)("Pool is closed, it is no more able to serve requests.");t=s.asKey(),r=this._getOrInitializePoolFor(t),e.label=1;case 1:return r.length?(n=r.pop(),this._validate(n)?(this._removeIdleObserver&&this._removeIdleObserver(n),f(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(n," acquired from the pool ").concat(t)),[2,{resource:n,pool:r}]):[3,2]):[3,5];case 2:return[4,this._destroy(n)];case 3:e.sent(),e.label=4;case 4:return[3,1];case 5:if(0<this._maxSize&&this.activeResourceCount(s)+this._pendingCreates[t]>=this._maxSize)return[2,{resource:null,pool:r}];this._pendingCreates[t]=this._pendingCreates[t]+1,e.label=6;case 6:return e.trys.push([6,,8,9]),[4,this._create(s,function(e,t){return i._release(e,t,r)})];case 7:return o=e.sent(),f(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(o," created for the pool ").concat(t)),[3,9];case 8:return this._pendingCreates[t]=this._pendingCreates[t]-1,[7];case 9:return[2,{resource:o,pool:r}]}})})},i.prototype._release=function(s,a,u){return n(this,void 0,void 0,function(){var o,i=this;return c(this,function(e){switch(e.label){case 0:return(o=s.asKey(),u.isActive())?this._validate(a)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug("".concat(a," destroyed and can't be released to the pool ").concat(o," because it is not functional")),[4,this._destroy(a)]):[3,4];case 1:return e.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(a,{onError:function(e){i._log.debug("Idle connection ".concat(a," destroyed because of error: ").concat(e));e=i._pools[o];e&&(i._pools[o]=e.filter(function(e){return e!==a})),i._destroy(a).catch(function(){})}}),u.push(a),this._log.isDebugEnabled()&&this._log.debug("".concat(a," released to the pool ").concat(o)),e.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug("".concat(a," destroyed and can't be released to the pool ").concat(o," because pool has been purged")),[4,this._destroy(a)];case 5:e.sent(),e.label=6;case 6:return t=o,r=this._activeResourceCounts,0<(n=(r[t]||0)-1)?r[t]=n:delete r[t],this._processPendingAcquireRequests(s),[2]}var t,r,n})})},i.prototype._purgeKey=function(o){return n(this,void 0,void 0,function(){var t,r,n;return c(this,function(e){switch(e.label){case 0:if(t=this._pools[o],r=[],!t)return[3,2];for(;t.length;)n=t.pop(),this._removeIdleObserver&&this._removeIdleObserver(n),r.push(this._destroy(n));return t.close(),delete this._pools[o],[4,Promise.all(r)];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype._processPendingAcquireRequests=function(r){var n,o=this,i=r.asKey(),e=this._acquireRequests[i];e&&((n=e.shift())?this._acquire(r).catch(function(e){return n.reject(e),{resource:null}}).then(function(e){var t=e.resource,e=e.pool;t?n.isCompleted()?o._release(r,t,e):n.resolve(t):n.isCompleted()||(o._acquireRequests[i]||(o._acquireRequests[i]=[]),o._acquireRequests[i].unshift(n))}):delete this._acquireRequests[i])},i);function i(e){var e=void 0===e?{}:e,t=e.create,t=void 0===t?function(e,t){return Promise.resolve()}:t,r=e.destroy,r=void 0===r?function(e){return Promise.resolve()}:r,n=e.validate,n=void 0===n?function(e){return!0}:n,o=e.installIdleObserver,o=void 0===o?function(e,t){}:o,i=e.removeIdleObserver,i=void 0===i?function(e){}:i,s=e.config,s=void 0===s?a.default.defaultConfig():s,e=e.log,e=void 0===e?l.noOp():e;this._create=t,this._destroy=r,this._validate=n,this._installIdleObserver=o,this._removeIdleObserver=i,this._maxSize=s.maxSize,this._acquisitionTimeout=s.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=e,this._closed=!1}function f(e,t){var r=t[e]||0;t[e]=r+1}s.prototype.isCompleted=function(){return this._completed},s.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(e," acquired from the pool ").concat(this._key)),this._resolve(e))},s.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))};var h=s;function s(e,t,r,n,o){this._key=e,this._resolve=t,this._reject=r,this._timeoutId=n,this._log=o,this._completed=!1}d.prototype.isActive=function(){return this._active},d.prototype.close=function(){this._active=!1},d.prototype.filter=function(e){return this._elements=this._elements.filter(e),this},Object.defineProperty(d.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),d.prototype.pop=function(){return this._elements.pop()},d.prototype.push=function(e){return this._elements.push(e)};var p=d;function d(){this._active=!0,this._elements=[]}r.default=o},{"./pool-config":63,"neo4j-driver-core":75}],65:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingTable=r.Rediscovery=void 0,n(e("./rediscovery"))),n=(r.Rediscovery=o.default,n(e("./routing-table")));r.RoutingTable=n.default,r.default=o.default},{"./rediscovery":66,"./routing-table":67}],66:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),n(e("./routing-table")));function o(e){this._routingContext=e}o.prototype.lookupRoutingTableOnRouter=function(t,r,n,o){var i=this;return t._acquireConnection(function(e){return i._requestRawRoutingTable(e,t,r,n,o).then(function(e){return e.isNull?null:s.default.fromRawRoutingTable(r,n,e)})})},o.prototype._requestRawRoutingTable=function(r,n,o,e,i){var s=this;return new Promise(function(e,t){r.protocol().requestRoutingInformation({routingContext:s._routingContext,databaseName:o,impersonatedUser:i,sessionContext:{bookmarks:n._lastBookmarks,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:e,onError:t})})},r.default=o},{"./routing-table":67}],67:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=(Object.defineProperty(r,"__esModule",{value:!0}),r.createValidRoutingTable=void 0,e("neo4j-driver-core")),e=u.internal.constants,i=e.ACCESS_MODE_WRITE,s=e.ACCESS_MODE_READ,c=u.internal.serverAddress.ServerAddress,l=u.error.PROTOCOL_ERROR,f=(a.fromRawRoutingTable=p,a.prototype.forget=function(e){this.readers=h(this.readers,e),this.writers=h(this.writers,e)},a.prototype.forgetRouter=function(e){this.routers=h(this.routers,e)},a.prototype.forgetWriter=function(e){this.writers=h(this.writers,e)},a.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===s&&0===this.readers.length||e===i&&0===this.writers.length},a.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},a.prototype.allServers=function(){return o(o(o([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},a.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},a);function a(e){var e=void 0===e?{}:e,t=e.database,r=e.routers,n=e.readers,o=e.writers,i=e.expirationTime,e=e.ttl;this.database=t||null,this.databaseName=t||"default database",this.routers=r||[],this.readers=n||[],this.writers=o||[],this.expirationTime=i||(0,u.int)(0),this.ttl=e}function h(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function p(e,t,r){var n=r.ttl,o=function(t,r){try{var e=(0,u.int)(Date.now()),n=(0,u.int)(t.ttl).multiply(1e3).add(e);return n.lessThan(e)?u.Integer.MAX_VALUE:n}catch(e){throw(0,u.newError)("Unable to parse TTL entry from router ".concat(r," from raw routing table:\n").concat(u.json.stringify(t),"\nError message: ").concat(e.message),l)}}(r,t),i=function(t,r){try{var n=[],o=[],i=[];return t.servers.forEach(function(e){var t=e.role,e=e.addresses;"ROUTE"===t?n=_(e).map(function(e){return c.fromUrl(e)}):"WRITE"===t?i=_(e).map(function(e){return c.fromUrl(e)}):"READ"===t&&(o=_(e).map(function(e){return c.fromUrl(e)}))}),{routers:n,readers:o,writers:i}}catch(e){throw(0,u.newError)("Unable to parse servers entry from router ".concat(r," from addresses:\n").concat(u.json.stringify(t.servers),"\nError message: ").concat(e.message),l)}}(r,t),s=i.routers,a=i.readers,i=i.writers;return d(s,"routers",t),d(a,"readers",t),new f({database:e||r.db,routers:s,readers:a,writers:i,expirationTime:o,ttl:n})}function d(e,t,r){if(0===e.length)throw(0,u.newError)("Received no "+t+" from router "+r,l)}function _(e){if(Array.isArray(e))return Array.from(e);throw new TypeError("Array expected but got: "+e)}r.default=f,r.createValidRoutingTable=p},{"neo4j-driver-core":75}],68:[function(e,t,r){"use strict";function i(e){return null!=e&&""!==e&&(Object.getPrototypeOf(e)!==Object.prototype||0!==Object.keys(e).length)}Object.defineProperty(r,"__esModule",{value:!0}),r.default={basic:function(e,t,r){return null!=r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},custom:function(e,t,r,n,o){n={scheme:n,principal:e};return i(t)&&(n.credentials=t),i(r)&&(n.realm=r),i(o)&&(n.parameters=o),n}}},{}],69:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},v=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},g=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},w=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},d=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.bookmarkManager=void 0,i.prototype.updateBookmarks=function(e,t,r){return n(this,void 0,void 0,function(){return v(this,function(e){throw new Error("Not implemented")})})},i.prototype.getBookmarks=function(e){return n(this,void 0,void 0,function(){return v(this,function(e){throw new Error("Not implemented")})})},i.prototype.getAllBookmarks=function(){return n(this,void 0,void 0,function(){return v(this,function(e){throw new Error("Not implemented")})})},i.prototype.forget=function(e){return n(this,void 0,void 0,function(){return v(this,function(e){throw new Error("Not implemented")})})},i);function i(){throw new Error("Not implemented")}r.default=o,r.bookmarkManager=function(e){void 0===e&&(e={});var t,r=new Map;return null!=(t=e.initialBookmarks)&&t.forEach(function(e,t){return r.set(t,new Set(e))}),new s(r,e.bookmarksSupplier,e.bookmarksConsumer)};a.prototype.updateBookmarks=function(f,h,p){return n(this,void 0,void 0,function(){var t,r,n,o,i,s,a,u,c,l;return v(this,function(e){switch(e.label){case 0:t=this._getOrInitializeBookmarks(f);try{for(r=g(h),n=r.next();!n.done;n=r.next())s=n.value,t.delete(s)}catch(e){a={error:e}}finally{try{n&&!n.done&&(u=r.return)&&u.call(r)}finally{if(a)throw a.error}}try{for(o=g(p),i=o.next();!i.done;i=o.next())s=i.value,t.add(s)}catch(e){c={error:e}}finally{try{i&&!i.done&&(l=o.return)&&l.call(o)}finally{if(c)throw c.error}}return"function"!=typeof this._bookmarksConsumer?[3,2]:[4,this._bookmarksConsumer(f,d([],w(t),!1))];case 1:e.sent(),e.label=2;case 2:return[2]}})})},a.prototype._getOrInitializeBookmarks=function(e){var t=this._bookmarksPerDb.get(e);return void 0===t&&(t=new Set,this._bookmarksPerDb.set(e,t)),t},a.prototype.getBookmarks=function(u){var c;return n(this,void 0,void 0,function(){var t,r,n,o,i,s,a;return v(this,function(e){switch(e.label){case 0:return t=new Set(this._bookmarksPerDb.get(u)),"function"!=typeof this._bookmarksSupplier?[3,2]:[4,this._bookmarksSupplier(u)];case 1:r=null!=(c=e.sent())?c:[];try{for(n=g(r),o=n.next();!o.done;o=n.next())i=o.value,t.add(i)}catch(e){s={error:e}}finally{try{o&&!o.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}e.label=2;case 2:return[2,d([],w(t),!1)]}})})},a.prototype.getAllBookmarks=function(){var m;return n(this,void 0,void 0,function(){var t,r,n,o,i,s,a,u,c,l,f,h,p,d,_,y,b;return v(this,function(e){switch(e.label){case 0:t=new Set;try{for(r=g(this._bookmarksPerDb),n=r.next();!n.done;n=r.next()){o=w(n.value,2),i=o[1];try{for(d=void 0,s=g(i),a=s.next();!a.done;a=s.next())f=a.value,t.add(f)}catch(e){d={error:e}}finally{try{a&&!a.done&&(_=s.return)&&_.call(s)}finally{if(d)throw d.error}}}}catch(e){h={error:e}}finally{try{n&&!n.done&&(p=r.return)&&p.call(r)}finally{if(h)throw h.error}}return"function"!=typeof this._bookmarksSupplier?[3,2]:[4,this._bookmarksSupplier()];case 1:u=null!=(m=e.sent())?m:[];try{for(c=g(u),l=c.next();!l.done;l=c.next())f=l.value,t.add(f)}catch(e){y={error:e}}finally{try{l&&!l.done&&(b=c.return)&&b.call(c)}finally{if(y)throw y.error}}e.label=2;case 2:return[2,t]}})})},a.prototype.forget=function(s){return n(this,void 0,void 0,function(){var t,r,n,o,i;return v(this,function(e){try{for(t=g(s),r=t.next();!r.done;r=t.next())n=r.value,this._bookmarksPerDb.delete(n)}catch(e){o={error:e}}finally{try{r&&!r.done&&(i=t.return)&&i.call(t)}finally{if(o)throw o.error}}return[2]})})};var s=a;function a(e,t,r){this._bookmarksPerDb=e,this._bookmarksSupplier=t,this._bookmarksConsumer=r}},{}],70:[function(e,t,r){"use strict";function n(){}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype.acquireConnection=function(e){throw Error("Not implemented")},n.prototype.supportsMultiDb=function(){throw Error("Not implemented")},n.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},n.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},n.prototype.verifyConnectivityAndGetServerInfo=function(e){throw Error("Not implemented")},n.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},n.prototype.close=function(){throw Error("Not implemented")},r.default=n},{}],71:[function(e,t,r){"use strict";function n(){}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(n.prototype,"id",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"databaseId",{get:function(){return""},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"server",{get:function(){return{}},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"address",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"version",{get:function(){},enumerable:!1,configurable:!0}),n.prototype.isOpen=function(){return!1},n.prototype.protocol=function(){throw Error("Not implemented")},n.prototype.connect=function(e,t){throw Error("Not implemented")},n.prototype.write=function(e,t,r){throw Error("Not implemented")},n.prototype.resetAndFlush=function(){throw Error("Not implemented")},n.prototype.hasOngoingObservableRequests=function(){throw Error("Not implemented")},n.prototype.close=function(){throw Error("Not implemented")},n.prototype._release=function(){return Promise.resolve()},r.default=n},{}],72:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},u=(Object.defineProperty(r,"__esModule",{value:!0}),r.WRITE=r.READ=r.Driver=void 0,e("./internal/bookmarks")),o=n(e("./internal/resolver/configured-custom-resolver")),c=e("./internal/constants"),l=e("./internal/logger"),f=n(e("./session")),i=e("./internal/util"),h=36e5,p=1e3,s=c.ACCESS_MODE_READ,a=(r.READ=s,c.ACCESS_MODE_WRITE),d=(r.WRITE=a,0),n=(_.prototype.verifyConnectivity=function(e){e=(void 0===e?{}:e).database,e=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:e,accessMode:s})},_.prototype.getServerInfo=function(e){e=(void 0===e?{}:e).database,e=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:e,accessMode:s})},_.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},_.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},_.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},_.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},_.prototype.isEncrypted=function(){return this._isEncrypted()},_.prototype._supportsRouting=function(){return this._meta.routing},_.prototype._isEncrypted=function(){return this._config.encrypted===i.ENCRYPTION_ON||!0===this._config.encrypted},_.prototype._getTrust=function(){return this._config.trust},_.prototype.session=function(e){var e=void 0===e?{}:e,t=e.defaultAccessMode,r=e.bookmarks,n=e.database,o=e.impersonatedUser,i=e.fetchSize,e=e.bookmarkManager;return this._newSession({defaultAccessMode:void 0===t?a:t,bookmarkOrBookmarks:r,database:void 0===n?"":n,reactive:!1,impersonatedUser:o,fetchSize:b(i,this._config.fetchSize),bookmarkManager:e})},_.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),null!=this._connectionProvider?this._connectionProvider.close():Promise.resolve()},_.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},_.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,o=e.reactive,i=e.impersonatedUser,s=e.fetchSize,e=e.bookmarkManager,t=f.default._validateSessionMode(t),a=this._getOrCreateConnectionProvider(),r=null!=r?new u.Bookmarks(r):u.Bookmarks.empty();return this._createSession({mode:t,database:null!=n?n:"",connectionProvider:a,bookmarks:r,config:this._config,reactive:o,impersonatedUser:i,fetchSize:s,bookmarkManager:e})},_.prototype._getOrCreateConnectionProvider=function(){var e;return null==this._connectionProvider&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(e=this._config,new o.default(e.resolver)))),this._connectionProvider},_);function _(e,t,r,n){void 0===n&&(n=function(e){return new f.default(e)}),(o=t=void 0===t?{}:t).maxConnectionLifetime=y(o.maxConnectionLifetime,h),o.maxConnectionPoolSize=y(o.maxConnectionPoolSize,c.DEFAULT_POOL_MAX_SIZE),o.connectionAcquisitionTimeout=y(o.connectionAcquisitionTimeout,c.DEFAULT_POOL_ACQUISITION_TIMEOUT),o.fetchSize=b(o.fetchSize,p),o.connectionTimeout=function(e){e=parseInt(e.connectionTimeout,10);return 0===e||!isNaN(e)&&e<0?null:isNaN(e)?c.DEFAULT_CONNECTION_TIMEOUT_MILLIS:e}(o);var o=l.Logger.create(t),i=t,s=o,a=i.resolver;if(null!=a&&"function"!=typeof a)throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof a));i.connectionAcquisitionTimeout<i.connectionTimeout&&s.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired'),this._id=d++,this._meta=e,this._config=t,this._log=o,this._createConnectionProvider=r,this._createSession=n,this._connectionProvider=null,this._afterConstruction()}function y(e,t){e=parseInt(e,10);return 0<e||0===e?e:e<0?Number.MAX_SAFE_INTEGER:t}function b(e,t){e=parseInt(e,10);if(0<e||e===c.FETCH_ALL)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or ".concat(c.FETCH_ALL," for ALL. However fetchSize = ").concat(e));return t}r.Driver=n,r.default=n},{"./internal/bookmarks":77,"./internal/constants":79,"./internal/logger":81,"./internal/resolver/configured-custom-resolver":85,"./internal/util":92,"./session":97}],73:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=(Object.defineProperty(r,"__esModule",{value:!0}),r.PROTOCOL_ERROR=r.SESSION_EXPIRED=r.SERVICE_UNAVAILABLE=r.Neo4jError=r.isRetriableError=r.newError=void 0,"ServiceUnavailable"),a=(r.SERVICE_UNAVAILABLE=s,"SessionExpired"),u=(r.SESSION_EXPIRED=a,r.PROTOCOL_ERROR="ProtocolError","N/A"),c=(o=Error,i(l,o),l.isRetriable=function(e){return null!=e&&e instanceof l&&e.retriable},l);function l(e,t,r){e=o.call(this,e,null!=r?{cause:r}:void 0)||this;return e.constructor=l,e.__proto__=l.prototype,e.code=t,e.name="Neo4jError",e.retriable=(r=t)===s||r===a||"Neo.ClientError.Security.AuthorizationExpired"===r||function(e){return!0===(null==e?void 0:e.includes("TransientError"))}(r),e}r.Neo4jError=c,r.newError=function(e,t,r){return new c(e,null!=t?t:u,r)};i=c.isRetriable;r.isRetriableError=i},{}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=void 0;var n=e("./json"),e={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",i="__isRelationship__",s="__isUnboundRelationship__",a="__isPath__",u="__isPathSegment__";function c(e,t){return null!=e&&!0===e[t]}f.prototype.toString=function(){for(var e="("+this.elementId,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(t=0;t<r.length;t++)0<t&&(e+=","),e+=r[t]+":"+(0,n.stringify)(this.properties[r[t]]);e+="}"}return e+=")"};var l=f;function f(e,t,r,n){this.identity=e,this.labels=t,this.properties=r,this.elementId=b(n,function(){return e.toString()})}r.Node=l,Object.defineProperty(l.prototype,o,e),r.isNode=function(e){return c(e,o)};p.prototype.toString=function(){var e="("+this.startNodeElementId+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+="]->("+this.endNodeElementId+")"};var h=p;function p(e,t,r,n,o,i,s,a){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=o,this.elementId=b(i,function(){return e.toString()}),this.startNodeElementId=b(s,function(){return t.toString()}),this.endNodeElementId=b(a,function(){return r.toString()})}r.Relationship=h,Object.defineProperty(h.prototype,i,e),r.isRelationship=function(e){return c(e,i)};d.prototype.bind=function(e,t){return new h(this.identity,e,t,this.type,this.properties,this.elementId)},d.prototype.bindTo=function(e,t){return new h(this.identity,e.identity,t.identity,this.type,this.properties,this.elementId,e.elementId,t.elementId)},d.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+="]->"};l=d;function d(e,t,r,n){this.identity=e,this.type=t,this.properties=r,this.elementId=b(n,function(){return e.toString()})}r.UnboundRelationship=l,Object.defineProperty(l.prototype,s,e),r.isUnboundRelationship=function(e){return c(e,s)};function _(e,t,r){this.start=e,this.relationship=t,this.end=r}r.PathSegment=_,Object.defineProperty(_.prototype,u,e),r.isPathSegment=function(e){return c(e,u)};function y(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length}function b(e,t){return null==e?t():e}r.Path=y,Object.defineProperty(y.prototype,a,e),r.isPath=function(e){return c(e,a)}},{"./json":93}],75:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionPromise=r.ManagedTransaction=r.Transaction=r.Connection=r.ConnectionProvider=r.Result=r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=r.ResultSummary=r.Record=r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=r.Time=r.LocalTime=r.LocalDateTime=r.isTime=r.isLocalTime=r.isLocalDateTime=r.isDuration=r.isDateTime=r.isDate=r.Duration=r.DateTime=r.Date=r.Point=r.isPoint=r.internal=r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=r.Integer=r.error=r.isRetriableError=r.Neo4jError=r.newError=void 0,r.bookmarkManager=r.auth=r.json=r.driver=r.types=r.Driver=r.Session=void 0,e("./error")),u=(Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return a.newError}}),Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(r,"isRetriableError",{enumerable:!0,get:function(){return a.isRetriableError}}),i(e("./integer"))),c=(r.Integer=u.default,Object.defineProperty(r,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(r,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(r,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(r,"toString",{enumerable:!0,get:function(){return u.toString}}),e("./temporal-types")),l=(Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return c.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return c.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return c.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return c.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return c.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return c.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return c.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return c.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return c.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return c.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return c.Time}}),e("./graph-types")),f=(Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(r,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(r,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(r,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(r,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(r,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}}),s(e("./record"))),h=(r.Record=f.default,e("./spatial-types")),p=(Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return h.Point}}),i(e("./result-summary"))),d=(r.ResultSummary=p.default,Object.defineProperty(r,"queryType",{enumerable:!0,get:function(){return p.queryType}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return p.ServerInfo}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return p.Notification}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return p.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return p.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return p.QueryStatistics}}),Object.defineProperty(r,"Stats",{enumerable:!0,get:function(){return p.Stats}}),s(e("./result"))),_=(r.Result=d.default,s(e("./connection-provider"))),_=(r.ConnectionProvider=_.default,s(e("./connection"))),y=(r.Connection=_.default,s(e("./transaction"))),b=(r.Transaction=y.default,s(e("./transaction-managed"))),m=(r.ManagedTransaction=b.default,s(e("./transaction-promise"))),v=(r.TransactionPromise=m.default,s(e("./session"))),g=(r.Session=v.default,i(e("./driver"))),w=g,s=(r.Driver=g.default,r.driver=w,s(e("./auth"))),O=(r.auth=s.default,i(e("./bookmark-manager"))),E=(Object.defineProperty(r,"bookmarkManager",{enumerable:!0,get:function(){return O.bookmarkManager}}),i(e("./types"))),T=(r.types=E,i(e("./json"))),i=(r.json=T,i(e("./internal"))),e=(r.internal=i,{SERVICE_UNAVAILABLE:a.SERVICE_UNAVAILABLE,SESSION_EXPIRED:a.SESSION_EXPIRED,PROTOCOL_ERROR:a.PROTOCOL_ERROR}),e=(r.error=e,{newError:a.newError,Neo4jError:a.Neo4jError,isRetriableError:a.isRetriableError,error:e,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:i,isPoint:h.isPoint,Point:h.Point,Date:c.Date,DateTime:c.DateTime,Duration:c.Duration,isDate:c.isDate,isDateTime:c.isDateTime,isDuration:c.isDuration,isLocalDateTime:c.isLocalDateTime,isLocalTime:c.isLocalTime,isTime:c.isTime,LocalDateTime:c.LocalDateTime,LocalTime:c.LocalTime,Time:c.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:f.default,ResultSummary:p.default,queryType:p.queryType,ServerInfo:p.ServerInfo,Notification:p.Notification,Plan:p.Plan,ProfiledPlan:p.ProfiledPlan,QueryStatistics:p.QueryStatistics,Stats:p.Stats,Result:d.default,Transaction:y.default,ManagedTransaction:b.default,TransactionPromise:m.default,Session:v.default,Driver:g.default,Connection:_.default,types:E,driver:w,json:T,auth:s.default,bookmarkManager:O.bookmarkManager});r.default=e},{"./auth":68,"./bookmark-manager":69,"./connection":71,"./connection-provider":70,"./driver":72,"./error":73,"./graph-types":74,"./integer":76,"./internal":80,"./json":93,"./record":94,"./result":96,"./result-summary":95,"./session":97,"./spatial-types":98,"./temporal-types":99,"./transaction":102,"./transaction-managed":100,"./transaction-promise":101,"./types":103}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=void 0;var p=e("./error"),n=new Map,e=(d.prototype.inSafeRange=function(){return this.greaterThanOrEqual(d.MIN_SAFE_VALUE)&&this.lessThanOrEqual(d.MAX_SAFE_VALUE)},d.prototype.toInt=function(){return this.low},d.prototype.toNumber=function(){return this.high*o+(this.low>>>0)},d.prototype.toBigInt=function(){var e;return this.isZero()?BigInt(0):this.isPositive()?BigInt(this.high>>>0)*BigInt(o)+BigInt(this.low>>>0):(e=this.negate(),BigInt(-1)*(BigInt(e.high>>>0)*BigInt(o)+BigInt(e.low>>>0)))},d.prototype.toNumberOrInfinity=function(){return this.lessThan(d.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(d.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},d.prototype.toString=function(e){if((e=null!=e?e:10)<2||36<e)throw RangeError("radix out of range: "+e.toString());if(this.isZero())return"0";var t,r,n;if(this.isNegative())return this.equals(d.MIN_VALUE)?(t=d.fromNumber(e),n=(r=this.div(t)).multiply(t).subtract(this),r.toString(e)+n.toInt().toString(e)):"-"+this.negate().toString(e);for(var o=d.fromNumber(Math.pow(e,6)),i=(n=this,"");;){var s=n.div(o),a=(n.subtract(s.multiply(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},d.prototype.getHighBits=function(){return this.high},d.prototype.getLowBits=function(){return this.low},d.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(d.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=0,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1},d.prototype.isZero=function(){return 0===this.high&&0===this.low},d.prototype.isNegative=function(){return this.high<0},d.prototype.isPositive=function(){return 0<=this.high},d.prototype.isOdd=function(){return 1==(1&this.low)},d.prototype.isEven=function(){return 0==(1&this.low)},d.prototype.equals=function(e){e=d.fromValue(e);return this.high===e.high&&this.low===e.low},d.prototype.notEquals=function(e){return!this.equals(e)},d.prototype.lessThan=function(e){return this.compare(e)<0},d.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},d.prototype.greaterThan=function(e){return 0<this.compare(e)},d.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},d.prototype.compare=function(e){e=d.fromValue(e);if(this.equals(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r||(t||!r)&&this.subtract(e).isNegative()?-1:1},d.prototype.negate=function(){return this.equals(d.MIN_VALUE)?d.MIN_VALUE:this.not().add(d.ONE)},d.prototype.add=function(e){var e=d.fromValue(e),t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=0,c=0,l=0,f=0;return c+=(l=l+((f+=o+(65535&e.low))>>>16)+(n+a))>>>16,d.fromBits((l&=65535)<<16|(f&=65535),((u+=(c+=r+s)>>>16)+(t+i)&65535)<<16|(c&=65535))},d.prototype.subtract=function(e){e=d.fromValue(e);return this.add(e.negate())},d.prototype.multiply=function(e){if(this.isZero())return d.ZERO;e=d.fromValue(e);if(e.isZero())return d.ZERO;if(this.equals(d.MIN_VALUE))return e.isOdd()?d.MIN_VALUE:d.ZERO;if(e.equals(d.MIN_VALUE))return this.isOdd()?d.MIN_VALUE:d.ZERO;if(this.isNegative())return e.isNegative()?this.negate().multiply(e.negate()):this.negate().multiply(e).negate();if(e.isNegative())return this.multiply(e.negate()).negate();if(this.lessThan(h)&&e.lessThan(h))return d.fromNumber(this.toNumber()*e.toNumber());var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,e=65535&e.low,u=0,c=0,l=0,f=(f=0)+((c=c+((l+=o*e)>>>16)+n*e)>>>16)+((c=(c&65535)+o*a)>>>16);return d.fromBits((c&=65535)<<16|(l&=65535),((u+=(f+=r*e)>>>16)+((f=(f&65535)+n*a)>>>16)+((f=(f&65535)+o*s)>>>16)+(t*e+r*a+n*s+o*i)&65535)<<16|(f&=65535))},d.prototype.div=function(e){var t,r,n,o=d.fromValue(e);if(o.isZero())throw(0,p.newError)("division by zero");if(this.isZero())return d.ZERO;{if(this.equals(d.MIN_VALUE))return o.equals(d.ONE)||o.equals(d.NEG_ONE)?d.MIN_VALUE:o.equals(d.MIN_VALUE)?d.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(d.ZERO)?o.isNegative()?d.ONE:d.NEG_ONE:(t=this.subtract(o.multiply(n)),n.add(t.div(o)));if(o.equals(d.MIN_VALUE))return d.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=d.ZERO,t=this;t.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(t.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),a=d.fromNumber(n),u=a.multiply(o);u.isNegative()||u.greaterThan(t);)u=(a=d.fromNumber(n-=s)).multiply(o);a.isZero()&&(a=d.ONE),r=r.add(a),t=t.subtract(u)}return r},d.prototype.modulo=function(e){e=d.fromValue(e);return this.subtract(this.div(e).multiply(e))},d.prototype.not=function(){return d.fromBits(~this.low,~this.high)},d.prototype.and=function(e){e=d.fromValue(e);return d.fromBits(this.low&e.low,this.high&e.high)},d.prototype.or=function(e){e=d.fromValue(e);return d.fromBits(this.low|e.low,this.high|e.high)},d.prototype.xor=function(e){e=d.fromValue(e);return d.fromBits(this.low^e.low,this.high^e.high)},d.prototype.shiftLeft=function(e){e=d.toNumber(e);return 0==(e&=63)?d.ZERO:e<32?d.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):d.fromBits(0,this.low<<e-32)},d.prototype.shiftRight=function(e){var t=d.toNumber(e);return 0==(t&=63)?d.ZERO:e<32?d.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):d.fromBits(this.high>>t-32,0<=this.high?0:-1)},d.isInteger=function(e){return!0===(null==e?void 0:e.__isInteger__)},d.fromInt=function(e){if(-128<=(e|=0)&&e<128&&null!=(t=n.get(e)))return t;var t=new d(e,e<0?-1:0);return-128<=e&&e<128&&n.set(e,t),t},d.fromBits=function(e,t){return new d(e,t)},d.fromNumber=function(e){return isNaN(e)||!isFinite(e)?d.ZERO:e<=-i?d.MIN_VALUE:i<=e+1?d.MAX_VALUE:e<0?d.fromNumber(-e).negate():new d(e%o|0,e/o|0)},d.fromString=function(e,t,r){var n=(void 0===r?{}:r).strictStringValidation;if(0===e.length)throw(0,p.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return d.ZERO;if((t=null!=t?t:10)<2||36<t)throw(0,p.newError)("radix out of range: "+t.toString());if(0<(r=e.indexOf("-")))throw(0,p.newError)('number format error: interior "-" character: '+e);if(0===r)return d.fromString(e.substring(1),t).negate();for(var o,i,s=d.fromNumber(Math.pow(t,8)),a=d.ZERO,u=0;u<e.length;u+=8){var c,l=Math.min(8,e.length-u),f=e.substring(u,u+l),h=parseInt(f,t);if(!0===n&&(o=f,c=h,i=t,Number.isNaN(o)||Number.isNaN(c)||function(e,t,r){e=e.toString(t),t=Math.max(r-e.length,0),r="0".repeat(t);return"".concat(r).concat(e)}(c,i,o.length)!==o.toLowerCase()))throw(0,p.newError)('number format error: "'.concat(f,'" is NaN in radix ').concat(t,": ").concat(e));a=l<8?(c=d.fromNumber(Math.pow(t,l)),a.multiply(c).add(d.fromNumber(h))):(a=a.multiply(s)).add(d.fromNumber(h))}return a},d.fromValue=function(e,t){return void 0===t&&(t={}),e instanceof d?e:"number"==typeof e?d.fromNumber(e):"string"==typeof e?d.fromString(e,void 0,t):"bigint"==typeof e?d.fromString(e.toString()):new d(e.low,e.high)},d.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return d.fromValue(e).toNumber()}},d.toString=function(e,t){return d.fromValue(e).toString(t)},d.inSafeRange=function(e){return d.fromValue(e).inSafeRange()},d.ZERO=d.fromInt(0),d.ONE=d.fromInt(1),d.NEG_ONE=d.fromInt(-1),d.MAX_VALUE=d.fromBits(-1,2147483647),d.MIN_VALUE=d.fromBits(0,-2147483648),d.MIN_SAFE_VALUE=d.fromBits(1,-2097152),d.MAX_SAFE_VALUE=d.fromBits(-1,2097151),d.__isInteger__=!0,d);function d(e,t){this.low=null!=e?e:0,this.high=null!=t?t:0}Object.defineProperty(e.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var o=4294967296,i=o*o/2,h=e.fromInt(1<<24),s=e.fromValue,s=(r.int=s,e.isInteger),s=(r.isInt=s,e.inSafeRange),s=(r.inSafeRange=s,e.toNumber),s=(r.toNumber=s,e.toString);r.toString=s,r.default=e},{"./error":73}],77:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},u=(Object.defineProperty(r,"__esModule",{value:!0}),r.Bookmarks=void 0,i(e("./util"))),i=(c.empty=function(){return l},c.prototype.isEmpty=function(){return 0===this._values.length},c.prototype.values=function(){return this._values},c.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},c.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={}).bookmarks=this._values,e)},c);function c(e){this._values=function(e){if(null==e||""===e)return[];if(u.isString(e))return[e];if(Array.isArray(e)){for(var t=new Set,r=function r(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(r(t)):e.concat(t)},[])}(e),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!u.isString(o))throw new TypeError("Bookmark value should be a string, given: '".concat(o,"'"));t.add(o)}}return a([],s(t),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(e,"'"))}(e)}var l=new(r.Bookmarks=i)(null)},{"./util":92}],78:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},a=(Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_CONNECTION_HOLDER=r.ReadOnlyConnectionHolder=r.ConnectionHolder=void 0,e("../error")),u=e("./util"),c=e("./constants"),l=e("./bookmarks"),e=(f.prototype.mode=function(){return this._mode},f.prototype.database=function(){return this._database},f.prototype.setDatabase=function(e){this._database=e},f.prototype.bookmarks=function(){return this._bookmarks},f.prototype.connectionProvider=function(){return this._connectionProvider},f.prototype.referenceCount=function(){return this._referenceCount},f.prototype.initializeConnection=function(){return 0!==this._referenceCount||null==this._connectionProvider?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},f.prototype._createConnectionPromise=function(o){return i(this,void 0,void 0,function(){var t,r,n;return s(this,function(e){switch(e.label){case 0:return r=(t=o).acquireConnection,n={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,r.apply(t,[(n.bookmarks=e.sent(),n.impersonatedUser=this._impersonatedUser,n.onDatabaseNameResolved=this._onDatabaseNameResolved,n)])];case 2:return[2,e.sent()]}})})},f.prototype._getBookmarks=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,e.sent()]}})})},f.prototype.getConnection=function(){return this._connectionPromise},f.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},f.prototype.close=function(e){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(e))},f.prototype._releaseConnection=function(t){return this._connectionPromise=this._connectionPromise.then(function(e){return null!=e?e.isOpen()&&(e.hasOngoingObservableRequests()||!0===t)?e.resetAndFlush().catch(b).then(function(){return e._release().then(function(){return null})}):e._release().then(function(){return null}):Promise.resolve(null)}).catch(b),this._connectionPromise},f);function f(e){var e=void 0===e?{}:e,t=e.mode,t=void 0===t?c.ACCESS_MODE_WRITE:t,r=e.database,r=void 0===r?"":r,n=e.bookmarks,o=e.connectionProvider,i=e.impersonatedUser,s=e.onDatabaseNameResolved,e=e.getConnectionAcquistionBookmarks;this._mode=t,this._database=null!=r?(0,u.assertString)(r,"database"):"",this._bookmarks=null!=n?n:l.Bookmarks.empty(),this._connectionProvider=o,this._impersonatedUser=i,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=s,this._getConnectionAcquistionBookmarks=null!=e?e:function(){return Promise.resolve(l.Bookmarks.empty())}}r.ConnectionHolder=e;o(_,h=e),_.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},_.prototype.getConnection=function(){return this._connectionHolder.getConnection()},_.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})},_.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve(null)})};var h,p,d=_;function _(e){var t=h.call(this,{mode:e.mode(),database:e.database(),bookmarks:e.bookmarks(),getConnectionAcquistionBookmarks:e._getConnectionAcquistionBookmarks,connectionProvider:e.connectionProvider()})||this;return t._connectionHolder=e,t}function y(){return null!==p&&p.apply(this,arguments)||this}r.ReadOnlyConnectionHolder=d,r.default=d,o(y,p=e),y.prototype.mode=function(){},y.prototype.database=function(){},y.prototype.initializeConnection=function(){return!0},y.prototype.getConnection=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.reject((0,a.newError)("This connection holder does not serve connections"))];case 1:return[2,e.sent()]}})})},y.prototype.releaseConnection=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})},y.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,e.sent()]}})})};d=new y;function b(e){return null}r.EMPTY_CONNECTION_HOLDER=d},{"../error":73,"./bookmarks":77,"./constants":79,"./util":92}],79:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOLT_PROTOCOL_V5_0=r.BOLT_PROTOCOL_V4_4=r.BOLT_PROTOCOL_V4_3=r.BOLT_PROTOCOL_V4_2=r.BOLT_PROTOCOL_V4_1=r.BOLT_PROTOCOL_V4_0=r.BOLT_PROTOCOL_V3=r.BOLT_PROTOCOL_V2=r.BOLT_PROTOCOL_V1=r.DEFAULT_POOL_MAX_SIZE=r.DEFAULT_POOL_ACQUISITION_TIMEOUT=r.DEFAULT_CONNECTION_TIMEOUT_MILLIS=r.ACCESS_MODE_WRITE=r.ACCESS_MODE_READ=r.FETCH_ALL=void 0;r.FETCH_ALL=-1,r.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4,r.DEFAULT_POOL_MAX_SIZE=100,r.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4,r.ACCESS_MODE_READ="READ",r.ACCESS_MODE_WRITE="WRITE",r.BOLT_PROTOCOL_V1=1,r.BOLT_PROTOCOL_V2=2,r.BOLT_PROTOCOL_V3=3,r.BOLT_PROTOCOL_V4_0=4,r.BOLT_PROTOCOL_V4_1=4.1,r.BOLT_PROTOCOL_V4_2=4.2,r.BOLT_PROTOCOL_V4_3=4.3,r.BOLT_PROTOCOL_V4_4=4.4;r.BOLT_PROTOCOL_V5_0=5},{}],80:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.objectUtil=r.resolver=r.serverAddress=r.urlUtil=r.logger=r.transactionExecutor=r.txConfig=r.connectionHolder=r.constants=r.bookmarks=r.observer=r.temporalUtil=r.util=void 0,i(e("./util"))),s=(r.util=s,i(e("./temporal-util"))),s=(r.temporalUtil=s,i(e("./observers"))),s=(r.observer=s,i(e("./bookmarks"))),s=(r.bookmarks=s,i(e("./constants"))),s=(r.constants=s,i(e("./connection-holder"))),s=(r.connectionHolder=s,i(e("./tx-config"))),s=(r.txConfig=s,i(e("./transaction-executor"))),s=(r.transactionExecutor=s,i(e("./logger"))),s=(r.logger=s,i(e("./url-util"))),s=(r.urlUtil=s,i(e("./server-address"))),s=(r.serverAddress=s,i(e("./resolver"))),s=(r.resolver=s,i(e("./object-util")));r.objectUtil=s},{"./bookmarks":77,"./connection-holder":78,"./constants":79,"./logger":81,"./object-util":82,"./observers":83,"./resolver":86,"./server-address":87,"./temporal-util":88,"./transaction-executor":89,"./tx-config":90,"./url-util":91,"./util":92}],81:[function(e,t,r){"use strict";var n,o,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=(Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0,e("../error")),a="info",u=a,c=((e={}).error=0,e.warn=1,e.info=2,e.debug=3,e),e=(l.create=function(e){return null!=(null==e?void 0:e.logging)?new l(function(e){if(null==(null==e?void 0:e.level))return u;var e=e.level,t=c[e];if(null!=t||0===t)return e;throw(0,s.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(c).toString()))}(e=e.logging),function(e){if(null!=(null==e?void 0:e.logger)){var t=e.logger;if(null!=t&&"function"==typeof t)return t}throw(0,s.newError)("Illegal logger function: ".concat(null!=(e=null==(t=null==e?void 0:e.logger)?void 0:t.toString())?e:"undefined"))}(e)):this.noOp()},l.noOp=function(){return h},l.prototype.isErrorEnabled=function(){return p(this._level,"error")},l.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction("error",e)},l.prototype.isWarnEnabled=function(){return p(this._level,"warn")},l.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction("warn",e)},l.prototype.isInfoEnabled=function(){return p(this._level,a)},l.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(a,e)},l.prototype.isDebugEnabled=function(){return p(this._level,"debug")},l.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction("debug",e)},l);function l(e,t){this._level=e,this._loggerFunction=t}function f(){return o.call(this,a,function(e,t){})||this}r.Logger=e,i(f,o=e),f.prototype.isErrorEnabled=function(){return!1},f.prototype.error=function(e){},f.prototype.isWarnEnabled=function(){return!1},f.prototype.warn=function(e){},f.prototype.isInfoEnabled=function(){return!1},f.prototype.info=function(e){},f.prototype.isDebugEnabled=function(){return!1},f.prototype.debug=function(e){};var h=new f;function p(e,t){return c[e]>=c[t]}},{"../error":73}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getBrokenObjectReason=r.isBrokenObject=r.createBrokenObject=void 0;var o="__isBrokenObject__",i="__reason__";r.createBrokenObject=function(r,e){function n(){throw r}return void 0===e&&(e={}),new Proxy(e,{get:function(e,t){return t===o||(t===i?r:void("toJSON"!==t&&n()))},set:n,apply:n,construct:n,defineProperty:n,deleteProperty:n,getOwnPropertyDescriptor:n,getPrototypeOf:n,has:n,isExtensible:n,ownKeys:n,preventExtensions:n,setPrototypeOf:n})},r.isBrokenObject=function(e){return null!==e&&"object"==typeof e&&!0===e[o]},r.getBrokenObjectReason=function(e){return e[i]}},{}],83:[function(e,t,r){"use strict";function n(){}function o(e){var t=e.error,e=e.onError;this._error=t,this._beforeError=e,this._observers=[],this.onError(t)}function i(e,t,r){null!=t&&t.bind(e)(r)}Object.defineProperty(r,"__esModule",{value:!0}),r.FailedObserver=r.CompletedObserver=void 0,n.prototype.subscribe=function(e){i(e,e.onKeys,[]),i(e,e.onCompleted,{})},n.prototype.cancel=function(){},n.prototype.pause=function(){},n.prototype.resume=function(){},n.prototype.prepareToHandleSingleResponse=function(){},n.prototype.markCompleted=function(){},n.prototype.onError=function(e){throw Error("CompletedObserver not supposed to call onError")},r.CompletedObserver=n,o.prototype.subscribe=function(e){i(e,e.onError,this._error),this._observers.push(e)},o.prototype.onError=function(t){i(this,this._beforeError,t),this._observers.forEach(function(e){return i(e,e.onError,t)})},o.prototype.cancel=function(){},o.prototype.pause=function(){},o.prototype.resume=function(){},o.prototype.markCompleted=function(){},o.prototype.prepareToHandleSingleResponse=function(){},r.FailedObserver=o},{}],84:[function(e,t,r){"use strict";function n(){}Object.defineProperty(r,"__esModule",{value:!0}),n.prototype.resolve=function(){throw new Error("Abstract function")},n.prototype._resolveToItself=function(e){return Promise.resolve([e])},r.default=n},{}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../server-address");function o(e){return Promise.resolve([e])}function i(e){this._resolverFunction=null!=e?e:o}i.prototype.resolve=function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(Array.isArray(e))return e.map(function(e){return n.ServerAddress.fromUrl(e)});throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(e))})},r.default=i},{"../server-address":87}],86:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),r.ConfiguredCustomResolver=r.BaseHostNameResolver=void 0,n(e("./base-host-name-resolver"))),o=(r.BaseHostNameResolver=o.default,n(e("./configured-custom-resolver")));r.ConfiguredCustomResolver=o.default},{"./base-host-name-resolver":84,"./configured-custom-resolver":85}],87:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.ServerAddress=void 0,e("./util")),a=i(e("./url-util"));function u(e,t,r,n){this._host=(0,s.assertString)(e,"host"),this._resolved=null!=t?(0,s.assertString)(t,"resolved"):null,this._port=(0,s.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=null!=t?"".concat(n,"(").concat(t,")"):"".concat(n)}u.prototype.host=function(){return this._host},u.prototype.resolvedHost=function(){return null!=this._resolved?this._resolved:this._host},u.prototype.port=function(){return this._port},u.prototype.resolveWith=function(e){return new u(this._host,e,this._port,this._hostPort)},u.prototype.asHostPort=function(){return this._hostPort},u.prototype.asKey=function(){return this._hostPort},u.prototype.toString=function(){return this._stringValue},u.fromUrl=function(e){e=a.parseDatabaseUrl(e);return new u(e.host,null,e.port,e.hostAndPort)},r.ServerAddress=u},{"./url-util":91,"./util":92}],88:[function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},u=(Object.defineProperty(a,"__esModule",{value:!0}),a.floorMod=a.floorDiv=a.assertValidZoneId=a.assertValidNanosecond=a.assertValidSecond=a.assertValidMinute=a.assertValidHour=a.assertValidDay=a.assertValidMonth=a.assertValidYear=a.timeZoneOffsetInSeconds=a.totalNanoseconds=a.newDate=a.toStandardDate=a.isoStringToStandardDate=a.dateToIsoString=a.timeZoneOffsetToIsoString=a.timeToIsoString=a.durationToIsoString=a.dateToEpochDay=a.localDateTimeToEpochSecond=a.localTimeToNanoOfDay=a.normalizeNanosecondsForDuration=a.normalizeSecondsForDuration=a.SECONDS_PER_DAY=a.DAYS_PER_400_YEAR_CYCLE=a.DAYS_0000_TO_1970=a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE=a.NANOS_PER_MILLISECOND=a.NANOS_PER_SECOND=a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE=a.MINUTES_PER_HOUR=a.NANOSECOND_OF_SECOND_RANGE=a.SECOND_OF_MINUTE_RANGE=a.MINUTE_OF_HOUR_RANGE=a.HOUR_OF_DAY_RANGE=a.DAY_OF_MONTH_RANGE=a.MONTH_OF_YEAR_RANGE=a.YEAR_RANGE=void 0,r(e("../integer"))),i=e("../error"),s=e("./util"),r=(c.prototype.contains=function(e){var t;return(0,u.isInt)(e)&&e instanceof u.default?e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger):"bigint"==typeof e?(t=(0,u.int)(e)).greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger):e>=this._minNumber&&e<=this._maxNumber},c.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},c);function c(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=(0,u.int)(e),this._maxInteger=(0,u.int)(t)}function l(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),function(e){if((e=(0,u.int)(e)).modulo(4).equals(0))return!e.modulo(100).equals(0)||!!e.modulo(400).equals(0)}(e)||(n=n.subtract(1))),n.subtract(a.DAYS_0000_TO_1970)}function f(e,t,r){if((0,s.assertNumberOrInteger)(e,r),t.contains(e))return e;throw(0,i.newError)("".concat(r," is expected to be in range ").concat(t.toString()," but was: ").concat(e.toString()))}function h(e,t){e=(0,u.int)(e),t=(0,u.int)(t);var r=e.div(t);return r=e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)?r.subtract(1):r}function p(e,t){return e=(0,u.int)(e),t=(0,u.int)(t),e.subtract(h(e,t).multiply(t))}function d(e){return(e=(0,u.int)(e)).equals(0)?"":"."+_(e,9)}function _(e,t,r){var n=(e=(0,u.int)(e)).isNegative(),o=(e=n?e.negate():e).toString();if(null!=t)for(;o.length<t;)o="0"+o;return n?"-"+o:!0===(null==r?void 0:r.usePositiveSign)?"+"+o:o}a.YEAR_RANGE=new r(-999999999,999999999),a.MONTH_OF_YEAR_RANGE=new r(1,12),a.DAY_OF_MONTH_RANGE=new r(1,31),a.HOUR_OF_DAY_RANGE=new r(0,23),a.MINUTE_OF_HOUR_RANGE=new r(0,59),a.SECOND_OF_MINUTE_RANGE=new r(0,59),a.NANOSECOND_OF_SECOND_RANGE=new r(0,999999999),a.MINUTES_PER_HOUR=60,a.SECONDS_PER_MINUTE=60,a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE*a.MINUTES_PER_HOUR,a.NANOS_PER_SECOND=1e9,a.NANOS_PER_MILLISECOND=1e6,a.NANOS_PER_MINUTE=a.NANOS_PER_SECOND*a.SECONDS_PER_MINUTE,a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE*a.MINUTES_PER_HOUR,a.DAYS_0000_TO_1970=719528,a.DAYS_PER_400_YEAR_CYCLE=146097,a.SECONDS_PER_DAY=86400,a.normalizeSecondsForDuration=function(e,t){return(0,u.int)(e).add(h(t,a.NANOS_PER_SECOND))},a.normalizeNanosecondsForDuration=function(e){return p(e,a.NANOS_PER_SECOND)},a.localTimeToNanoOfDay=function(e,t,r,n){return e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r),n=(0,u.int)(n),(e=(e=(e=e.multiply(a.NANOS_PER_HOUR)).add(t.multiply(a.NANOS_PER_MINUTE))).add(r.multiply(a.NANOS_PER_SECOND))).add(n)},a.localDateTimeToEpochSecond=function(e,t,r,n,o,i,s){return e=l(e,t,r),t=function(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);e=e.multiply(a.SECONDS_PER_HOUR);return(e=e.add(t.multiply(a.SECONDS_PER_MINUTE))).add(r)}(n,o,i),e.multiply(a.SECONDS_PER_DAY).add(t)},a.dateToEpochDay=l,a.durationToIsoString=function(e,t,r,n){return e=_(e),t=_(t),r=function(e,t){e=(0,u.int)(e),t=(0,u.int)(t);var r,n=e.isNegative(),o=t.greaterThan(0);e=n&&o?e.equals(-1)?"-0":e.add(1).toString():e.toString();o&&(r=d((n?t.negate().add(2*a.NANOS_PER_SECOND):t.add(a.NANOS_PER_SECOND)).modulo(a.NANOS_PER_SECOND)));return null!=r?e+r:e}(r,n),"P".concat(e,"M").concat(t,"DT").concat(r,"S")},a.timeToIsoString=function(e,t,r,n){return e=_(e,2),t=_(t,2),r=_(r,2),n=d(n),"".concat(e,":").concat(t,":").concat(r).concat(n)},a.timeZoneOffsetToIsoString=function(e){if((e=(0,u.int)(e)).equals(0))return"Z";var t=(r=e.isNegative())?"-":"+",r=_((e=r?e.multiply(-1):e).div(a.SECONDS_PER_HOUR),2),n=_(e.div(a.SECONDS_PER_MINUTE).modulo(a.MINUTES_PER_HOUR),2);return null!=(e=(e=e.modulo(a.SECONDS_PER_MINUTE)).equals(0)?null:_(e,2))?"".concat(t).concat(r,":").concat(n,":").concat(e):"".concat(t).concat(r,":").concat(n)},a.dateToIsoString=function(e,t,r){return e=function(e){e=(0,u.int)(e);if(e.isNegative()||e.greaterThan(9999))return _(e,6,{usePositiveSign:!0});return _(e,4)}(e),t=_(t,2),r=_(r,2),"".concat(e,"-").concat(t,"-").concat(r)},a.isoStringToStandardDate=function(e){return new Date(e)},a.toStandardDate=function(e){return new Date(e)},a.newDate=function(e){return new Date(e)},a.totalNanoseconds=function(e,t){return t=null!=t?t:0,e=e.getMilliseconds()*a.NANOS_PER_MILLISECOND,t instanceof u.default?t.add(e):"bigint"==typeof t?t+BigInt(e):t+e},a.timeZoneOffsetInSeconds=function(e){var t=e.getSeconds()>=e.getUTCSeconds()?e.getSeconds()-e.getUTCSeconds():e.getSeconds()-e.getUTCSeconds()+60;return 0===(e=e.getTimezoneOffset())?0+t:-1*e*a.SECONDS_PER_MINUTE+t},a.assertValidYear=function(e){return f(e,a.YEAR_RANGE,"Year")},a.assertValidMonth=function(e){return f(e,a.MONTH_OF_YEAR_RANGE,"Month")},a.assertValidDay=function(e){return f(e,a.DAY_OF_MONTH_RANGE,"Day")},a.assertValidHour=function(e){return f(e,a.HOUR_OF_DAY_RANGE,"Hour")},a.assertValidMinute=function(e){return f(e,a.MINUTE_OF_HOUR_RANGE,"Minute")},a.assertValidSecond=function(e){return f(e,a.SECOND_OF_MINUTE_RANGE,"Second")},a.assertValidNanosecond=function(e){return f(e,a.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")},a.assertValidZoneId=function(t,r){try{Intl.DateTimeFormat(void 0,{timeZone:r})}catch(e){throw(0,i.newError)("".concat(t,' is expected to be a valid ZoneId but was: "').concat(r,'"'))}},a.floorDiv=h,a.floorMod=p},{"../error":73,"../integer":76,"./util":92}],89:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},l=(Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionExecutor=void 0,e("../error"));function o(e,t,r,n){this._maxRetryTimeMs=i(e,3e4),this._initialRetryDelayMs=i(t,1e3),this._multiplier=i(r,2),this._jitterFactor=i(n,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}function i(e,t){return null!=e?e:t}o.prototype.execute=function(n,o,i){var s=this;return new Promise(function(e,t){s._executeTransactionInsidePromise(n,o,e,t,i).catch(t)}).catch(function(e){var t=Date.now(),r=s._initialRetryDelayMs;return s._retryTransactionPromise(n,o,e,t,r,i)})},o.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(e){return clearTimeout(e)}),this._inFlightTimeoutIds=[]},o.prototype._retryTransactionPromise=function(o,i,e,r,s,a){var u=this;return Date.now()-r>this._maxRetryTimeMs||!(0,l.isRetriableError)(e)?Promise.reject(e):new Promise(function(e,t){var r=u._computeDelayWithJitter(s),n=setTimeout(function(){u._inFlightTimeoutIds=u._inFlightTimeoutIds.filter(function(e){return e!==n}),u._executeTransactionInsidePromise(o,i,e,t,a).catch(t)},r);u._inFlightTimeoutIds.push(n)}).catch(function(e){var t=s*u._multiplier;return u._retryTransactionPromise(o,i,e,r,t,a)})},o.prototype._executeTransactionInsidePromise=function(o,i,s,a,u){return n(this,void 0,void 0,function(){var t,r,n=this;return c(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,o()];case 1:return t=e.sent(),[3,3];case 2:return r=e.sent(),a(r),[2];case 3:return r=(null!=u?u:function(e){return e})(t),this._safeExecuteTransactionWork(r,i).then(function(e){return n._handleTransactionWorkSuccess(e,t,s,a)}).catch(function(e){return n._handleTransactionWorkFailure(e,t,a)}),[2]}})})},o.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},o.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},o.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}).catch(r):r(e)},o.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t,e=e+t;return Math.random()*(e-r)+r},o.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,l.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,l.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,l.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||1<this._jitterFactor)throw(0,l.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},r.TransactionExecutor=o},{"../error":73}],90:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.TxConfig=void 0,i(e("./util"))),a=e("../error"),u=e("../integer"),i=(c.empty=function(){return l},c.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},c);function c(e){var t;null!=(t=e)&&s.assertObject(t,"Transaction config"),this.timeout=function(e){if(s.isObject(e)&&null!=e.timeout){s.assertNumberOrInteger(e.timeout,"Transaction timeout");e=(0,u.int)(e.timeout);if(e.isNegative())throw(0,a.newError)("Transaction timeout should not be negative");return e}return null}(e),this.metadata=function(e){if(s.isObject(e)&&null!=e.metadata){e=e.metadata;if(s.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}(e)}var l=new(r.TxConfig=i)({})},{"../error":73,"../integer":76,"./util":92}],91:[function(e,t,r){"use strict";var a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},u=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},c=(Object.defineProperty(r,"__esModule",{value:!0}),r.Url=r.formatIPv6Address=r.formatIPv4Address=r.defaultPortForScheme=r.parseDatabaseUrl=void 0,e("./util")),n=7687,o=7474,i=7473,l=function(e,t,r,n,o){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=o};function f(e,t,r){if(""===(e=(null!=e?e:"").trim()))throw new Error("Illegal empty ".concat(t," in URL query '").concat(r,"'"));return e}function h(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address ".concat(e))}return"[".concat(e,"]")}function p(e){return"http"===e?o:"https"===e?i:n}r.Url=l,r.parseDatabaseUrl=function(e){(0,c.assertString)(e,"URL");var t,r=function(e){function s(e,t){t=e.indexOf(t);return 0<=t?[e.substring(0,t),e[t],e.substring(t+1)]:[e,"",""]}function t(e){var t,r={},n=((t="@")===(t=0<=(t=(o=e).lastIndexOf(t))?[o.substring(0,t),o[t],o.substring(t+1)]:["","",o])[1]&&(r.userInfo=decodeURIComponent(t[0]),e=t[2]),u((o="]",n=s(n=e,i="["),[(i=s(n[2],o))[0],i[2]]),2)),o=n[0],i=n[1];return""!==o?(r.host=o,t=s(i,":")):(t=s(e,":"),r.host=t[0]),":"===t[1]&&(r.port=t[2]),r}var r,n={};":"===(r=s(e,":"))[1]&&(n.scheme=decodeURIComponent(r[0]),e=r[2]);"#"===(r=s(e,"#"))[1]&&(n.fragment=decodeURIComponent(r[2]),e=r[0]);"?"===(r=s(e,"?"))[1]&&(n.query=r[2],e=r[0]);e.startsWith("//")?(r=s(e.substr(2),"/"),(n=a(a({},n),t(r[0]))).path=r[1]+r[2]):n.path=e;return n}((n=(n=(n=e).trim()).includes("://")?{schemeMissing:!1,url:n}:{schemeMissing:!0,url:"none://".concat(n)}).url),n=n.schemeMissing?null:function(e){if(null==e)return null;":"===(e=e.trim()).charAt(e.length-1)&&(e=e.substring(0,e.length-1));return e}(r.scheme),o=function(e){if(null!=e)return e.trim();throw new Error("Unable to extract host from null or undefined URL")}(r.host),i=function(e){if(""!==e&&null!=e)return e.includes(":")?h(e):e;throw new Error("Illegal host ".concat(e))}(o),s=function(e,t){e="string"==typeof e?parseInt(e,10):e;return null==e||isNaN(e)?p(t):e}(r.port,n),i="".concat(i,":").concat(s),r=function(e,r){var e=null!=e?function(e){"?"===(null==(e=(null!=e?e:"").trim())?void 0:e.charAt(0))&&(e=e.substring(1,e.length));return e}(e):null,n={};null!=e&&e.split("&").forEach(function(e){e=e.split("=");if(2!==e.length)throw new Error("Invalid parameters: '".concat(e.toString(),"' in URL '").concat(r,"'."));var t=f(e[0],"key",r),e=f(e[1],"value",r);if(void 0!==n[t])throw new Error("Duplicated query parameters with key '".concat(t,"' in URL '").concat(r,"'"));n[t]=e});return n}(null!=(t=r.query)?t:"string"==typeof(t=r.resourceName)?u(t.split("?"),2)[1]:null,e);return new l(n,o,s,i,r)},r.formatIPv4Address=function(e,t){return"".concat(e,":").concat(t)},r.formatIPv6Address=function(e,t){return e=h(e),"".concat(e,":").concat(t)},r.defaultPortForScheme=p},{"./util":92}],92:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ENCRYPTION_OFF=r.ENCRYPTION_ON=r.validateQueryAndParameters=r.assertValidDate=r.assertNumberOrInteger=r.assertNumber=r.assertString=r.assertObject=r.isString=r.isObject=r.isEmptyObjectOrNull=void 0;var n=e("../integer"),o=e("../json");r.ENCRYPTION_ON="ENCRYPTION_ON";function i(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function s(e,t){if(a(e))return e;throw new TypeError((0,o.stringify)(t)+" expected to be string but was: "+(0,o.stringify)(e))}function a(e){return"[object String]"===Object.prototype.toString.call(e)}r.ENCRYPTION_OFF="ENCRYPTION_OFF",r.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!i(e))return!1;for(var t in e)if(void 0!==e[t])return!1;return!0},r.isObject=i,r.validateQueryAndParameters=function(e,t,r){var n="",t=null!=t?t:{},r=null!=(r=null==r?void 0:r.skipAsserts)&&r;if("string"==typeof e?n=e:e instanceof String?n=e.toString():"object"==typeof e&&null!=e.text&&(n=e.text,t=null!=(e=e.parameters)?e:{}),!r){e=n;if(s(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.");r=t;if(!i(r))throw e=null!=r.constructor?" "+r.constructor.name:"",new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(e," ").concat(JSON.stringify(r)))}return{validatedQuery:n,params:t}},r.assertObject=function(e,t){if(i(e))return e;throw new TypeError(t+" expected to be an object but was: "+(0,o.stringify)(e))},r.assertString=s,r.assertNumber=function(e,t){if("number"!=typeof e)throw new TypeError(t+" expected to be a number but was: "+(0,o.stringify)(e));return e},r.assertNumberOrInteger=function(e,t){if("number"==typeof e||"bigint"==typeof e||(0,n.isInt)(e))return e;throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,o.stringify)(e))},r.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,o.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,o.stringify)(e));return e},r.isString=a},{"../integer":76,"../json":93}],93:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringify=void 0;var n=e("./internal/object-util");r.stringify=function(e){return JSON.stringify(e,function(e,t){return(0,n.isBrokenObject)(t)?{__isBrokenObject__:!0,__reason__:(0,n.getBrokenObjectReason)(t)}:"bigint"==typeof t?"".concat(t,"n"):t})}},{"./internal/object-util":82}],94:[function(e,t,r){"use strict";var n=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=(Object.defineProperty(r,"__esModule",{value:!0}),e("./error"));function i(e,t,r){var n;this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=null!=r?r:(n={},e.forEach(function(e,t){n[e]=t}),n)}i.prototype.forEach=function(e){var t,r;try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0];e(i[1],s,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},i.prototype.map=function(e){var t,r,n=[];try{for(var o=c(this.entries()),i=o.next();!i.done;i=o.next()){var s=l(i.value,2),a=s[0],u=s[1];n.push(e(u,a,this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},i.prototype.entries=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.toObject=function(){var t,e,r={};try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0],a=i[1];r[s]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},i.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,o.newError)("This record has no field with key '"+e+"', available key are: ["+this.keys.toString()+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,o.newError)("This record has no field with index '"+t.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},i.prototype.has=function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]},r.default=i},{"./error":73}],95:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=(Object.defineProperty(r,"__esModule",{value:!0}),r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=void 0,i(e("./integer"))),i=(a.prototype._buildNotifications=function(e){return null==e?[]:e.map(function(e){return new p(e)})},a.prototype.hasPlan=function(){return this.plan instanceof u},a.prototype.hasProfile=function(){return this.profile instanceof c},a);function a(e,t,r,n){this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new f(null!=(e=r.stats)?e:{}),this.updateStatistics=this.counters,this.plan=(null!=r.plan||null!=r.profile)&&new u(null!=(t=r.plan)?t:r.profile),this.profile=null!=r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new _(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:null!=(e=r.db)?e:null}}var u=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=null!=e.children?e.children.map(function(e){return new t(e)}):[]},c=(r.Plan=u,l.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},l);function l(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=b("dbHits",e),this.rows=b("rows",e),this.pageCacheMisses=b("pageCacheMisses",e),this.pageCacheHits=b("pageCacheHits",e),this.pageCacheHitRatio=b("pageCacheHitRatio",e),this.time=b("time",e),this.children=null!=e.children?e.children.map(function(e){return new l(e)}):[]}r.ProfiledPlan=c;r.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0},h.prototype.containsUpdates=function(){var r=this;return void 0!==this._containsUpdates?this._containsUpdates:0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)},h.prototype.updates=function(){return this._stats},h.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:0<this._systemUpdates},h.prototype.systemUpdates=function(){return this._systemUpdates};var f=h;function h(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=y(r[e]):"systemUpdates"===t?n._systemUpdates=y(r[e]):"containsSystemUpdates"===t?n._containsSystemUpdates=r[e]:"containsUpdates"===t&&(n._containsUpdates=r[e])}),this._stats=Object.freeze(this._stats)}r.QueryStatistics=f;d._constructPosition=function(e){return null==e?{}:{offset:y(e.offset),line:y(e.line),column:y(e.column)}};var p=d;function d(e){this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=d._constructPosition(e.position)}r.Notification=p;var _=function(e,t){null!=e&&(this.address=e.address,this.agent=e.version),this.protocolVersion=t};function y(e){return e instanceof s.default?e.toInt():"bigint"==typeof e?(0,s.int)(e).toInt():e}function b(e,t,r){return void 0===r&&(r=0),!1!==t&&e in t?y(t[e]):r}r.ServerInfo=_;r.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},r.default=i},{"./integer":76}],96:[function(e,t,r){"use strict";function s(e){console.log("Uncaught error when processing result: "+e)}function a(e){}function u(e){}var c=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},l=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=(Object.defineProperty(r,"__esModule",{value:!0}),n(e("./result-summary"))),f=e("./internal"),h=e("./error"),p=f.connectionHolder.EMPTY_CONNECTION_HOLDER;function o(e,t,r,n,o){var i;void 0===o&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this._stack=null==(i=new Error("")).stack?null:i.stack.replace(/^Error(\n\r)*/,""),this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=null!=r?r:{},this._connectionHolder=null!=n?n:p,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}o.prototype.keys=function(){var n=this;return null!==this._keys?Promise.resolve(this._keys):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){return e.subscribe(n._decorateObserver({onKeys:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},o.prototype.summary=function(){var n=this;return null!==this._summary?Promise.resolve(this._summary):null!==this._error?Promise.reject(this._error):new Promise(function(t,r){n._streamObserverPromise.then(function(e){e.cancel(),e.subscribe(n._decorateObserver({onCompleted:function(e){return t(e)},onError:function(e){return r(e)}}))}).catch(r)})},o.prototype._getOrCreatePromise=function(){var e=this;return null==this._p&&(this._p=new Promise(function(t,r){var n=[];e.subscribe({onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},o.prototype[Symbol.asyncIterator]=function(){var e,n=this;if(!this.isOpen())return e=(0,h.newError)("Result is already consumed"),{next:function(){return Promise.reject(e)},peek:function(){return Promise.reject(e)}};function o(){return c(n,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return void 0!==s.queuedObserver?[3,2]:(s.queuedObserver=this._createQueuedResultObserver(r),t=s,[4,this._subscribe(s.queuedObserver,!0).catch(function(){})]);case 1:t.streaming=e.sent(),r(),e.label=2;case 2:return[2,s.queuedObserver]}})})}function i(e){if(void 0===e)throw(0,h.newError)("InvalidState: Result stream finished without Summary",h.PROTOCOL_ERROR);return 1}var s={paused:!0,firstRun:!0,finished:!1},r=function(){var e,t;null!=s.streaming&&(e=(t=null!=(t=null==(t=s.queuedObserver)?void 0:t.size)?t:0)>=n._watermarks.high,t=t<=n._watermarks.low,e&&!s.paused?(s.paused=!0,s.streaming.pause()):(t&&s.paused||s.firstRun&&!e)&&(s.firstRun=!1,s.paused=!1,s.streaming.resume()))};return{next:function(){return c(n,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return s.finished&&i(s.summary)?[2,{done:!0,value:s.summary}]:[4,o()];case 1:return[4,e.sent().dequeue()];case 2:return!0===(t=e.sent()).done&&(s.finished=t.done,s.summary=t.value),[2,t]}})})},return:function(r){return c(n,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return s.finished&&i(s.summary)?[2,{done:!0,value:null!=r?r:s.summary}]:(null!=(t=s.streaming)&&t.cancel(),[4,o()]);case 1:return[4,e.sent().dequeueUntilDone()];case 2:return t=e.sent(),s.finished=!0,t.value=null!=r?r:t.value,s.summary=t.value,[2,t]}})})},peek:function(){return c(n,void 0,void 0,function(){return l(this,function(e){switch(e.label){case 0:return s.finished&&i(s.summary)?[2,{done:!0,value:s.summary}]:[4,o()];case 1:return[4,e.sent().head()];case 2:return[2,e.sent()]}})})}}},o.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},o.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},o.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},o.prototype.subscribe=function(e){this._subscribe(e).catch(function(){})},o.prototype.isOpen=function(){return null===this._summary&&null===this._error},o.prototype._subscribe=function(e,t){void 0===t&&(t=!1);var r=this._decorateObserver(e);return this._streamObserverPromise.then(function(e){return t&&e.pause(),e.subscribe(r),e}).catch(function(e){return null!=r.onError&&r.onError(e),Promise.reject(e)})},o.prototype._decorateObserver=function(n){var e,o=this,t=null!=(e=n.onCompleted)?e:a,i=null!=(e=n.onError)?e:s,r=null!=(e=n.onKeys)?e:u;return{onNext:null!=n.onNext?n.onNext.bind(n):void 0,onKeys:function(e){return o._keys=e,r.call(n,e)},onCompleted:function(e){o._releaseConnectionAndGetSummary(e).then(function(e){return null!==o._summary?t.call(n,o._summary):(o._summary=e,t.call(n,e))}).catch(i)},onError:function(r){o._connectionHolder.releaseConnection().then(function(){var e,t;e=r,null!=(t=o._stack)&&(e.stack=e.toString()+"\n"+t),o._error=r,i.call(n,r)}).catch(i)}}},o.prototype._cancel=function(){null===this._summary&&null===this._error&&this._streamObserverPromise.then(function(e){return e.cancel()}).catch(function(){})},o.prototype._releaseConnectionAndGetSummary=function(t){var e=f.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=e.validatedQuery,n=e.params,o=this._connectionHolder;return o.getConnection().then(function(t){return o.releaseConnection().then(function(){var e;return null==(e=null==t?void 0:t.protocol())?void 0:e.version})},function(e){}).then(function(e){return new i.default(r,n,t,e)})},o.prototype._createQueuedResultObserver=function(n){var e=this;function o(){var r={};return r.promise=new Promise(function(e,t){r.resolve=e,r.reject=t}),r}function i(e){return e instanceof Error}function r(){var r;return c(this,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:if(0<s.length){if(t=null!=(r=s.shift())?r:(0,h.newError)("Unexpected empty buffer",h.PROTOCOL_ERROR),n(),i(t))throw t;return[2,t]}return a.resolvable=o(),[4,a.resolvable.promise];case 1:return[2,e.sent()]}})})}var s=[],a={resolvable:null},t={onNext:function(e){t._push({done:!1,value:e})},onCompleted:function(e){t._push({done:!0,value:e})},onError:function(e){t._push(e)},_push:function(e){var t;null!==a.resolvable?(t=a.resolvable,a.resolvable=null,i(e)?t.reject(e):t.resolve(e)):(s.push(e),n())},dequeue:r,dequeueUntilDone:function(){return c(e,void 0,void 0,function(){var t;return l(this,function(e){switch(e.label){case 0:return[4,r()];case 1:return!0===(t=e.sent()).done?[2,t]:[3,0];case 2:return[2]}})})},head:function(){return c(e,void 0,void 0,function(){var t,r;return l(this,function(e){switch(e.label){case 0:if(0<s.length){if(i(t=s[0]))throw t;return[2,t]}a.resolvable=o(),e.label=1;case 1:return e.trys.push([1,3,4,5]),[4,a.resolvable.promise];case 2:return t=e.sent(),s.unshift(t),[2,t];case 3:throw r=e.sent(),s.unshift(r),r;case 4:return n(),[7];case 5:return[2]}})})},get size(){return s.length}};return t},Symbol.toStringTag,r.default=o},{"./error":73,"./internal":80,"./result-summary":95}],97:[function(e,t,r){"use strict";var u=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),e("./internal/observers")),l=e("./internal/util"),f=e("./internal/constants"),a=e("./error"),h=i(e("./result")),p=e("./internal/connection-holder"),d=e("./internal/transaction-executor"),_=e("./internal/bookmarks"),y=e("./internal/tx-config"),b=i(e("./transaction-promise")),m=i(e("./transaction-managed"));function v(e){var t=e.mode,r=e.connectionProvider,n=e.bookmarks,o=e.database,i=e.config,s=e.reactive,a=e.fetchSize,u=e.impersonatedUser,e=e.bookmarkManager,t=(this._mode=t,this._database=o,this._reactive=s,this._fetchSize=a,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new p.ConnectionHolder({mode:f.ACCESS_MODE_READ,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks}),this._writeConnectionHolder=new p.ConnectionHolder({mode:f.ACCESS_MODE_WRITE,database:o,bookmarks:n,connectionProvider:r,impersonatedUser:u,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks}),this._open=!0,this._hasTx=!1,this._impersonatedUser=u,this._lastBookmarks=null!=n?n:_.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(e){e=null!=(e=null==e?void 0:e.maxTransactionRetryTime)?e:null;return new d.TransactionExecutor(e)}(i),this._databaseNameResolved=""!==this._database,this._calculateWatermaks());this._lowRecordWatermark=t.low,this._highRecordWatermark=t.high,this._results=[],this._bookmarkManager=e}v.prototype.run=function(e,t,r){var o=this,e=(0,l.validateQueryAndParameters)(e,t),i=e.validatedQuery,s=e.params,a=null!=r?new y.TxConfig(r):y.TxConfig.empty(),t=this._run(i,s,function(n){return u(o,void 0,void 0,function(){var t,r=this;return c(this,function(e){switch(e.label){case 0:return[4,this._bookmarks()];case 1:return t=e.sent(),this._assertSessionIsOpen(),[2,n.protocol().run(i,s,{bookmarks:t,txConfig:a,mode:this._mode,database:this._database,impersonatedUser:this._impersonatedUser,afterComplete:function(e){return r._onCompleteCallback(e,t)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark})]}})})});return this._results.push(t),t},v.prototype._run=function(e,t,r){var n=this._connectionHolderWithMode(this._mode),o=this._open?!this._hasTx&&n.initializeConnection()?n.getConnection().then(function(e){return r(e)}).catch(function(e){return Promise.resolve(new s.FailedObserver({error:e}))}):Promise.resolve(new s.FailedObserver({error:(0,a.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new s.FailedObserver({error:(0,a.newError)("Cannot run query in a closed session.")})),i={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new h.default(o,e,t,n,i)},v.prototype._acquireConnection=function(t){var e=this,r=this._connectionHolderWithMode(this._mode),n=this._open?!this._hasTx&&r.initializeConnection()?r.getConnection().then(function(e){return t(e)}).then(function(t){return u(e,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,r.releaseConnection()];case 1:return e.sent(),[2,t]}})})}):Promise.reject((0,a.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,a.newError)("Cannot run query in a closed session."));return n},v.prototype.beginTransaction=function(e){var t=y.TxConfig.empty();return null!=e&&(t=new y.TxConfig(e)),this._beginTransaction(this._mode,t)},v.prototype._beginTransaction=function(e,t){var n=this;if(!this._open)throw(0,a.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,a.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");e=v._validateSessionMode(e),e=this._connectionHolderWithMode(e),e.initializeConnection(),this._hasTx=!0,e=new b.default({connectionHolder:e,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(e,t,r){return n._updateBookmarks(e,t,r)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark});return e._begin(function(){return n._bookmarks()},t),e},v.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,a.newError)("You cannot run more transactions on a closed session.")},v.prototype._transactionClosed=function(){this._hasTx=!1},v.prototype.lastBookmark=function(){return this.lastBookmarks()},v.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},v.prototype._bookmarks=function(){var r;return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,null==(r=this._bookmarkManager)?void 0:r.getAllBookmarks()];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new _.Bookmarks(o(o([],n(t),!1),n(this._configuredBookmarks),!1))]}})})},v.prototype.readTransaction=function(e,t){t=new y.TxConfig(t);return this._runTransaction(f.ACCESS_MODE_READ,t,e)},v.prototype.writeTransaction=function(e,t){t=new y.TxConfig(t);return this._runTransaction(f.ACCESS_MODE_WRITE,t,e)},v.prototype._runTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(e,t)},r)},v.prototype.executeRead=function(e,t){t=new y.TxConfig(t);return this._executeInTransaction(f.ACCESS_MODE_READ,t,e)},v.prototype.executeWrite=function(e,t){t=new y.TxConfig(t);return this._executeInTransaction(f.ACCESS_MODE_WRITE,t,e)},v.prototype._executeInTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(e,t)},r,m.default.fromTransaction)},v.prototype._onDatabaseNameResolved=function(e){this._databaseNameResolved||(this._database=e=null!=e?e:"",this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0)},v.prototype._getConnectionAcquistionBookmarks=function(){var r;return u(this,void 0,void 0,function(){var t;return c(this,function(e){switch(e.label){case 0:return[4,null==(r=this._bookmarkManager)?void 0:r.getBookmarks("system")];case 1:return void 0===(t=e.sent())?[2,this._lastBookmarks]:[2,new _.Bookmarks(o(o([],n(this._configuredBookmarks),!1),n(t),!1))]}})})},v.prototype._updateBookmarks=function(e,t,r){var n;null==e||e.isEmpty()||(null!=(n=this._bookmarkManager)&&n.updateBookmarks(null!=r?r:this._database,null!=(n=null==t?void 0:t.values())?n:[],null!=(r=null==e?void 0:e.values())?r:[]),this._lastBookmarks=e,this._configuredBookmarks=_.Bookmarks.empty())},v.prototype.close=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return this._open?(this._open=!1,this._results.forEach(function(e){return e._cancel()}),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return e.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},v.prototype._connectionHolderWithMode=function(e){if(e===f.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===f.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,a.newError)("Unknown access mode: "+e)},v.prototype._onCompleteCallback=function(e,t){this._updateBookmarks(new _.Bookmarks(e.bookmark),t,e.db)},v.prototype._calculateWatermaks=function(){return this._fetchSize===f.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},v._validateSessionMode=function(e){e=null!=e?e:f.ACCESS_MODE_WRITE;if(e!==f.ACCESS_MODE_READ&&e!==f.ACCESS_MODE_WRITE)throw(0,a.newError)("Illegal session mode "+e);return e},r.default=v},{"./error":73,"./internal/bookmarks":77,"./internal/connection-holder":78,"./internal/constants":79,"./internal/observers":83,"./internal/transaction-executor":89,"./internal/tx-config":90,"./internal/util":92,"./result":96,"./transaction-managed":100,"./transaction-promise":101}],98:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPoint=r.Point=void 0;var o=e("./internal/util"),n="__isPoint__",e=(i.prototype.toString=function(){return null==this.z||isNaN(this.z)?"Point{srid=".concat(s(this.srid),", x=").concat(s(this.x),", y=").concat(s(this.y),"}"):"Point{srid=".concat(s(this.srid),", x=").concat(s(this.x),", y=").concat(s(this.y),", z=").concat(s(this.z),"}")},i);function i(e,t,r,n){this.srid=(0,o.assertNumberOrInteger)(e,"SRID"),this.x=(0,o.assertNumber)(t,"X coordinate"),this.y=(0,o.assertNumber)(r,"Y coordinate"),this.z=null==n?n:(0,o.assertNumber)(n,"Z coordinate"),Object.freeze(this)}function s(e){return Number.isInteger(e)?e.toString()+".0":e.toString()}r.Point=e,Object.defineProperty(e.prototype,n,{value:!0,enumerable:!1,configurable:!1,writable:!1}),r.isPoint=function(e){return null!=e&&!0===e[n]}},{"./internal/util":92}],99:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&("get"in o?t.__esModule:!o.writable&&!o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},l=(Object.defineProperty(r,"__esModule",{value:!0}),r.isDateTime=r.DateTime=r.isLocalDateTime=r.LocalDateTime=r.isDate=r.Date=r.isTime=r.Time=r.isLocalTime=r.LocalTime=r.isDuration=r.Duration=void 0,i(e("./internal/temporal-util"))),f=e("./internal/util"),h=e("./error"),s=i(e("./integer")),i={value:!0,enumerable:!1,configurable:!1,writable:!1},a="__isDuration__",u="__isLocalTime__",p="__isTime__",d="__isDate__",_="__isLocalDateTime__",y="__isDateTime__",e=(b.prototype.toString=function(){return l.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},b);function b(e,t,r,n){this.months=(0,f.assertNumberOrInteger)(e,"Months"),this.days=(0,f.assertNumberOrInteger)(t,"Days"),(0,f.assertNumberOrInteger)(r,"Seconds"),(0,f.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=l.normalizeSecondsForDuration(r,n),this.nanoseconds=l.normalizeNanosecondsForDuration(n),Object.freeze(this)}r.Duration=e,Object.defineProperty(e.prototype,a,i),r.isDuration=function(e){return E(e,a)};m.fromStandardDate=function(e,t){S(e,t);t=l.totalNanoseconds(e,t);return new m(e.getHours(),e.getMinutes(),e.getSeconds(),t instanceof s.default?t.toInt():"bigint"==typeof t?(0,s.int)(t).toInt():t)},m.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)};e=m;function m(e,t,r,n){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),Object.freeze(this)}r.LocalTime=e,Object.defineProperty(e.prototype,u,i),r.isLocalTime=function(e){return E(e,u)};v.fromStandardDate=function(e,t){return S(e,t),new v(e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e))},v.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)};e=v;function v(e,t,r,n,o){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,f.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}r.Time=e,Object.defineProperty(e.prototype,p,i),r.isTime=function(e){return E(e,p)};g.fromStandardDate=function(e){return S(e),new g(e.getFullYear(),e.getMonth()+1,e.getDate())},g.prototype.toStandardDate=function(){return l.isoStringToStandardDate(this.toString())},g.prototype.toString=function(){return l.dateToIsoString(this.year,this.month,this.day)};e=g;function g(e,t,r){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),Object.freeze(this)}r.Date=e,Object.defineProperty(e.prototype,d,i),r.isDate=function(e){return E(e,d)};w.fromStandardDate=function(e,t){return S(e,t),new w(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)))},w.prototype.toStandardDate=function(){return l.isoStringToStandardDate(this.toString())},w.prototype.toString=function(){return T(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)};e=w;function w(e,t,r,n,o,i,s){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s),Object.freeze(this)}r.LocalDateTime=e,Object.defineProperty(e.prototype,_,i),r.isLocalDateTime=function(e){return E(e,_)};O.fromStandardDate=function(e,t){return S(e,t),new O(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e),null)},O.prototype.toStandardDate=function(){return l.toStandardDate(this._toUTC())},O.prototype.toString=function(){var e;return T(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(null!=this.timeZoneOffsetSeconds?l.timeZoneOffsetToIsoString(null!=(e=this.timeZoneOffsetSeconds)?e:0):"")+(null!=this.timeZoneId?"[".concat(this.timeZoneId,"]"):"")},O.prototype._toUTC=function(){if(void 0===this.timeZoneOffsetSeconds)throw new Error("Requires DateTime created with time zone offset");var e=l.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract(null!=(e=this.timeZoneOffsetSeconds)?e:0);return(0,s.int)(e).multiply(1e3).add((0,s.int)(this.nanosecond).div(1e6)).toNumber()};e=O;function O(e,t,r,n,o,i,s,a,u){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s);e=c(function(e,t){var r=null!=e,n=null!=t&&""!==t;if(!r&&!n)throw(0,h.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(e," and id: ").concat(t));var o=[void 0,void 0];r&&((0,f.assertNumberOrInteger)(e,"Time zone offset in seconds"),o[0]=e);n&&((0,f.assertString)(t,"Time zone ID"),l.assertValidZoneId("Time zone ID",t),o[1]=t);return o}(a,u),2),t=e[0],r=e[1];this.timeZoneOffsetSeconds=t,this.timeZoneId=null!=r?r:void 0,Object.freeze(this)}function E(e,t){return null!=e&&!0===e[t]}function T(e,t,r,n,o,i,s){return l.dateToIsoString(e,t,r)+"T"+l.timeToIsoString(n,o,i,s)}function S(e,t){(0,f.assertValidDate)(e,"Standard date"),null!=t&&(0,f.assertNumberOrInteger)(t,"Nanosecond")}r.DateTime=e,Object.defineProperty(e.prototype,y,i),r.isDateTime=function(e){return E(e,y)}},{"./error":73,"./integer":76,"./internal/temporal-util":88,"./internal/util":92}],100:[function(e,t,r){"use strict";function n(e){e=e.run;this._run=e}Object.defineProperty(r,"__esModule",{value:!0}),n.fromTransaction=function(e){return new n({run:e.run.bind(e)})},n.prototype.run=function(e,t){return this._run(e,t)},r.default=n},{}],101:[function(e,t,r){"use strict";var n,c,l,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=(Object.defineProperty(r,"__esModule",{value:!0}),s(e("./transaction"))),e=(l=s.default,o(a,l),a.prototype.then=function(e,t){return this._getOrCreateBeginPromise().then(e,t)},a.prototype.catch=function(e){return this._getOrCreateBeginPromise().catch(e)},a.prototype.finally=function(e){return this._getOrCreateBeginPromise().finally(e)},a.prototype._getOrCreateBeginPromise=function(){var r=this;return null==this._beginPromise&&(this._beginPromise=new Promise(function(e,t){r._resolve=e,r._reject=t,null!=r._beginError&&t(r._beginError),null!=r._beginMetadata&&e(r._toTransaction())})),this._beginPromise},a.prototype._toTransaction=function(){return i(i({},this),{run:l.prototype.run.bind(this),commit:l.prototype.commit.bind(this),rollback:l.prototype.rollback.bind(this),close:l.prototype.close.bind(this),isOpen:l.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},a.prototype._begin=function(e,t){return l.prototype._begin.call(this,e,t,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},a.prototype._onBeginError=function(e){this._beginError=e,null!=this._reject&&this._reject(e)},a.prototype._onBeginMetadata=function(e){this._beginMetadata=null!=e?e:{},null!=this._resolve&&this._resolve(this._toTransaction())},a);function a(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,s=e.fetchSize,a=e.impersonatedUser,u=e.highRecordWatermark,e=e.lowRecordWatermark,t=l.call(this,{connectionHolder:t,onClose:r,onBookmarks:n,onConnection:o,reactive:i,fetchSize:s,impersonatedUser:a,highRecordWatermark:u,lowRecordWatermark:e})||this;return t[c]="TransactionPromise",t}c=Symbol.toStringTag,r.default=e},{"./transaction":102}],102:[function(e,t,r){"use strict";var a=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},u=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=(Object.defineProperty(r,"__esModule",{value:!0}),e("./internal/util")),s=e("./internal/connection-holder"),h=e("./internal/bookmarks"),p=e("./internal/tx-config"),d=e("./internal/observers"),_=e("./error"),c=n(e("./result"));function i(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmarks,o=e.onConnection,i=e.reactive,s=e.fetchSize,a=e.impersonatedUser,u=e.highRecordWatermark,e=e.lowRecordWatermark,c=this;this._connectionHolder=t,this._reactive=i,this._state=l.ACTIVE,this._onClose=r,this._onBookmarks=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=a,this._lowRecordWatermak=e,this._highRecordWatermark=u,this._bookmarks=h.Bookmarks.empty(),this._acceptActive=function(){},this._activePromise=new Promise(function(e,t){c._acceptActive=e})}i.prototype._begin=function(o,i,s){var t=this;this._connectionHolder.getConnection().then(function(n){return a(t,void 0,void 0,function(){var t,r=this;return u(this,function(e){switch(e.label){case 0:return(this._onConnection(),null==n)?[3,2]:(t=this,[4,o()]);case 1:return t._bookmarks=e.sent(),[2,n.protocol().beginTransaction({bookmarks:this._bookmarks,txConfig:i,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,beforeError:function(e){return null!=s&&s.onError(e),r._onError(e)},afterComplete:function(e){return null!=s&&s.onComplete(e),r._onComplete(e)}})];case 2:throw(0,_.newError)("No connection available")}})})}).catch(function(e){null!=s&&s.onError(e),t._onError(e).catch(function(){})}).finally(function(){return t._acceptActive()})},i.prototype.run=function(e,t){e=(0,o.validateQueryAndParameters)(e,t),t=e.validatedQuery,e=e.params,t=this._state.run(t,e,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(t),t},i.prototype.commit=function(){var t=this,r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(e){return t._onCompleteCallback(e,t._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},i.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},i.prototype.isOpen=function(){return this._state===l.ACTIVE},i.prototype.close=function(){return a(this,void 0,void 0,function(){return u(this,function(e){switch(e.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},i.prototype._onErrorCallback=function(){return this._state=l.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},i.prototype._onCompleteCallback=function(e,t){this._onBookmarks(new h.Bookmarks(null==e?void 0:e.bookmark),null!=t?t:h.Bookmarks.empty(),null==e?void 0:e.db)};var l={ACTIVE:{commit:function(e){return{result:f(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:l.SUCCEEDED}},rollback:function(e){return{result:f(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults,e.preparationJob),state:l.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,o=e.onError,i=e.onComplete,s=e.onConnection,a=e.reactive,u=e.fetchSize,c=e.highRecordWatermark,l=e.lowRecordWatermark,e=e.preparationJob,f=null!=e?e:Promise.resolve();return y(n.getConnection().then(function(e){return f.then(function(){return e})}).then(function(e){if(s(),null!=e)return e.protocol().run(t,r,{bookmarks:h.Bookmarks.empty(),txConfig:p.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:a,fetchSize:u,highRecordWatermark:c,lowRecordWatermark:l});throw(0,_.newError)("No connection available")}).catch(function(e){return new d.FailedObserver({error:e,onError:o})}),t,r,n,c,l)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new d.FailedObserver({error:(0,_.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t,0,0),state:l.FAILED}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:y(new d.CompletedObserver,"ROLLBACK",{},t,0,0),state:l.FAILED}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new d.FailedObserver({error:(0,_.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,t,n,0,0)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new d.FailedObserver({error:(0,_.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:l.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new d.FailedObserver({error:(0,_.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{},s.EMPTY_CONNECTION_HOLDER,0,0),state:l.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new d.FailedObserver({error:(0,_.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,t,n,0,0)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new d.FailedObserver({error:(0,_.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t,0,0),state:l.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:y(new d.FailedObserver({error:(0,_.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t,0,0),state:l.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new d.FailedObserver({error:(0,_.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,t,n,0,0)}}};function f(r,e,n,o,i,s,t){var a=null!=t?t:Promise.resolve(),t=e.getConnection().then(function(e){return a.then(function(){return e})}).then(function(t){return i(),s.forEach(function(e){return e._cancel()}),Promise.all(s.map(function(e){return e.summary()})).then(function(e){if(null!=t)return r?t.protocol().commitTransaction({beforeError:n,afterComplete:o}):t.protocol().rollbackTransaction({beforeError:n,afterComplete:o});throw(0,_.newError)("No connection available")})}).catch(function(e){return new d.FailedObserver({error:e,onError:n})});return new c.default(t,r?"COMMIT":"ROLLBACK",{},e,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function y(e,t,r,n,o,i){return void 0===n&&(n=s.EMPTY_CONNECTION_HOLDER),new c.default(Promise.resolve(e),t,r,new s.ReadOnlyConnectionHolder(null!=n?n:s.EMPTY_CONNECTION_HOLDER),{low:i,high:o})}r.default=i},{"./error":73,"./internal/bookmarks":77,"./internal/connection-holder":78,"./internal/observers":83,"./internal/tx-config":90,"./internal/util":92,"./result":96}],103:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],104:[function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},i=this&&this.__generator||function(n,o){var i,s,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(r){return function(e){var t=[r,e];if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,s&&(a=2&t[0]?s.return:t[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,t[1])).done)return a;switch(s=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return u.label++,{value:t[1],done:!1};case 5:u.label++,s=t[1],t=[0];continue;case 7:t=u.ops.pop(),u.trys.pop();continue;default:if(!(a=0<(a=u.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){u=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){u.label=t[1];break}if(6===t[0]&&u.label<a[1]){u.label=a[1],a=t;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(t);break}a[2]&&u.ops.pop(),u.trys.pop();continue}t=o.call(n,u)}catch(e){t=[6,e],s=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},n=(Object.defineProperty(r,"__esModule",{value:!0}),r.bookmarkManager=r.Connection=r.ConnectionProvider=r.DateTime=r.LocalDateTime=r.Date=r.Time=r.LocalTime=r.Duration=r.Point=r.TransactionPromise=r.ManagedTransaction=r.Transaction=r.Session=r.ServerInfo=r.Notification=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Integer=r.Path=r.PathSegment=r.UnboundRelationship=r.Relationship=r.Node=r.ResultSummary=r.Record=r.Result=r.Driver=r.temporal=r.spatial=r.error=r.session=r.types=r.logging=r.auth=r.isRetriableError=r.Neo4jError=r.integer=r.isDateTime=r.isLocalDateTime=r.isDate=r.isTime=r.isLocalTime=r.isDuration=r.isPoint=r.isInt=r.int=r.hasReachableServer=r.driver=void 0,n(e("./version"))),s=e("./logging"),l=(Object.defineProperty(r,"logging",{enumerable:!0,get:function(){return s.logging}}),e("neo4j-driver-core")),f=(Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return l.Neo4jError}}),Object.defineProperty(r,"isRetriableError",{enumerable:!0,get:function(){return l.isRetriableError}}),Object.defineProperty(r,"error",{enumerable:!0,get:function(){return l.error}}),Object.defineProperty(r,"Integer",{enumerable:!0,get:function(){return l.Integer}}),Object.defineProperty(r,"int",{enumerable:!0,get:function(){return l.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return l.isInt}}),Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return l.Point}}),Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return l.Time}}),Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(r,"Record",{enumerable:!0,get:function(){return l.Record}}),Object.defineProperty(r,"ResultSummary",{enumerable:!0,get:function(){return l.ResultSummary}}),Object.defineProperty(r,"Result",{enumerable:!0,get:function(){return l.Result}}),Object.defineProperty(r,"ConnectionProvider",{enumerable:!0,get:function(){return l.ConnectionProvider}}),Object.defineProperty(r,"Driver",{enumerable:!0,get:function(){return l.Driver}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return l.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return l.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return l.QueryStatistics}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return l.Notification}}),Object.defineProperty(r,"Session",{enumerable:!0,get:function(){return l.Session}}),Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return l.Transaction}}),Object.defineProperty(r,"ManagedTransaction",{enumerable:!0,get:function(){return l.ManagedTransaction}}),Object.defineProperty(r,"TransactionPromise",{enumerable:!0,get:function(){return l.TransactionPromise}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return l.ServerInfo}}),Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return l.Connection}}),Object.defineProperty(r,"auth",{enumerable:!0,get:function(){return l.auth}}),Object.defineProperty(r,"bookmarkManager",{enumerable:!0,get:function(){return l.bookmarkManager}}),e("neo4j-driver-bolt-connection")),e=l.driver.READ,a=l.driver.WRITE,u=l.internal.util,h=u.ENCRYPTION_ON,p=u.assertString,d=u.isEmptyObjectOrNull,_=l.internal.serverAddress.ServerAddress,y=l.internal.urlUtil;function c(e,o,t){void 0===t&&(t={}),p(e,"Bolt URL");var r,n,i=y.parseDatabaseUrl(e),s=!1,a=!1;switch(i.scheme){case"bolt":break;case"bolt+s":a=!0,n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":a=!0,n="TRUST_ALL_CERTIFICATES";break;case"neo4j":s=!0;break;case"neo4j+s":n="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",s=a=!0;break;case"neo4j+ssc":n="TRUST_ALL_CERTIFICATES",s=a=!0;break;default:throw new Error("Unknown scheme: ".concat(null!=(r=i.scheme)?r:"null"))}if(a){if("encrypted"in t||"trust"in t)throw new Error("Encryption/trust can only be configured either through URL or config, not both");t.encrypted=h,t.trust=n}(o=null!=o?o:{}).scheme=null!=(c=o.scheme)?c:"none",t.userAgent=null!=(c=t.userAgent)?c:m;var u=_.fromUrl(i.hostAndPort),c={address:u,typename:s?"Routing":"Direct",routing:s};return new l.Driver(c,t,function(){{if(s)return function(e,t,r,n){return new f.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authToken:o,address:u,userAgent:t.userAgent,routingContext:i.query})};if(d(i.query))return function(e,t,r){return new f.DirectConnectionProvider({id:e,config:t,log:r,authToken:o,address:u,userAgent:t.userAgent})};throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(e,"'"))}}())}function b(r,n){return o(this,void 0,void 0,function(){var t;return i(this,function(e){switch(e.label){case 0:t=c(r,{scheme:"none",principal:"",credentials:""},n),e.label=1;case 1:return e.trys.push([1,,3,5]),[4,t.getNegotiatedProtocolVersion()];case 2:return e.sent(),[2,!0];case 3:return[4,t.close()];case 4:return e.sent(),[7];case 5:return[2]}})})}r.driver=c,r.hasReachableServer=b;var m="neo4j-javascript/"+n.default,u={Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,PathSegment:l.PathSegment,Path:l.Path,Result:l.Result,ResultSummary:l.ResultSummary,Record:l.Record,Point:l.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Integer:l.Integer},n=(r.types=u,{READ:e,WRITE:a}),e=(r.session=n,{toNumber:l.toNumber,toString:l.toString,inSafeRange:l.inSafeRange}),a=(r.integer=e,{isPoint:l.isPoint}),v=(r.spatial=a,{isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime}),e=(r.temporal=v,{driver:c,hasReachableServer:b,int:l.int,isInt:l.isInt,isPoint:l.isPoint,isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime,integer:e,Neo4jError:l.Neo4jError,isRetriableError:l.isRetriableError,auth:l.auth,logging:s.logging,types:u,session:n,error:l.error,spatial:a,temporal:v,Driver:l.Driver,Result:l.Result,Record:l.Record,ResultSummary:l.ResultSummary,Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,PathSegment:l.PathSegment,Path:l.Path,Integer:l.Integer,Plan:l.Plan,ProfiledPlan:l.ProfiledPlan,QueryStatistics:l.QueryStatistics,Notification:l.Notification,ServerInfo:l.ServerInfo,Session:l.Session,Transaction:l.Transaction,ManagedTransaction:l.ManagedTransaction,TransactionPromise:l.TransactionPromise,Point:l.Point,Duration:l.Duration,LocalTime:l.LocalTime,Time:l.Time,Date:l.Date,LocalDateTime:l.LocalDateTime,DateTime:l.DateTime,ConnectionProvider:l.ConnectionProvider,Connection:l.Connection,bookmarkManager:l.bookmarkManager});r.default=e},{"./logging":105,"./version":106,"neo4j-driver-bolt-connection":51,"neo4j-driver-core":75}],105:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logging=void 0,r.logging={console:function(e){return{level:e,logger:function(e,t){return console.log("".concat(Date.now()," ").concat(e.toUpperCase()," ").concat(t))}}}}},{}],106:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="5.2.0"},{}],107:[function(e,t,r){"use strict";r.byteLength=function(e){var e=l(e),t=e[0],e=e[1];return 3*(t+e)/4-e},r.toByteArray=function(e){var t,r,n=l(e),o=n[0],n=n[1],i=new c(function(e,t){return 3*(e+t)/4-t}(o,n)),s=0,a=0<n?o-4:o;for(r=0;r<a;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,i[s++]=255&t);1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t);return i},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(function(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return o.join("")}(e,i,s<i+16383?s:i+16383));1==n?(t=e[r-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=n.length;o<i;++o)a[o]=n[o],u[n.charCodeAt(o)]=o;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("="),t=(e=-1===e?t:e)===t?0:4-e%4;return[e,t]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],108:[function(j,e,N){!function(e){!function(){"use strict";var T=j("base64-js"),i=j("ieee754"),t=(N.Buffer=f,N.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},N.INSPECT_MAX_BYTES=50,2147483647);function u(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=f.prototype,e}function f(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return s(e)}function n(e,t,r){if("string"==typeof e){var n=e,o=t;if(!f.isEncoding(o="string"==typeof o&&""!==o?o:"utf8"))throw new TypeError("Unknown encoding: "+o);var i=0|h(n,o),s=u(i);return s=(n=s.write(n,o))!==i?s.slice(0,n):s}if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(k(e,ArrayBuffer)||e&&k(e.buffer,ArrayBuffer)){o=e,i=t,n=r;if(i<0||o.byteLength<i)throw new RangeError('"offset" is outside of buffer bounds');if(o.byteLength<i+(n||0))throw new RangeError('"length" is outside of buffer bounds');return(o=void 0===i&&void 0===n?new Uint8Array(o):void 0===n?new Uint8Array(o,i):new Uint8Array(o,i,n)).__proto__=f.prototype,o}if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');s=e.valueOf&&e.valueOf();if(null!=s&&s!==e)return f.from(s,t,r);var a=function(e){{var t,r;if(f.isBuffer(e))return t=0|l(e.length),0===(r=u(t)).length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||R(e.length)?u(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(a)return a;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function o(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function s(e){return o(e),u(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=u(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function h(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||k(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return P(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return C(e).length;default:if(o)return n?-1:P(e).length;t=(""+t).toLowerCase(),o=!0}}function r(e,t,r){var n,o=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":var i=this,s=t,a=r,u=i.length;(!a||a<0||u<a)&&(a=u);for(var c="",l=s=!s||s<0?0:s;l<a;++l)c+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(i[l]);return c;case"utf8":case"utf-8":return S(this,t,r);case"ascii":var f=this,u=t,h=r,p="";h=Math.min(f.length,h);for(var d=u;d<h;++d)p+=String.fromCharCode(127&f[d]);return p;case"latin1":case"binary":var _=this,s=t,y=r,b="";y=Math.min(_.length,y);for(var m=s;m<y;++m)b+=String.fromCharCode(_[m]);return b;case"base64":return v=this,n=r,0===(g=t)&&n===v.length?T.fromByteArray(v):T.fromByteArray(v.slice(g,n));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":for(var v=t,g=r,w=this.slice(v,g),O="",E=0;E<w.length;E+=2)O+=String.fromCharCode(w[E]+256*w[E+1]);return O;default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0}}function a(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function p(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=R(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:d(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):d(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function d(e,t,r,n,o){var i=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=r;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var f=!0,h=0;h<a;h++)if(u(e,l+h)!==u(t,h)){f=!1;break}if(f)return l}return-1}function y(e,t,r,n){return I(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return I(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(t,e.length-r),e,r,n)}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],l=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}var h=n,p=h.length;if(p<=m)return String.fromCharCode.apply(String,h);for(var d="",_=0;_<p;)d+=String.fromCharCode.apply(String,h.slice(_,_+=m));return d}N.kMaxLength=t,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=n,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,r){return t=t,r=r,o(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)},f.allocUnsafe=s,f.allocUnsafeSlow=s,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(k(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),k(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var r=f.allocUnsafe(t),n=0,o=0;o<e.length;++o){var i=e[o];if(k(i,Uint8Array)&&(i=f.from(i)),!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},f.byteLength=h,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)a(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)a(this,t,t+3),a(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)a(this,t,t+7),a(this,t+1,t+6),a(this,t+2,t+5),a(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):r.apply(this,arguments)},f.prototype.equals=function(e){if(f.isBuffer(e))return this===e||0===f.compare(this,e);throw new TypeError("Argument must be a Buffer")},f.prototype.inspect=function(){var e="",t=N.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,r,n,o){if(k(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return p(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return p(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u=!1;;)switch(n){case"hex":var c=this,l=e,f=t,h=r,p=(f=Number(f)||0,c.length-f);(!h||p<(h=Number(h)))&&(h=p),(p=l.length)/2<h&&(h=p/2);for(var d=0;d<h;++d){var _=parseInt(l.substr(2*d,2),16);if(R(_))return d;c[f+d]=_}return d;case"utf8":case"utf-8":return p=t,a=r,I(P(e,(s=this).length-p),s,p,a);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return y(this,e,t,r);case"base64":return s=this,a=t,i=r,I(C(e),s,a,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function _(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function v(e,t,r,n,o,i){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function g(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function w(e,t,r,n,o){return t=+t,r>>>=0,o||g(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function O(e,t,r,n,o){return t=+t,r>>>=0,o||g(e,0,r,8),i.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){var r=this.length,r=((e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e),this.subarray(e,t));return r.__proto__=f.prototype,r},f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},f.prototype.readUInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||_(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||_(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},f.prototype.readInt8=function(e,t){return e>>>=0,t||_(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||_(e,2,this.length);t=this[e]|this[e+1]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt16BE=function(e,t){e>>>=0,t||_(e,2,this.length);t=this[e+1]|this[e]<<8;return 32768&t?4294901760|t:t},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||_(e,4,this.length),i.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||_(e,8,this.length),i.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||v(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||v(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||v(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,r){return w(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return w(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;0<=i;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(e=o))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(i=t;i<r;++i)this[i]=e;else{var s=f.isBuffer(e)?e:f.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var E=/[^+/0-9A-Za-z-_]/g;function P(e,t){t=t||1/0;for(var r,n=e.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function C(e){return T.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(E,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function k(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function R(e){return e!=e}}.call(this)}.call(this,j("buffer").Buffer)},{"base64-js":107,buffer:108,ieee754:109}],109:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,o=e[t+f];for(f+=h,i=o&(1<<-l)-1,o>>=-l,l+=a;0<l;i=256*i+e[t+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;0<l;s=256*s+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(o?-1:1);s+=Math.pow(2,n),i-=c}return(o?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,l=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+l?f/n:f*Math.pow(2,1-l))*n&&(s++,n/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*n-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[r+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*i}},{}],110:[function(e,t,r){var n=e("buffer"),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,r),r.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=o(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:108}],111:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"==typeof t||n.isEncoding!==o&&o(e))return t||e;throw new Error("Unknown encoding: "+e)}function s(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=h,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t,r=this.lastTotal-this.lastNeed,n=(t=this,128!=(192&(n=e)[0])?(t.lastNeed=0,"�"):1<t.lastNeed&&1<n.length?128!=(192&n[1])?(t.lastNeed=1,"�"):2<t.lastNeed&&2<n.length&&128!=(192&n[2])?(t.lastNeed=2,"�"):void 0:void 0);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,r,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);t=e.toString("utf16le",t);if(t){var r=t.charCodeAt(t.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}function l(e){var t,e=e&&e.length?this.write(e):"";return this.lastNeed?(t=this.lastTotal-this.lastNeed,e+this.lastChar.toString("utf16le",0,t)):e}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"�":e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);if(0<=o)return 0<o&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if(0<=(o=a(t[n])))return 0<o&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if(0<=(o=a(t[n])))return 0<o&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":110}]},{},[104])(104)});