!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).neo4j=e()}(function(){return function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertTxConfigIsEmpty=r.assertDatabaseIsEmpty=void 0;var n=e("neo4j-driver-core");r.assertTxConfigIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e&&!e.isEmpty()){e=n.newError("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(e.message),r.onError(e),e}},r.assertDatabaseIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e){e=n.newError("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(e.message),r.onError(e),e}}},{"neo4j-driver-core":58}],2:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var f=e("./bolt-protocol-util"),o=e("../packstream"),h=n(e("./request-message")),p=e("./stream-observers"),n=e("neo4j-driver-core"),i=n.internal.bookmark.Bookmark,e=n.internal.constants,s=e.ACCESS_MODE_WRITE,a=e.BOLT_PROTOCOL_V1,u=(n.internal.logger.Logger,n.internal.txConfig.TxConfig),n=(Object.defineProperty(c.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),c.prototype.packer=function(){return this._packer},c.prototype.unpacker=function(){return this._unpacker},c.prototype.transformMetadata=function(e){return e},c.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new p.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(h.default.init(n,e),r,!0),r},c.prototype.prepareToClose=function(){},c.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.mode,s=t.beforeError,a=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("BEGIN",r?r.asBeginTransactionParameters():{},{bookmark:r,txConfig:n,database:o,mode:i,beforeError:s,afterError:a,beforeComplete:e,afterComplete:t,flush:!1})},c.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("COMMIT",{},{bookmark:i.empty(),txConfig:u.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t})},c.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("ROLLBACK",{},{bookmark:i.empty(),txConfig:u.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t})},c.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=(n.bookmark,n.txConfig),i=n.database,s=(n.mode,n.beforeKeys),a=n.afterKeys,u=n.beforeError,c=n.afterError,l=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new p.ResultStreamObserver({server:this._server,beforeKeys:s,afterKeys:a,beforeError:u,afterError:c,beforeComplete:l,afterComplete:r});return f.assertTxConfigIsEmpty(o,this._onProtocolError,r),f.assertDatabaseIsEmpty(i,this._onProtocolError,r),this.write(h.default.run(e,t),r,!1),this.write(h.default.pullAll(),r,n),r},c.prototype.reset=function(e){var t=void 0===e?{}:e,e=t.onError,t=t.onComplete,t=new p.ResetObserver({onProtocolError:this._onProtocolError,onError:e,onComplete:t});return this.write(h.default.reset(),t,!0),t},c.prototype._createPacker=function(e){return new o.v1.Packer(e)},c.prototype._createUnpacker=function(e,t){return new o.v1.Unpacker(e,t)},c.prototype.write=function(e,t,r){var n=this;this.queueObserverIfProtocolIsNotBroken(t)&&(this._log.isDebugEnabled()&&this._log.debug("C: "+e),this.packer().packStruct(e.signature,e.fields.map(function(e){return n.packer().packable(e)})),this._chunker.messageBoundary(),r&&this._chunker.flush())},c.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},c.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},c.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},c.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},c.prototype.isBroken=function(){return!!this._fatalError},c.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},c.prototype.resetFailure=function(){this._responseHandler._resetFailure()},c.prototype._onLoginCompleted=function(e,t){var r;e&&(r=e.server,this._server.version||(this._server.version=r)),t&&t(e)},c.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},c);function c(e,t,r,n,o,i){var s=void 0===r?{}:r,r=s.disableLosslessIntegers,s=s.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(r,s),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null}r.default=n},{"../packstream":42,"./bolt-protocol-util":1,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],3:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./bolt-protocol-v1")),u=i(e("../packstream")),c=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V2,o=(s=a.default,o(l,s),l.prototype._createPacker=function(e){return new u.default.Packer(e)},l.prototype._createUnpacker=function(e,t){return new u.default.Unpacker(e,t)},Object.defineProperty(l.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),l);function l(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"../packstream":42,"./bolt-protocol-v1":2,"neo4j-driver-core":58}],4:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a,u=s(e("./bolt-protocol-v2")),p=s(e("./request-message")),d=e("./bolt-protocol-util"),_=e("./stream-observers"),e=e("neo4j-driver-core"),c=(e.internal.bookmark.Bookmark,e.internal.constants.BOLT_PROTOCOL_V3),l=e.internal.txConfig.TxConfig,f="context",h=new _.StreamObserver,o=(a=u.default,o(y,a),Object.defineProperty(y.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),y.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},y.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new _.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(p.default.hello(n,e),r,!0),r},y.prototype.prepareToClose=function(){this.write(p.default.goodbye(),h,!0)},y.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.mode,s=t.beforeError,a=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new _.ResultStreamObserver({server:this._server,beforeError:s,afterError:a,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),d.assertDatabaseIsEmpty(o,this._onProtocolError,t),this.write(p.default.begin({bookmark:r,txConfig:n,mode:i}),t,!0),t},y.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new _.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(p.default.commit(),t,!0),t},y.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new _.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(p.default.rollback(),t,!0),t},y.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,a=n.mode,u=n.beforeKeys,c=n.afterKeys,l=n.beforeError,f=n.afterError,h=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new _.ResultStreamObserver({server:this._server,beforeKeys:u,afterKeys:c,beforeError:l,afterError:f,beforeComplete:h,afterComplete:r});return d.assertDatabaseIsEmpty(s,this._onProtocolError,r),this.write(p.default.runWithMetadata(e,t,{bookmark:o,txConfig:i,mode:a}),r,!1),this.write(p.default.pullAll(),r,n),r},y.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.sessionContext,n=void 0===r?{}:r,o=e.onError,r=e.onCompleted,n=this.run("CALL dbms.cluster.routing.getRoutingTable($context)",((e={})[f]=void 0===t?{}:t,e),i(i({},n),{txConfig:l.empty()}));return new _.ProcedureRouteObserver({resultObserver:n,onProtocolError:this._onProtocolError,onError:o,onCompleted:r})},y);function y(){return null!==a&&a.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-util":1,"./bolt-protocol-v2":3,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],5:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return a(t,e),t},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var l,c=c(e("./bolt-protocol-v3")),_=u(e("./request-message")),y=e("./stream-observers"),e=e("neo4j-driver-core"),f=(e.internal.bookmark.Bookmark,e.internal.constants.BOLT_PROTOCOL_V4_0),h=e.internal.txConfig.TxConfig,p="context",d="database",o=(l=c.default,o(b,l),Object.defineProperty(b.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),b.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.mode,s=t.beforeError,a=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new y.ResultStreamObserver({server:this._server,beforeError:s,afterError:a,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(_.default.begin({bookmark:r,txConfig:n,database:o,mode:i}),t,!0),t},b.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,a=n.mode,u=n.beforeKeys,c=n.afterKeys,l=n.beforeError,f=n.afterError,h=n.beforeComplete,p=n.afterComplete,d=n.flush,r=void 0===d||d,d=n.reactive,d=void 0!==d&&d,n=n.fetchSize,n=void 0===n?_.ALL:n,h=new y.ResultStreamObserver({server:this._server,reactive:d,fetchSize:n,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:u,afterKeys:c,beforeError:l,afterError:f,beforeComplete:h,afterComplete:p}),p=d;return this.write(_.default.runWithMetadata(e,t,{bookmark:o,txConfig:i,database:s,mode:a}),h,p&&r),d||this.write(_.default.pull({n:n}),h,r),h},b.prototype._requestMore=function(e,t,r){this.write(_.default.pull({stmtId:e,n:t}),r,!0)},b.prototype._requestDiscard=function(e,t){this.write(_.default.discard({stmtId:e}),t,!0)},b.prototype._noOp=function(){},b.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.databaseName,n=void 0===r?null:r,o=e.sessionContext,i=void 0===o?{}:o,r=e.onError,o=e.onCompleted,i=this.run("CALL dbms.routing.getRoutingTable($context, $database)",((e={})[p]=void 0===t?{}:t,e[d]=n,e),s(s({},i),{txConfig:h.empty()}));return new y.ProcedureRouteObserver({resultObserver:i,onProtocolError:this._onProtocolError,onError:r,onCompleted:o})},b);function b(){return null!==l&&l.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v3":4,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],6:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a,s=i(e("./bolt-protocol-v4x0")),u=i(e("./request-message")),c=e("./stream-observers"),l=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_1,o=(a=s.default,o(f,a),Object.defineProperty(f.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),f.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new c.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(u.default.hello(n,e,this._serversideRouting),r,!0),r},f);function f(e,t,r,n,o,i,s){i=a.call(this,e,t,r,n=void 0===n?function(){return null}:n,o,i)||this;return i._serversideRouting=s,i}r.default=o},{"./bolt-protocol-v4x0":5,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],7:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,i=i(e("./bolt-protocol-v4x1")),a=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_2,o=(s=i.default,o(u,s),Object.defineProperty(u.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),u);function u(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x1":6,"neo4j-driver-core":58}],8:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./bolt-protocol-v4x2")),u=i(e("./request-message")),c=e("./stream-observers"),e=e("neo4j-driver-core"),l=e.internal.bookmark.Bookmark,f=e.internal.constants.BOLT_PROTOCOL_V4_3,o=(s=a.default,o(h,s),Object.defineProperty(h.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),h.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=void 0===t?{}:t,n=e.databaseName,o=void 0===n?null:n,t=e.sessionContext,n=void 0===t?{}:t,t=e.onError,e=e.onCompleted,e=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:t,onCompleted:e}),n=n.bookmark||l.empty();return this.write(u.default.route(r,n.values(),o),e,!0),e},h);function h(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x2":7,"./request-message":12,"./stream-observers":15,"neo4j-driver-core":58}],9:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var f=e("neo4j-driver-core"),h=n(e("./bolt-protocol-v1")),p=n(e("./bolt-protocol-v2")),d=n(e("./bolt-protocol-v3")),_=n(e("./bolt-protocol-v4x0")),y=n(e("./bolt-protocol-v4x1")),b=n(e("./bolt-protocol-v4x2")),v=n(e("./bolt-protocol-v4x3")),m=n(e("./response-handler"));r.default=function(e){var t=void 0===e?{}:e,r=t.version,n=t.chunker,o=t.dechunker,i=t.channel,s=t.disableLosslessIntegers,a=t.useBigInt,u=t.serversideRouting,e=t.server,c=t.log,l=t.observer;return function(e,t,r,n,o,i,s,a){switch(e){case 1:return new h.default(t,r,n,i,a,s);case 2:return new p.default(t,r,n,i,a,s);case 3:return new d.default(t,r,n,i,a,s);case 4:return new _.default(t,r,n,i,a,s);case 4.1:return new y.default(t,r,n,i,a,s,o);case 4.2:return new b.default(t,r,n,i,a,s,o);case 4.3:return new v.default(t,r,n,i,a,s,o);default:throw f.newError("Unknown Bolt protocol version: "+e)}}(r,e,n,{disableLosslessIntegers:s,useBigInt:a},u,function(t){var r=new m.default({transformMetadata:t.transformMetadata.bind(t),log:c,observer:l});return i.onerror=l.onError.bind(l),i.onmessage=function(e){return o.write(e)},o.onmessage=function(e){r.handleResponse(t.unpacker().unpack(e))},r},l.onProtocolError.bind(l),c)}},{"./bolt-protocol-v1":2,"./bolt-protocol-v2":3,"./bolt-protocol-v3":4,"./bolt-protocol-v4x0":5,"./bolt-protocol-v4x1":6,"./bolt-protocol-v4x2":7,"./bolt-protocol-v4x3":8,"./response-handler":13,"neo4j-driver-core":58}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../channel"),i=e("neo4j-driver-core"),s=1616949271;function o(e,t){return{major:e,minor:t}}function a(){return function(e){if(4<e.length)throw i.newError("It should not have more than 4 versions of the protocol");var o=n.alloc(20);return o.writeInt32(s),e.forEach(function(e){var t,r,n;e instanceof Array?(r=(t=e[0]).major,n=t.minor,t=e[1].minor,o.writeInt32(n-t<<16|n<<8|r)):(r=e.major,n=e.minor,o.writeInt32(n<<8|r))}),o.reset(),o}([[o(4,3),o(4,2)],o(4,1),o(4,0),o(3,0)])}r.default=function(t){var o=this;return new Promise(function(r,n){function e(e){n(e)}t.onerror=e.bind(o),t._error&&e(t._error),t.onmessage=function(t){try{var e=function(e){if(72===(e=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()])[0]&&84===e[1]&&84===e[2]&&80===e[3])throw i.newError("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(e[3]+"."+e[2])}(t);r({protocolVersion:e,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(e){n(e)}},t.write(a())})}},{"../channel":26,"neo4j-driver-core":58}],11:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RawRoutingTable=r.BoltProtocol=void 0;var s=i(e("./handshake")),a=i(e("./create")),u=i(e("./bolt-protocol-v4x3")),i=i(e("./routing-table-raw"));o(e("./stream-observers"),r),r.BoltProtocol=u.default,r.RawRoutingTable=i.default,r.default={handshake:s.default,create:a.default}},{"./bolt-protocol-v4x3":8,"./create":9,"./handshake":10,"./routing-table-raw":14,"./stream-observers":15}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("neo4j-driver-core"),e=o.internal.constants,i=e.ACCESS_MODE_READ,n=e.FETCH_ALL,s=o.internal.util.assertString,e=(a.init=function(e,t){return new a(1,[e,t],function(){return"INIT "+e+" {...}"})},a.run=function(e,t){return new a(16,[e,t],function(){return"RUN "+e+" "+o.json.stringify(t)})},a.pullAll=function(){return l},a.reset=function(){return f},a.hello=function(e,t,r){void 0===r&&(r=null);t=Object.assign({user_agent:e},t);return r&&(t.routing=r),new a(1,[t],function(){return"HELLO {user_agent: '"+e+"', ...}"})},a.begin=function(e){var e=void 0===e?{}:e,t=u(e.bookmark,e.txConfig,e.database,e.mode);return new a(17,[t],function(){return"BEGIN "+o.json.stringify(t)})},a.commit=function(){return h},a.rollback=function(){return p},a.runWithMetadata=function(e,t,r){var r=void 0===r?{}:r,n=u(r.bookmark,r.txConfig,r.database,r.mode);return new a(16,[e,t,n],function(){return"RUN "+e+" "+o.json.stringify(t)+" "+o.json.stringify(n)})},a.goodbye=function(){return d},a.pull=function(e){var t=void 0===e?{}:e,e=t.stmtId,e=void 0===e?-1:e,t=t.n,r=c(null==e?-1:e,(void 0===t?n:t)||n);return new a(63,[r],function(){return"PULL "+o.json.stringify(r)})},a.discard=function(e){var t=void 0===e?{}:e,e=t.stmtId,e=void 0===e?-1:e,t=t.n,r=c(null==e?-1:e,(void 0===t?n:t)||n);return new a(47,[r],function(){return"DISCARD "+o.json.stringify(r)})},a.route=function(e,t,r){return new a(102,[e=void 0===e?{}:e,t=void 0===t?[]:t,r=void 0===r?null:r],function(){return"ROUTE "+o.json.stringify(e)+" "+o.json.stringify(t)+" "+r})},a);function a(e,t,r){this.signature=e,this.fields=t,this.toString=r}function u(e,t,r,n){var o={};return e.isEmpty()||(o.bookmarks=e.values()),t.timeout&&(o.tx_timeout=t.timeout),t.metadata&&(o.tx_metadata=t.metadata),r&&(o.db=s(r,"database")),n===i&&(o.mode="r"),o}function c(e,t){t={n:o.int(t)};return-1!==e&&(t.qid=o.int(e)),t}var l=new(r.default=e)(63,[],function(){return"PULL_ALL"}),f=new e(15,[],function(){return"RESET"}),h=new e(18,[],function(){return"COMMIT"}),p=new e(19,[],function(){return"ROLLBACK"}),d=new e(2,[],function(){return"GOODBYE"})},{"neo4j-driver-core":58}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("neo4j-driver-core");function n(){}function i(e){return e}var s={onNext:n,onCompleted:n,onError:n},e=(a.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+o.json.stringify(e)),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+o.json.stringify(e));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+o.json.stringify(e));try{var n=o.newError(t.message,t.code);this._currentFailure=this._observer.onErrorApplyTransformation(n),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+o.json.stringify(e));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError(o.newError("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError(o.newError("Unknown Bolt protocol message: "+e))}},a.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift()},a.prototype._queueObserver=function(e){return(e=e||s).onCompleted=e.onCompleted||n,e.onError=e.onError||n,e.onNext=e.onNext||n,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),!0},a.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},a.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},a.prototype._resetFailure=function(){this._currentFailure=null},a);function a(e){var t=void 0===e?{}:e,r=t.transformMetadata,e=t.log,t=t.observer;this._pendingObservers=[],this._log=e,this._transformMetadata=r||i,this._observer=Object.assign({onError:n,onFailure:n,onErrorApplyTransformation:i},t)}r.default=e},{"neo4j-driver-core":58}],14:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.ofRecord=function(e){return null===e?s.ofNull():new d(e)},s.ofMessageResponse=function(e){return null===e?s.ofNull():new u(e)},s.ofNull=function(){return new f},Object.defineProperty(s.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),s);function s(){}r.default=i;var a,u=(o(c,a=i),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),c);function c(e){var t=a.call(this)||this;return t._response=e,t}var l,f=(o(h,l=i),Object.defineProperty(h.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),h);function h(){return null!==l&&l.apply(this,arguments)||this}var p,d=(o(_,p=i),Object.defineProperty(_.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),_);function _(e){var t=p.call(this)||this;return t._record=e,t}},{}],15:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ProcedureRouteObserver=r.RouteObserver=r.CompletedObserver=r.FailedObserver=r.ResetObserver=r.LoginObserver=r.ResultStreamObserver=r.StreamObserver=void 0;var s=e("neo4j-driver-core"),h=e("./request-message"),a=i(e("./routing-table-raw")),u=s.error.PROTOCOL_ERROR,c=(l.prototype.onNext=function(e){},l.prototype.onError=function(e){},l.prototype.onCompleted=function(e){},l);function l(){}r.StreamObserver=c;var p,i=(o(f,p=c),f.prototype.onNext=function(e){var t=new s.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},f.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},f.prototype.onError=function(e){this._state.onError(this,e)},f.prototype.cancel=function(){this._discard=!0},f.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(S.STREAMING)},f.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(S.SUCCEEDED)},f.prototype.subscribe=function(e){if(this._error)e.onError(this._error);else{if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===S.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===S.READY&&this._handleStreaming()}},f.prototype._handleHasMore=function(e){this._setState(S.READY),this._handleStreaming(),delete e.has_more},f.prototype._handlePullSuccess=function(e){var t=this;this._setState(S.SUCCEEDED);var r=Object.assign(this._server?{server:this._server}:{},this._meta,e),n=null;this._beforeComplete&&(n=this._beforeComplete(r));e=function(){t._tail=r,t._observers.some(function(e){return e.onCompleted})&&t._observers.forEach(function(e){e.onCompleted&&e.onCompleted(r)}),t._afterComplete&&t._afterComplete(r)};n?Promise.resolve(n).then(e):e()},f.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n;delete e.fields}null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var o=null;this._beforeKeys&&(o=this._beforeKeys(this._fieldKeys));var i=function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()};o?Promise.resolve(o).then(i):i()}},f.prototype._handleError=function(t){var e=this;this._setState(S.FAILED),this._error=t;var r=null;this._beforeError&&(r=this._beforeError(t));function n(){e._observers.some(function(e){return e.onError})&&e._observers.forEach(function(e){e.onError&&e.onError(t)}),e._afterError&&e._afterError(t)}r?Promise.resolve(r).then(n):n()},f.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(S.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(S.STREAMING)))},f.prototype._storeMetadataForCompletion=function(e){for(var t,r=Object.keys(e),n=r.length;n--;)t=r[n],this._meta[t]=e[t]},f.prototype._setState=function(e){this._state=e},f.prototype._setupAuoPull=function(e){this._autoPull=!0,e===h.ALL?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},f);function f(e){var t=void 0===e?{}:e,r=t.reactive,n=void 0!==r&&r,o=t.moreFunction,i=t.discardFunction,s=t.fetchSize,a=void 0===s?h.ALL:s,u=t.beforeError,c=t.afterError,l=t.beforeKeys,f=t.afterKeys,e=t.beforeComplete,r=t.afterComplete,s=t.server,t=p.call(this)||this;return t._fieldKeys=null,t._fieldLookup=null,t._head=null,t._queuedRecords=[],t._tail=null,t._error=null,t._observers=[],t._meta={},t._server=s,t._beforeError=u,t._afterError=c,t._beforeKeys=l,t._afterKeys=f,t._beforeComplete=e,t._afterComplete=r,t._queryId=null,t._moreFunction=o,t._discardFunction=i,t._discard=!1,t._fetchSize=a,t._setState(n?S.READY:S.READY_STREAMING),t._setupAuoPull(a),t}r.ResultStreamObserver=i;var d,e=(o(_,d=c),_.prototype.onNext=function(e){this.onError(s.newError("Received RECORD when initializing "+s.json.stringify(e)))},_.prototype.onError=function(e){this._onError&&this._onError(e)},_.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},_);function _(e){var t=void 0===e?{}:e,r=t.onError,e=t.onCompleted,t=d.call(this)||this;return t._onError=r,t._onCompleted=e,t}r.LoginObserver=e;var y,e=(o(b,y=c),b.prototype.onNext=function(e){this.onError(s.newError("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},b.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},b.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},b);function b(e){var t=void 0===e?{}:e,r=t.onProtocolError,n=t.onError,e=t.onComplete,t=y.call(this)||this;return t._onProtocolError=r,t._onError=n,t._onComplete=e,t}r.ResetObserver=e;var v,e=(o(m,v=i),m);function m(e){var t=e.error,e=e.onError,e=v.call(this,{beforeError:e})||this;return e.onError(t),e}r.FailedObserver=e;var g,i=(o(O,g=i),O);function O(){var e=g.call(this)||this;return g.prototype.markCompleted.call(e),e}r.CompletedObserver=i;var E,i=(o(w,E=c),w.prototype.onNext=function(e){this._records.push(e)},w.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},w.prototype.onCompleted=function(){null===this._records||1===this._records.length?this._onCompleted&&this._onCompleted(a.default.ofRecord(this._records[0])):this.onError(s.newError("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+s.json.stringify(this._records),u))},w);function w(e){var t=e.resultObserver,r=e.onProtocolError,n=e.onError,o=e.onCompleted,e=E.call(this)||this;return e._resultObserver=t,e._onError=n,e._onCompleted=o,e._records=[],e._onProtocolError=r,t.subscribe(e),e}r.ProcedureRouteObserver=i;var P,c=(o(C,P=c),C.prototype.onNext=function(e){this.onError(s.newError("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},C.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},C.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(a.default.ofMessageResponse(e))},C);function C(e){var t=void 0===e?{}:e,r=t.onProtocolError,n=t.onError,e=t.onCompleted,t=P.call(this)||this;return t._onProtocolError=r,t._onError=n,t._onCompleted=e,t}r.RouteObserver=c;var S={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(S.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(e){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}},{"./request-message":12,"./routing-table-raw":14,"neo4j-driver-core":58}],16:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.prototype.getUInt8=function(e){throw new Error("Not implemented")},s.prototype.getInt8=function(e){throw new Error("Not implemented")},s.prototype.getFloat64=function(e){throw new Error("Not implemented")},s.prototype.putUInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putFloat64=function(e,t){throw new Error("Not implemented")},s.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},s.prototype.getSlice=function(e,t){return new u(e,t,this)},s.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},s.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},s.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},s.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},s.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},s.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},s.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},s.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},s.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},s.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},s.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},s.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},s.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},s.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},s.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},s.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},s.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},s.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},s.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},s.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},s.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},s.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},s.prototype.remaining=function(){return this.length-this.position},s.prototype.hasRemaining=function(){return 0<this.remaining()},s.prototype.reset=function(){this.position=0},s.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},s.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);e+=r=1===r.length?"0"+r:r,t!==this.length-1&&(e+=" ")}return e},s);function s(e){this.position=0,this.length=e}r.default=i;var a,u=(o(c,a=i),c.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},c.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},c.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},c.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},c.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},c.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},c);function c(e,t,r){t=a.call(this,t)||this;return t._start=e,t._inner=r,t}},{}],17:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.BaseBuffer=void 0;e=n(e("./base-buf"));r.BaseBuffer=e.default,r.default=e.default},{"./base-buf":16}],18:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,e=i(e("../../buf")),o=(s=e.default,o(a,s),a.prototype.putUInt8=function(e,t){this._view.setUint8(e,t)},a.prototype.getUInt8=function(e){return this._view.getUint8(e)},a.prototype.putInt8=function(e,t){this._view.setInt8(e,t)},a.prototype.getInt8=function(e){return this._view.getInt8(e)},a.prototype.getFloat64=function(e){return this._view.getFloat64(e)},a.prototype.putFloat64=function(e,t){this._view.setFloat64(e,t)},a.prototype.getSlice=function(e,t){if(this._buffer.slice)return new a(this._buffer.slice(e,e+t));for(var r=new a(t),n=0;n<t;n++)r.putUInt8(n,this.getUInt8(n+e));return r},a.prototype.readView=function(e){return new DataView(this._buffer,this._updatePos(e),e)},a);function a(e){var t=this,e=e instanceof ArrayBuffer?e:new ArrayBuffer(e);return(t=s.call(this,e.byteLength)||this)._buffer=e,t._view=new DataView(t._buffer),t}r.default=o},{"../../buf":17}],19:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./browser-buf")),s=e("neo4j-driver-core"),e=s.internal.util,a=e.ENCRYPTION_OFF,u=e.ENCRYPTION_ON,e=(o.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=s.newError("Failed to establish connection in "+this._config.connectionTimeout+"ms",this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=s.newError("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},o.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof i.default))throw s.newError("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(1===this._ws.readyState)throw e;this._handleConnectionError()}}},o.prototype.close=function(){var r=this;return new Promise(function(e,t){r._ws&&3!==r._ws.readyState?(r._open=!1,r._clearConnectionTimeout(),r._ws.onclose=function(){return e()},r._ws.close()):e()})},o.prototype.setupReceiveTimeout=function(e){},o.prototype._setupConnectionTimeout=function(){var e=this,t=this._config.connectionTimeout;if(t){var r=this._ws;return setTimeout(function(){1!==r.readyState&&(e._connectionTimeoutFired=!0,r.close())},t)}return null},o.prototype._clearConnectionTimeout=function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))},o);function o(e,t,r){void 0===t&&(t=c),void 0===r&&(r=function(e){return new WebSocket(e)}),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this);var n,o=function(e,t){var r=function(e){return!0===e.encrypted||e.encrypted===u}(e),n=function(e){return!1===e.encrypted||e.encrypted===a}(e),e=e.trust,t=function(e){e="function"==typeof e?e():"";return e&&0<=e.toLowerCase().indexOf("https")}(t);if(function(e,t,r){null===r||(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,t),n)return{scheme:"ws",error:null};if(t)return{scheme:"wss",error:null};if(r)return e&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==e?{scheme:null,error:s.newError("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+e+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+a+'"` in the driver configuration.')}:{scheme:"wss",error:null};return{scheme:"ws",error:null}}(this._config=e,t),t=o.scheme,o=o.error;o?this._error=o:(this._ws=function(t,r,n){var e=t+"://"+r.asHostPort();try{return n(e)}catch(e){if(function(e,t){return"SyntaxError"===e.name&&function(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}(t.asHostPort())}(e,r)){r=function(e,t){var r=t.host().replace(new RegExp(":","g"),"-").replace("%","s");return e+"://"+r+".ipv6-literal.net:"+t.port()}(t,r);return n(r)}throw e}}(t,e.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(e){e&&!e.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var e=n._pending;n._pending=null;for(var t=0;t<e.length;t++)n.write(e[t])},this._ws.onmessage=function(e){n.onmessage&&(e=new i.default(e.data),n.onmessage(e))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}function c(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}r.default=e},{"./browser-buf":18,"neo4j-driver-core":58}],20:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,e=e("neo4j-driver-core").internal.resolver.BaseHostNameResolver,e=(o(s,i=e),s.prototype.resolve=function(e){return this._resolveToItself(e)},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.default=e},{"neo4j-driver-core":58}],21:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("./browser-buf")),e=e("text-encoding-utf-8"),i=new e.TextEncoder("utf-8"),s=new e.TextDecoder("utf-8");r.default={encode:function(e){return new o.default(i.encode(e).buffer)},decode:function(e,t){if(e instanceof o.default)return s.decode(e.readView(Math.min(t,e.length-e.position)));for(var r=new o.default(t),n=0;n<t;n++)r.writeUInt8(e.readUInt8());return r.reset(),s.decode(r.readView(t))}}},{"./browser-buf":18,"text-encoding-utf-8":52}],22:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.utf8=r.HostNameResolver=r.Channel=r.alloc=void 0;var o=n(e("./browser-buf")),i=n(e("./browser-channel")),s=n(e("./browser-host-name-resolver")),e=n(e("./browser-utf8"));r.alloc=function(e){return new o.default(e)},r.Channel=i.default,r.HostNameResolver=s.default,r.utf8=e.default},{"./browser-buf":18,"./browser-channel":19,"./browser-host-name-resolver":20,"./browser-utf8":21}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("neo4j-driver-core"),o=n.internal.util,e=o.ENCRYPTION_OFF,o=o.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,s=3e4,a=[null,void 0,!0,!1,o,e],u=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];r.default=function(e,t,r){this.address=e,this.encrypted=function(e){e=e.encrypted;if(-1!==a.indexOf(e))return e;throw n.newError("Illegal value of the encrypted setting "+e+". Expected one of "+a)}(t),this.trust=function(e){e=e.trust;if(-1!==u.indexOf(e))return e;throw n.newError("Illegal value of the trust setting "+e+". Expected one of "+u)}(t),this.trustedCertificates=t.trustedCertificates||[],this.knownHostsPath=t.knownHosts||null,this.connectionErrorCode=r||i,this.connectionTimeout=function(e){e=parseInt(e.connectionTimeout,10);return 0===e||e&&e<0?null:e||s}(t)}},{"neo4j-driver-core":58}],24:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Dechunker=r.Chunker=void 0;var s,a=i(e("../buf/base-buf")),u=e("./node"),c=i(e("./combined-buf")),o=(s=a.default,o(l,s),l.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},l.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},l.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},l.prototype.putBytes=function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},l.prototype.flush=function(){var e;return 0<this._buffer.position&&(this._closeChunkIfOpen(),e=this._buffer,this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=u.alloc(this._bufferSize),this._chunkOpen=!1),this},l.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},l.prototype._ensure=function(e){e=this._chunkOpen?e:e+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},l.prototype._closeChunkIfOpen=function(){var e;this._chunkOpen&&(e=this._buffer.position-(this._currentChunkStart+2),this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1)},l);function l(e,t){var r=s.call(this,0)||this;return r._bufferSize=t||1400,r._ch=e,r._buffer=u.alloc(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}r.Chunker=o;f.prototype.AWAITING_CHUNK=function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))},f.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(e){},f.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new c.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},f.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},o=f;function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}r.Dechunker=o},{"../buf/base-buf":16,"./combined-buf":25,"./node":22}],25:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=e("../buf"),a=e("./node"),o=(i=s.BaseBuffer,o(u,i),u.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},u.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},u.prototype.getFloat64=function(e){for(var t=a.alloc(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},u);function u(e){for(var t=this,r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=i.call(this,r)||this)._buffers=e,t}r.default=o},{"../buf":17,"./node":22}],26:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ChannelConfig=void 0,o(e("./node"),r),o(e("./chunking"),r);var s=e("./channel-config");Object.defineProperty(r,"ChannelConfig",{enumerable:!0,get:function(){return i(s).default}})},{"./channel-config":23,"./chunking":24,"./node":22}],27:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var u,c=a(e("./connection-provider-pooled")),l=e("../connection"),a=e("neo4j-driver-core"),e=a.internal.constants,f=e.BOLT_PROTOCOL_V4_0,h=e.BOLT_PROTOCOL_V3,p=a.error.SERVICE_UNAVAILABLE,o=(a.error.newError,u=c.default,o(d,u),d.prototype.acquireConnection=function(e){var r=this,e=void 0===e?{}:e,n=(e.accessMode,e.database),t=(e.bookmarks,l.ConnectionErrorHandler.create({errorCode:p,handleAuthorizationExpired:function(e,t){return r._handleAuthorizationExpired(e,t,n)}}));return this._connectionPool.acquire(this._address).then(function(e){return new l.DelegateConnection(e,t)})},d.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Direct driver "+this._id+" will close connection to "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(t).catch(function(){}),e},d.prototype._hasProtocolVersion=function(n){return i(this,void 0,void 0,function(){var t,r;return s(this,function(e){switch(e.label){case 0:return[4,l.createChannelConnection(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return t=e.sent(),r=t.protocol()?t.protocol().version:null,[4,t.close()];case 2:return e.sent(),r?[2,n(r)]:[2,!1]}})})},d.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return f<=e})];case 1:return[2,e.sent()]}})})},d.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return h<=e})];case 1:return[2,e.sent()]}})})},d);function d(e){var t=e.id,r=e.config,n=e.log,o=e.address,i=e.userAgent,e=e.authToken,e=u.call(this,{id:t,config:r,log:n,userAgent:i,authToken:e})||this;return e._address=o,e}r.default=o},{"../connection":36,"./connection-provider-pooled":28,"neo4j-driver-core":58}],28:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},u=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var l,f=e("../connection"),h=a(e("../pool")),e=e("neo4j-driver-core"),p=e.error.SERVICE_UNAVAILABLE,o=(l=e.ConnectionProvider,o(d,l),d.prototype._createConnectionErrorHandler=function(){return new f.ConnectionErrorHandler(p)},d.prototype._createConnection=function(e,r){var n=this;return this._createChannelConnection(e).then(function(t){return t._release=function(){return r(e,t)},(n._openConnections[t.id]=t).connect(n._userAgent,n._authToken).catch(function(e){throw n._destroyConnection(t),e})})},d.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var t=this._config.maxConnectionLifetime;return Date.now()-e.creationTimestamp<=t},d.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},d.prototype.close=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},d._installIdleObserverOnConnection=function(e,t){e._queueObserver(t)},d._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},d);function d(e,t){var r=e.id,n=e.config,o=e.log,i=e.userAgent,e=e.authToken;void 0===t&&(t=null);var s=l.call(this)||this;return s._id=r,s._config=n,s._log=o,s._userAgent=i,s._authToken=e,s._createChannelConnection=t||function(e){return f.createChannelConnection(e,s._config,s._createConnectionErrorHandler(),s._log)},s._connectionPool=new h.default({create:s._createConnection.bind(s),destroy:s._destroyConnection.bind(s),validate:s._validateConnection.bind(s),installIdleObserver:d._installIdleObserverOnConnection.bind(s),removeIdleObserver:d._removeIdleObserverOnConnection.bind(s),config:h.PoolConfig.fromDriverConfig(n),log:s._log}),s._openConnections={},s}r.default=o},{"../connection":36,"../pool":46,"neo4j-driver-core":58}],29:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},f=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},h=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var d,_=e("neo4j-driver-core"),y=a(e("../rediscovery")),b=e("../channel"),v=p(e("./connection-provider-single")),p=p(e("./connection-provider-pooled")),m=e("../load-balancing"),g=e("../connection"),O=_.error.SERVICE_UNAVAILABLE,E=_.error.SESSION_EXPIRED,w=_.internal.bookmark.Bookmark,e=_.internal.constants,P=e.ACCESS_MODE_READ,C=e.ACCESS_MODE_WRITE,S=e.BOLT_PROTOCOL_V3,T=e.BOLT_PROTOCOL_V4_0,I=null,R=_.int(3e4),o=(d=p.default,o(k,d),k.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(E)},k.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will forget "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(t,r||I),e},k.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will close connections to "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(t).catch(function(){}),e},k.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will forget writer "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(t,r||I),_.newError("No longer possible to write to server at "+t,E)},k.prototype.acquireConnection=function(e){var e=void 0===e?{}:e,a=e.accessMode,u=e.database,c=e.bookmarks;return f(this,void 0,void 0,function(){var t,r,n,o,i,s=this;return h(this,function(e){switch(e.label){case 0:return n=new g.ConnectionErrorHandler(E,function(e,t){return s._handleUnavailability(e,t,u)},function(e,t){return s._handleWriteFailure(e,t,u)},function(e,t){return s._handleAuthorizationExpired(e,t,u)}),[4,this._freshRoutingTable({accessMode:a,database:u||I,bookmark:c})];case 1:if(o=e.sent(),a===P)r=this._loadBalancingStrategy.selectReader(o.readers),t="read";else{if(a!==C)throw _.newError("Illegal mode "+a);r=this._loadBalancingStrategy.selectWriter(o.writers),t="write"}if(!r)throw _.newError("Failed to obtain connection towards "+t+" server. Known routing table is: "+o,E);e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(r,t,o)];case 3:return i=e.sent(),[2,new g.DelegateConnection(i,n)];case 4:throw i=e.sent(),n.handleAndTransformError(i,r);case 5:return[2]}})})},k.prototype._hasProtocolVersion=function(s){return f(this,void 0,void 0,function(){var t,r,n,o,i;return h(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=e.sent(),r=0,e.label=2;case 2:if(!(r<t.length))return[3,8];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,g.createChannelConnection(t[r],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return n=e.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 5:return e.sent(),o?[2,s(o)]:[2,!1];case 6:return i=e.sent(),i=i,[3,7];case 7:return r++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},k.prototype.supportsMultiDb=function(){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return T<=e})];case 1:return[2,e.sent()]}})})},k.prototype.supportsTransactionConfig=function(){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return S<=e})];case 1:return[2,e.sent()]}})})},k.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},k.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},k.prototype._acquireConnectionToServer=function(e,t,r){return this._connectionPool.acquire(e)},k.prototype._freshRoutingTable=function(e){var t=void 0===e?{}:e,r=t.accessMode,n=t.database,e=t.bookmark,t=this._routingTableRegistry.get(n,function(){return new y.RoutingTable({database:n})});return t.isStaleFor(r)?(this._log.info('Routing table is stale for database: "'+n+'" and access mode: "'+r+'": '+t),this._refreshRoutingTable(t,e)):t},k.prototype._refreshRoutingTable=function(e,t){var r=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(r,e,t):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(r,e,t)},k.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(n,o,i){return f(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return t=[],[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,o,i)];case 1:return(r=e.sent())?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(n,o,i)];case 3:r=e.sent(),e.label=4;case 4:return[4,this._applyRoutingTableIfPossible(o,r)];case 5:return[2,e.sent()]}})})},k.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(r,n,o){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(r,n,o)];case 1:return(t=e.sent())?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(r,this._seedRouter,n,o)];case 2:t=e.sent(),e.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,t)];case 4:return[2,e.sent()]}})})},k.prototype._fetchRoutingTableUsingKnownRouters=function(r,n,o){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTable(r,n,o)];case 1:return(t=e.sent())?[2,t]:(t=r.length-1,k._forgetRouter(n,r,t),[2,null])}})})},k.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i){return f(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return t=e.sent(),t=t.filter(function(e){return r.indexOf(e)<0}),[4,this._fetchRoutingTable(t,o,i)];case 2:return[2,e.sent()]}})})},k.prototype._resolveSeedRouter=function(n){return f(this,void 0,void 0,function(){var t,r=this;return h(this,function(e){switch(e.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return t=e.sent(),[4,Promise.all(t.map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=e.sent(),[2,[].concat.apply([],t)]}})})},k.prototype._fetchRoutingTable=function(s,a,u){var e=this;return s.reduce(function(n,o,i){return f(e,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return[4,n];case 1:return(r=e.sent())?[2,r]:(k._forgetRouter(a,s,i-1),[4,this._createSessionForRediscovery(o,u)]);case 2:if(!(t=e.sent()))return[3,8];e.label=3;case 3:return e.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(t,a.database,o)];case 4:return[2,e.sent()];case 5:if((r=e.sent())&&"Neo.ClientError.Database.DatabaseNotFound"===r.code)throw r;return this._log.warn("unable to fetch routing table because of an error "+r),[2,null];case 6:return t.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},k.prototype._createSessionForRediscovery=function(n,o){return f(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._connectionPool.acquire(n)];case 1:return t=e.sent(),r=new v.default(t),t.protocol().version<4?[2,new _.Session({mode:C,bookmark:w.empty(),connectionProvider:r})]:[2,new _.Session({mode:P,database:"system",bookmark:o,connectionProvider:r})];case 2:if((r=e.sent())&&"Neo.ClientError.Security.Unauthorized"===r.code)throw r;return[2,null];case 3:return[2]}})})},k.prototype._applyRoutingTableIfPossible=function(t,r){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:if(!r)throw _.newError("Could not perform discovery. No routing servers available. Known routing table: "+t,O);return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r)];case 1:return e.sent(),[2,r]}})})},k.prototype._updateRoutingTable=function(t){return f(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t.database,t),this._log.info("Updated routing table "+t),[2]}})})},k._forgetRouter=function(e,t,r){r=t[r];e&&r&&e.forgetRouter(r)},k);function k(e){var t=e.id,r=e.address,n=e.routingContext,o=e.hostNameResolver,i=e.config,s=e.log,a=e.userAgent,u=e.authToken,e=e.routingTablePurgeDelay,c=d.call(this,{id:t,config:i,log:s,userAgent:a,authToken:u},function(e){return g.createChannelConnection(e,c._config,c._createConnectionErrorHandler(),c._log,c._routingContext)})||this;return c._routingContext=l(l({},n),{address:r.toString()}),c._seedRouter=r,c._rediscovery=new y.default(c._routingContext),c._loadBalancingStrategy=new m.LeastConnectedLoadBalancingStrategy(c._connectionPool),c._hostNameResolver=o,c._dnsResolver=new b.HostNameResolver,c._log=s,c._useSeedRouter=!0,c._routingTableRegistry=new j(e?_.int(e):R),c}r.default=o;var j=(N.prototype.register=function(e,t){return this._tables.set(e,t),this},N.prototype.apply=function(e,t){var r=void 0===t?{}:t,t=r.applyWhenExists,r=r.applyWhenDontExists,r=void 0===r?function(){}:r;return this._tables.has(e)?t(this._tables.get(e)):"string"==typeof e||null===e?r():this._forEach(t),this},N.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},N.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},N.prototype._forEach=function(e){var t,r;try{for(var n=u(this._tables),o=n.next();!o.done;o=n.next())e(c(o.value,2)[1])}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},N.prototype._remove=function(e){return this._tables.delete(e),this},N.prototype._removeIf=function(e){var t,r;try{for(var n=u(this._tables),o=n.next();!o.done;o=n.next()){var i=c(o.value,2),s=i[0];e(i[1])&&this._remove(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},N);function N(e){this._tables=new Map,this._routingTablePurgeDelay=e}},{"../channel":26,"../connection":36,"../load-balancing":38,"../rediscovery":49,"./connection-provider-pooled":28,"./connection-provider-single":30,"neo4j-driver-core":58}],30:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,e=e("neo4j-driver-core"),o=(i=e.ConnectionProvider,o(s,i),s.prototype.acquireConnection=function(e){e=void 0===e?{}:e,e.accessMode,e.database,e.bookmarks,e=this._connection;return this._connection=null,Promise.resolve(e)},s);function s(e){var t=i.call(this)||this;return t._connection=e,t}r.default=o},{"neo4j-driver-core":58}],31:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingConnectionProvider=r.DirectConnectionProvider=r.PooledConnectionProvider=r.SingleConnectionProvider=void 0;var o=e("./connection-provider-single");Object.defineProperty(r,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var i=e("./connection-provider-pooled");Object.defineProperty(r,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var s=e("./connection-provider-direct");Object.defineProperty(r,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(s).default}});var a=e("./connection-provider-routing");Object.defineProperty(r,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(a).default}})},{"./connection-provider-direct":27,"./connection-provider-pooled":28,"./connection-provider-routing":29,"./connection-provider-single":30}],32:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=void 0;var f=e("../channel"),u=e("neo4j-driver-core"),c=a(e("./connection")),h=a(e("../bolt")),l=u.error.PROTOCOL_ERROR,p=u.internal.logger.Logger,d=0;r.createChannelConnection=function(i,s,a,u,c,e){void 0===c&&(c=null);var l=(e=void 0===e?function(e){return new f.Channel(e)}:e)(new f.ChannelConfig(i,s,a.errorCode()));return h.default.handshake(l).then(function(e){var r=e.protocolVersion,t=e.consumeRemainingBuffer,n=new f.Chunker(l),o=new f.Dechunker,e=new y(l,a,i,u,s.disableLosslessIntegers,c,n,function(t){return h.default.create({version:r,channel:l,chunker:n,dechunker:o,disableLosslessIntegers:s.disableLosslessIntegers,useBigInt:s.useBigInt,serversideRouting:c,server:t.server,log:t.logger,observer:{onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})});return t(function(e){return o.write(e)}),e}).catch(function(e){return l.close().then(function(){throw e})})};var _,y=(_=c.default,o(b,_),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),b.prototype.connect=function(e,t){return this._initialize(e,t)},b.prototype._initialize=function(e,n){var o=this,i=this;return new Promise(function(r,t){o._protocol.initialize({userAgent:e,authToken:n,onError:function(e){return t(e)},onComplete:function(e){var t;e&&(t=e.server,o.version&&!t||(o.version=t),t=e.connection_id,o.databaseId||(o.databaseId=t),!e.hints||null!=(e=e.hints["connection.recv_timeout_seconds"])&&(e=u.toNumber(e),Number.isInteger(e)&&0<e?o._ch.setupReceiveTimeout(1e3*e):o._log.info("Server located at "+o._address+" supplied an invalid connection receive timeout value ("+e+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue."))),r(i)}})})},b.prototype.protocol=function(){return this._protocol},Object.defineProperty(b.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),b.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error "+u.json.stringify(this._error)),this._protocol.notifyFatalError(this._error)},b.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},b.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},b.prototype.resetAndFlush=function(){var r=this;return new Promise(function(e,t){r._protocol.reset({onError:function(e){r._isBroken?t(e):(e=r._handleProtocolError("Received FAILURE as a response for RESET: "+e),t(e))},onComplete:function(){e()}})})},b.prototype._resetOnFailure=function(){var e=this;this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},b.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},b.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},b.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},b.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},b.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();e=u.newError(e,l);return this._handleFatalError(e),e},b);function b(e,t,r,n,o,i,s,a){void 0===o&&(o=!1),void 0===i&&(i=null);var u,c,t=_.call(this,t)||this;return t._id=d++,t._address=r,t._server={address:r.asHostPort()},t.creationTimestamp=Date.now(),t._disableLosslessIntegers=o,t._ch=e,t._chunker=s,t._log=(u=t,new p((c=n)._level,function(e,t){return c._loggerFunction(e,u+" "+t)})),t._serversideRouting=i,t._dbConnectionId=null,t._protocol=a(t),t._isBroken=!1,t._log.isDebugEnabled()&&t._log.debug("created towards "+r),t}r.default=y},{"../bolt":11,"../channel":26,"./connection":35,"neo4j-driver-core":58}],33:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,e=i(e("./connection")),o=(s=e.default,o(a,s),Object.defineProperty(a.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),a.prototype.isOpen=function(){return this._delegate.isOpen()},a.prototype.protocol=function(){return this._delegate.protocol()},a.prototype.connect=function(e,t){return this._delegate.connect(e,t)},a.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},a.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},a.prototype.close=function(){return this._delegate.close()},a.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},a);function a(e,t){var r=s.call(this,t)||this;return t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}r.default=o},{"./connection":35}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("neo4j-driver-core"),n=e.error.SERVICE_UNAVAILABLE,o=e.error.SESSION_EXPIRED,e=(i.create=function(e){return new i(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleAuthorizationExpired)},i.prototype.errorCode=function(){return this._errorCode},i.prototype.handleAndTransformError=function(e,t){return(r=e)&&"Neo.ClientError.Security.AuthorizationExpired"===r.code?this._handleAuthorizationExpired(e,t):function(e){if(e)return e.code===o||e.code===n||"Neo.TransientError.General.DatabaseUnavailable"===e.code;return!1}(e)?this._handleUnavailability(e,t):function(e){if(e)return"Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code;return!1}(e)?this._handleWriteFailure(e,t):e;var r},i);function i(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||s,this._handleWriteFailure=r||s,this._handleAuthorizationExpired=n||s}function s(e){return e}r.default=e},{"neo4j-driver-core":58}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){throw new Error("not implemented")},o.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(o.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.connect=function(e,t){throw new Error("not implemented")},o.prototype.write=function(e,t,r){throw new Error("not implemented")},o.prototype.resetAndFlush=function(){throw new Error("not implemented")},o.prototype.close=function(){throw new Error("not implemented")},o.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t):e},o);function o(e){this._errorHandler=e}r.default=n},{}],36:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=r.ConnectionErrorHandler=r.DelegateConnection=r.ChannelConnection=r.Connection=void 0;var a=s(e("./connection"));r.Connection=a.default;var u=i(e("./connection-channel"));r.ChannelConnection=u.default,Object.defineProperty(r,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});i=s(e("./connection-delegate"));r.DelegateConnection=i.default;e=s(e("./connection-error-handler"));r.ConnectionErrorHandler=e.default,r.default=a.default},{"./connection":35,"./connection-channel":32,"./connection-delegate":33,"./connection-error-handler":34}],37:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.pool=r.packstream=r.channel=r.buf=r.bolt=r.loadBalancing=void 0,r.loadBalancing=i(e("./load-balancing")),r.bolt=i(e("./bolt")),r.buf=i(e("./buf")),r.channel=i(e("./channel")),r.packstream=i(e("./packstream")),r.pool=i(e("./pool")),s(e("./connection-provider"),r)},{"./bolt":11,"./buf":17,"./channel":26,"./connection-provider":31,"./load-balancing":38,"./packstream":42,"./pool":46}],38:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LeastConnectedLoadBalancingStrategy=r.LoadBalancingStrategy=void 0;var o=n(e("./load-balancing-strategy"));r.LoadBalancingStrategy=o.default;e=n(e("./least-connected-load-balancing-strategy"));r.LeastConnectedLoadBalancingStrategy=e.default,r.default=e.default},{"./least-connected-load-balancing-strategy":39,"./load-balancing-strategy":40}],39:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./round-robin-array-index")),e=i(e("./load-balancing-strategy")),o=(s=e.default,o(u,s),u.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},u.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},u.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),o=n,i=null,s=Number.MAX_SAFE_INTEGER;do{var a=e[o],u=this._connectionPool.activeResourceCount(a)}while(u<s&&(i=a,s=u),o===r-1?o=0:o++,o!==n);return i},u);function u(e){var t=s.call(this)||this;return t._readersIndex=new a.default,t._writersIndex=new a.default,t._connectionPool=e,t}r.default=o},{"./load-balancing-strategy":40,"./round-robin-array-index":41}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.selectReader=function(e){throw new Error("Abstract function")},o.prototype.selectWriter=function(e){throw new Error("Abstract function")},o);function o(){}r.default=n},{}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.next=function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},o);function o(e){this._offset=e||0}r.default=n},{}],42:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.v2=r.v1=void 0;var s=i(e("./packstream-v1"));r.v1=s;e=i(e("./packstream-v2"));r.v2=e,r.default=e},{"./packstream-v1":43,"./packstream-v2":44}],43:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Structure=r.Unpacker=r.Packer=void 0;var o=e("../channel"),f=e("neo4j-driver-core"),n=f.error.PROTOCOL_ERROR,a=(i.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},i);function i(e,t){this.signature=e,this.fields=t}r.Structure=a;s.prototype.packable=function(i){var e,s=this;if(null===i)return function(){return s._ch.writeUInt8(192)};if(!0===i)return function(){return s._ch.writeUInt8(195)};if(!1===i)return function(){return s._ch.writeUInt8(194)};if("number"==typeof i)return function(){return s.packFloat(i)};if("string"==typeof i)return function(){return s.packString(i)};if("bigint"==typeof i)return function(){return s.packInteger(f.int(i))};if(f.isInt(i))return function(){return s.packInteger(i)};if(i instanceof Int8Array)return function(){return s.packBytes(i)};if(i instanceof Array)return function(){s.packListHeader(i.length);for(var e=0;e<i.length;e++)s.packable(void 0===i[e]?null:i[e])()};if(null!=(e=i)&&"function"==typeof e[Symbol.iterator])return this.packableIterable(i);if(i instanceof f.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+i);if(i instanceof f.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+i);if(i instanceof f.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+i);if(i instanceof a){for(var t=[],r=0;r<i.fields.length;r++)t[r]=this.packable(i.fields[r]);return function(){return s.packStruct(i.signature,t)}}return"object"==typeof i?function(){for(var e=Object.keys(i),t=0,r=0;r<e.length;r++)void 0!==i[e[r]]&&t++;s.packMapHeader(t);for(var n=0;n<e.length;n++){var o=e[n];void 0!==i[o]&&(s.packString(o),s.packable(i[o])())}}:this._nonPackableValue("Unable to pack the given value: "+i)},s.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(e){throw f.newError("Cannot pack given iterable, "+e.message+": "+t)}},s.prototype.packStruct=function(e,t){this.packStructHeader((t=t||[]).length,e);for(var r=0;r<t.length;r++)t[r]()},s.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))},s.prototype.packFloat=function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)},s.prototype.packString=function(e){var t=o.utf8.encode(e),e=t.length;if(e<16)this._ch.writeUInt8(128|e),this._ch.writeBytes(t);else if(e<256)this._ch.writeUInt8(208),this._ch.writeUInt8(e),this._ch.writeBytes(t);else if(e<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256),this._ch.writeBytes(t);else{if(!(e<4294967296))throw f.newError("UTF-8 strings of size "+e+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256),this._ch.writeBytes(t)}},s.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw f.newError("Lists of size "+e+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packBytes=function(e){if(!this._byteArraysSupported)throw f.newError("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])},s.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw f.newError("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw f.newError("Maps of size "+e+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw f.newError("Structures of size "+e+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}},s.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},s.prototype._nonPackableValue=function(e){return function(){throw f.newError(e,n)}},e=s;function s(e){this._ch=e,this._byteArraysSupported=!0}r.Packer=e;u.prototype.unpack=function(e){var t=e.readUInt8(),r=240&t,n=15&t;if(192===t)return null;var o=this._unpackBoolean(t);if(null!==o)return o;o=this._unpackNumberOrInteger(t,e);if(null!==o){if(f.isInt(o)){if(this._useBigInt)return o.toBigInt();if(this._disableLosslessIntegers)return o.toNumberOrInfinity()}return o}o=this._unpackString(t,r,n,e);if(null!==o)return o;o=this._unpackList(t,r,n,e);if(null!==o)return o;o=this._unpackByteArray(t,e);if(null!==o)return o;o=this._unpackMap(t,r,n,e);if(null!==o)return o;e=this._unpackStruct(t,r,n,e);if(null!==e)return e;throw f.newError("Unknown packed value with marker "+t.toString(16))},u.prototype.unpackInteger=function(e){var t=e.readUInt8(),e=this._unpackInteger(t,e);if(null==e)throw f.newError("Unable to unpack integer value with marker "+t.toString(16));return e},u.prototype._unpackBoolean=function(e){return 195===e||194!==e&&null},u.prototype._unpackNumberOrInteger=function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)},u.prototype._unpackInteger=function(e,t){if(0<=e&&e<128)return f.int(e);if(240<=e&&e<256)return f.int(e-256);if(200===e)return f.int(t.readInt8());if(201===e)return f.int(t.readInt16());if(202===e){var r=t.readInt32();return f.int(r)}if(203!==e)return null;e=t.readInt32(),t=t.readInt32();return new f.Integer(t,e)},u.prototype._unpackString=function(e,t,r,n){return 128===t?o.utf8.decode(n,r):208===e?o.utf8.decode(n,n.readUInt8()):209===e?o.utf8.decode(n,n.readUInt16()):210===e?o.utf8.decode(n,n.readUInt32()):null},u.prototype._unpackList=function(e,t,r,n){return 144===t?this._unpackListWithSize(r,n):212===e?this._unpackListWithSize(n.readUInt8(),n):213===e?this._unpackListWithSize(n.readUInt16(),n):214===e?this._unpackListWithSize(n.readUInt32(),n):null},u.prototype._unpackListWithSize=function(e,t){for(var r=[],n=0;n<e;n++)r.push(this.unpack(t));return r},u.prototype._unpackByteArray=function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null},u.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},u.prototype._unpackMap=function(e,t,r,n){return 160===t?this._unpackMapWithSize(r,n):216===e?this._unpackMapWithSize(n.readUInt8(),n):217===e?this._unpackMapWithSize(n.readUInt16(),n):218===e?this._unpackMapWithSize(n.readUInt32(),n):null},u.prototype._unpackMapWithSize=function(e,t){for(var r={},n=0;n<e;n++)r[this.unpack(t)]=this.unpack(t);return r},u.prototype._unpackStruct=function(e,t,r,n){return 176===t?this._unpackStructWithSize(r,n):220===e?this._unpackStructWithSize(n.readUInt8(),n):221===e?this._unpackStructWithSize(n.readUInt16(),n):null},u.prototype._unpackStructWithSize=function(e,t){var r=t.readUInt8();return 78===r?this._unpackNode(e,t):82===r?this._unpackRelationship(e,t):114===r?this._unpackUnboundRelationship(e,t):80===r?this._unpackPath(e,t):this._unpackUnknownStruct(r,e,t)},u.prototype._unpackNode=function(e,t){return this._verifyStructSize("Node",3,e),new f.Node(this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackRelationship=function(e,t){return this._verifyStructSize("Relationship",5,e),new f.Relationship(this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackUnboundRelationship=function(e,t){return this._verifyStructSize("UnboundRelationship",3,e),new f.UnboundRelationship(this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackPath=function(e,t){this._verifyStructSize("Path",3,e);for(var r=this.unpack(t),n=this.unpack(t),o=this.unpack(t),i=[],s=r[0],a=0;a<o.length;a+=2){var u=r[o[a+1]],c=o[a],l=void 0;0<c?(l=n[c-1])instanceof f.UnboundRelationship&&(n[c-1]=l=l.bind(s.identity,u.identity)):(l=n[-c-1])instanceof f.UnboundRelationship&&(n[-c-1]=l=l.bind(u.identity,s.identity)),i.push(new f.PathSegment(s,l,u)),s=u}return new f.Path(r[0],r[r.length-1],i)},u.prototype._unpackUnknownStruct=function(e,t,r){for(var n=new a(e,[]),o=0;o<t;o++)n.fields.push(this.unpack(r));return n},u.prototype._verifyStructSize=function(e,t,r){if(t!==r)throw f.newError("Wrong struct size for "+e+", expected "+t+" but was "+r,n)},e=u;function u(e,t){void 0===t&&(t=!1),this._disableLosslessIntegers=e=void 0===e?!1:e,this._useBigInt=t}r.Unpacker=e},{"../channel":26,"neo4j-driver-core":58}],44:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0;var u,a=a(e("./packstream-v1")),c=e("neo4j-driver-core"),l=e("./temporal-factory"),e=c.internal.temporalUtil,f=e.dateToEpochDay,h=e.localDateTimeToEpochSecond,p=e.localTimeToNanoOfDay,d=88,_=3,y=89,b=4,v=69,m=4,g=116,O=1,E=84,w=2,P=68,C=1,S=100,T=2,I=70,R=3,k=102,j=3,e=(u=a.Packer,o(N,u),N.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},N.prototype.packable=function(i){var s=this;return c.isPoint(i)?function(){var e,t;t=s,(null===(e=i).z||void 0===e.z?function(e,t){e=[t.packable(c.int(e.srid)),t.packable(e.x),t.packable(e.y)];t.packStruct(d,e)}:function(e,t){e=[t.packable(c.int(e.srid)),t.packable(e.x),t.packable(e.y),t.packable(e.z)];t.packStruct(y,e)})(e,t)}:c.isDuration(i)?function(){var e,t,r,n,o;e=i,t=s,r=c.int(e.months),n=c.int(e.days),o=c.int(e.seconds),e=c.int(e.nanoseconds),e=[t.packable(r),t.packable(n),t.packable(o),t.packable(e)],t.packStruct(v,e)}:c.isLocalTime(i)?function(){return function(e,t){e=p(e.hour,e.minute,e.second,e.nanosecond),e=[t.packable(e)];t.packStruct(g,e)}(i,s)}:c.isTime(i)?function(){var e,t,r;t=s,r=p((e=i).hour,e.minute,e.second,e.nanosecond),e=c.int(e.timeZoneOffsetSeconds),e=[t.packable(r),t.packable(e)],t.packStruct(E,e)}:c.isDate(i)?function(){return function(e,t){e=f(e.year,e.month,e.day),e=[t.packable(e)];t.packStruct(P,e)}(i,s)}:c.isLocalDateTime(i)?function(){var e,t,r;t=s,r=h((e=i).year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),e=c.int(e.nanosecond),e=[t.packable(r),t.packable(e)],t.packStruct(S,e)}:c.isDateTime(i)?function(){var e,t;t=s,((e=i).timeZoneId?function(e,t){var r=h(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=c.int(e.nanosecond),e=e.timeZoneId,e=[t.packable(r),t.packable(n),t.packable(e)];t.packStruct(k,e)}:function(e,t){var r=h(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=c.int(e.nanosecond),e=c.int(e.timeZoneOffsetSeconds),e=[t.packable(r),t.packable(n),t.packable(e)];t.packStruct(I,e)})(e,t)}:u.prototype.packable.call(this,i)},N);function N(){return null!==u&&u.apply(this,arguments)||this}r.Packer=e;var D,o=(D=a.Unpacker,o(A,D),A.prototype._unpackUnknownStruct=function(e,t,r){return e===d?(o=r,(n=this)._verifyStructSize("Point2D",_,t),new c.Point(n.unpack(o),n.unpack(o),n.unpack(o),void 0)):e===y?(n=r,(o=this)._verifyStructSize("Point3D",b,t),new c.Point(o.unpack(n),o.unpack(n),o.unpack(n),o.unpack(n))):e===v?function(e,t,r){e._verifyStructSize("Duration",m,t);var n=e.unpack(r),o=e.unpack(r),t=e.unpack(r),r=e.unpack(r);return new c.Duration(n,o,t,r)}(this,t,r):e===g?function(e,t,r,n){e._verifyStructSize("LocalTime",O,t);r=e.unpackInteger(r);return U(l.nanoOfDayToLocalTime(r),n)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===E?function(e,t,r,n,o){e._verifyStructSize("Time",w,t);t=e.unpackInteger(r),r=e.unpackInteger(r),t=l.nanoOfDayToLocalTime(t);return U(new c.Time(t.hour,t.minute,t.second,t.nanosecond,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===P?function(e,t,r,n,o){e._verifyStructSize("Date",C,t);r=e.unpackInteger(r);return U(l.epochDayToDate(r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===S?function(e,t,r,n,o){e._verifyStructSize("LocalDateTime",T,t);t=e.unpackInteger(r),r=e.unpackInteger(r);return U(l.epochSecondAndNanoToLocalDateTime(t,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===I?function(e,t,r,n,o){e._verifyStructSize("DateTimeWithZoneOffset",R,t);var i=e.unpackInteger(r),t=e.unpackInteger(r),r=e.unpackInteger(r),t=l.epochSecondAndNanoToLocalDateTime(i,t);return U(new c.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,r,null),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===k?function(e,t,r,n,o){e._verifyStructSize("DateTimeWithZoneId",j,t);var i=e.unpackInteger(r),t=e.unpackInteger(r),r=e.unpack(r),t=l.epochSecondAndNanoToLocalDateTime(i,t);return U(new c.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,null,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):D.prototype._unpackUnknownStruct.call(this,e,t,r,this._disableLosslessIntegers,this._useBigInt);var n,o},A);function A(e,t){return D.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t)||this}function U(e,t,r){if(!t&&!r)return e;var n,o,i,s=Object.create(Object.getPrototypeOf(e));for(n in e)e.hasOwnProperty(n)&&(o=e[n],s[n]=c.isInt(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(s),s}r.Unpacker=o},{"./packstream-v1":43,"./temporal-factory":45,"neo4j-driver-core":58}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.epochSecondAndNanoToLocalDateTime=r.nanoOfDayToLocalTime=r.epochDayToDate=void 0;var o=e("neo4j-driver-core"),e=o.internal.temporalUtil,i=e.DAYS_0000_TO_1970,s=e.DAYS_PER_400_YEAR_CYCLE,a=e.NANOS_PER_HOUR,u=e.NANOS_PER_MINUTE,c=e.NANOS_PER_SECOND,n=e.SECONDS_PER_DAY,l=e.floorDiv,f=e.floorMod;function h(e){var t=(e=o.int(e)).add(i).subtract(60),r=o.int(0);t.lessThan(0)&&(r=(n=t.add(1).div(s).subtract(1)).multiply(400),t=t.add(n.multiply(-s)));var e=t.multiply(400).add(591).div(s),n=t.subtract(e.multiply(365).add(e.div(4)).subtract(e.div(100)).add(e.div(400)));n.lessThan(0)&&(e=e.subtract(1),n=t.subtract(e.multiply(365).add(e.div(4)).subtract(e.div(100)).add(e.div(400))));e=e.add(r),t=n,r=t.multiply(5).add(2).div(153),n=r.add(2).modulo(12).add(1),t=t.subtract(r.multiply(306).add(5).div(10)).add(1);return e=e.add(r.div(10)),new o.Date(e,n,t)}function p(e){var t=(e=o.int(e)).div(a),r=(e=e.subtract(t.multiply(a))).div(u),n=(e=e.subtract(r.multiply(u))).div(c),e=e.subtract(n.multiply(c));return new o.LocalTime(t,r,n,e)}r.epochDayToDate=h,r.nanoOfDayToLocalTime=p,r.epochSecondAndNanoToLocalDateTime=function(e,t){var r=l(e,n),t=f(e,n).multiply(c).add(t),r=h(r),t=p(t);return new o.LocalDateTime(r.year,r.month,r.day,t.hour,t.minute,t.second,t.nanosecond)}},{"neo4j-driver-core":58}],46:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MAX_SIZE=r.DEFAULT_ACQUISITION_TIMEOUT=r.PoolConfig=r.Pool=void 0;var a=i(e("./pool-config"));r.PoolConfig=a.default,Object.defineProperty(r,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return a.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(r,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return a.DEFAULT_MAX_SIZE}});e=s(e("./pool"));r.Pool=e.default,r.default=e.default},{"./pool":48,"./pool-config":47}],47:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACQUISITION_TIMEOUT=r.DEFAULT_MAX_SIZE=void 0;r.DEFAULT_MAX_SIZE=100;r.DEFAULT_ACQUISITION_TIMEOUT=6e4;var n=(o.defaultConfig=function(){return new o(100,6e4)},o.fromDriverConfig=function(e){return new o(s(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,s(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)},o);function o(e,t){this.maxSize=i(e,100),this.acquisitionTimeout=i(t,6e4)}function i(e,t){return 0===e||e?e:t}function s(e){return 0===e||e}r.default=n},{}],48:[function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a=n(e("./pool-config")),u=e("neo4j-driver-core"),l=u.internal.logger.Logger,e=(i.prototype.acquire=function(s){var a=this;return this._acquire(s).then(function(e){var o=s.asKey();if(e)return e;var i=a._acquireRequests;return i[o]||(i[o]=[]),new Promise(function(e,t){var r=setTimeout(function(){var e,t=i[o];t&&(i[o]=t.filter(function(e){return e!==n})),n.isCompleted()||(e=a.activeResourceCount(s),t=a.has(s)?a._pools[o].length:0,n.reject(u.newError("Connection acquisition timed out in "+a._acquisitionTimeout+" ms. Pool status: Active conn count = "+e+", Idle conn count = "+t+".")))},a._acquisitionTimeout),n=new f(o,e,t,r,a._log);i[o].push(n)})})},i.prototype.purge=function(e){return this._purgeKey(e.asKey())},i.prototype.close=function(){var t=this;return this._closed=!0,Promise.all(Object.keys(this._pools).map(function(e){return t._purgeKey(e)}))},i.prototype.keepAll=function(e){var t=this,r=e.map(function(e){return e.asKey()}),e=Object.keys(this._pools).filter(function(e){return-1===r.indexOf(e)});return Promise.all(e.map(function(e){return t._purgeKey(e)}))},i.prototype.has=function(e){return e.asKey()in this._pools},i.prototype.activeResourceCount=function(e){return this._activeResourceCounts[e.asKey()]||0},i.prototype._acquire=function(i){return o(this,void 0,void 0,function(){var t,r,n,o;return c(this,function(e){switch(e.label){case 0:if(this._closed)throw u.newError("Pool is closed, it is no more able to serve requests.");t=i.asKey(),(r=this._pools[t])||(r=[],this._pools[t]=r,this._pendingCreates[t]=0),e.label=1;case 1:return r.length?(n=r.pop(),this._validate(n)?(this._removeIdleObserver&&this._removeIdleObserver(n),s(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(n+" acquired from the pool "+t),[2,n]):[3,2]):[3,5];case 2:return[4,this._destroy(n)];case 3:e.sent(),e.label=4;case 4:return[3,1];case 5:if(0<this._maxSize&&this.activeResourceCount(i)+this._pendingCreates[t]>=this._maxSize)return[2,null];this._pendingCreates[t]=this._pendingCreates[t]+1,e.label=6;case 6:return e.trys.push([6,,8,9]),[4,this._create(i,this._release)];case 7:return o=e.sent(),s(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" created for the pool "+t),[3,9];case 8:return this._pendingCreates[t]=this._pendingCreates[t]-1,[7];case 9:return[2,o]}})})},i.prototype._release=function(a,u){return o(this,void 0,void 0,function(){var o,i,s=this;return c(this,function(e){switch(e.label){case 0:return(o=a.asKey(),i=this._pools[o])?this._validate(u)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(u+" destroyed and can't be released to the pool "+o+" because it is not functional"),[4,this._destroy(u)]):[3,4];case 1:return e.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(u,{onError:function(e){s._log.debug("Idle connection "+u+" destroyed because of error: "+e);e=s._pools[o];e&&(s._pools[o]=e.filter(function(e){return e!==u})),s._destroy(u).catch(function(){})}}),i.push(u),this._log.isDebugEnabled()&&this._log.debug(u+" released to the pool "+o),e.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(u+" destroyed and can't be released to the pool "+o+" because pool has been purged"),[4,this._destroy(u)];case 5:e.sent(),e.label=6;case 6:return t=o,r=this._activeResourceCounts,0<(n=(r[t]||0)-1)?r[t]=n:delete r[t],this._processPendingAcquireRequests(a),[2]}var t,r,n})})},i.prototype._purgeKey=function(n){return o(this,void 0,void 0,function(){var t,r;return c(this,function(e){switch(e.label){case 0:t=this._pools[n]||[],e.label=1;case 1:return t.length?(r=t.pop(),this._removeIdleObserver&&this._removeIdleObserver(r),[4,this._destroy(r)]):[3,3];case 2:return e.sent(),[3,1];case 3:return delete this._pools[n],[2]}})})},i.prototype._processPendingAcquireRequests=function(t){var r,n=this,e=t.asKey(),o=this._acquireRequests[e];o&&((r=o.shift())?this._acquire(t).catch(function(e){return r.reject(e),null}).then(function(e){e&&(r.isCompleted()?n._release(t,e):r.resolve(e))}):delete this._acquireRequests[e])},i);function i(e){var t=void 0===e?{}:e,r=t.create,n=void 0===r?function(e,t){return Promise.resolve()}:r,o=t.destroy,i=void 0===o?function(e){return Promise.resolve()}:o,s=t.validate,e=void 0===s?function(e){return!0}:s,r=t.installIdleObserver,o=void 0===r?function(e,t){}:r,s=t.removeIdleObserver,r=void 0===s?function(e){}:s,s=t.config,s=void 0===s?a.default.defaultConfig():s,t=t.log,t=void 0===t?l.noOp():t;this._create=n,this._destroy=i,this._validate=e,this._installIdleObserver=o,this._removeIdleObserver=r,this._maxSize=s.maxSize,this._acquisitionTimeout=s.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=t,this._closed=!1}function s(e,t){var r=t[e]||0;t[e]=r+1}var f=(h.prototype.isCompleted=function(){return this._completed},h.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(e+" acquired from the pool "+this._key),this._resolve(e))},h.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))},h);function h(e,t,r,n,o){this._key=e,this._resolve=t,this._reject=r,this._timeoutId=n,this._log=o,this._completed=!1}r.default=e},{"./pool-config":47,"neo4j-driver-core":58}],49:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingTable=r.Rediscovery=void 0;var o=n(e("./rediscovery"));r.Rediscovery=o.default;e=n(e("./routing-table"));r.RoutingTable=e.default,r.default=o.default},{"./rediscovery":50,"./routing-table":51}],50:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("./routing-table")),a=e("../bolt"),u=e("neo4j-driver-core"),c=u.error.SERVICE_UNAVAILABLE,e=(o.prototype.lookupRoutingTableOnRouter=function(t,r,n){var o=this;return t._acquireConnection(function(e){return o._requestRawRoutingTable(e,t,r,n).then(function(e){return e.isNull?null:i.default.fromRawRoutingTable(r,n,e)})})},o.prototype._requestRawRoutingTable=function(e,n,o,i){var s=this;return new Promise(function(t,r){e.protocol().requestRoutingInformation({routingContext:s._routingContext,databaseName:o,sessionContext:{bookmark:n._lastBookmark,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:t,onError:function(e){"Neo.ClientError.Database.DatabaseNotFound"===e.code?r(e):"Neo.ClientError.Procedure.ProcedureNotFound"===e.code?r(u.newError("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",c)):t(a.RawRoutingTable.ofNull())}})})},o);function o(e){this._routingContext=e}r.default=e},{"../bolt":11,"./routing-table":51,"neo4j-driver-core":58}],51:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e};Object.defineProperty(r,"__esModule",{value:!0}),r.createValidRoutingTable=void 0;var a=e("neo4j-driver-core"),e=a.internal.constants,i=e.ACCESS_MODE_WRITE,s=e.ACCESS_MODE_READ,u=a.internal.serverAddress.ServerAddress,c=a.error.PROTOCOL_ERROR,l=(f.fromRawRoutingTable=p,f.prototype.forget=function(e){this.readers=h(this.readers,e),this.writers=h(this.writers,e)},f.prototype.forgetRouter=function(e){this.routers=h(this.routers,e)},f.prototype.forgetWriter=function(e){this.writers=h(this.writers,e)},f.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===s&&0===this.readers.length||e===i&&0===this.writers.length},f.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},f.prototype.allServers=function(){return o(o(o([],n(this.routers)),n(this.readers)),n(this.writers))},f.prototype.toString=function(){return"RoutingTable[database="+this.databaseName+", expirationTime="+this.expirationTime+", currentTime="+Date.now()+", routers=["+this.routers+"], readers=["+this.readers+"], writers=["+this.writers+"]]"},f);function f(e){var t=void 0===e?{}:e,r=t.database,n=t.routers,o=t.readers,i=t.writers,e=t.expirationTime,t=t.ttl;this.database=r,this.databaseName=r||"default database",this.routers=n||[],this.readers=o||[],this.writers=i||[],this.expirationTime=e||a.int(0),this.ttl=t}function h(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function p(e,t,r){var n=r.ttl,o=function(t,r){try{var e=a.int(Date.now()),n=a.int(t.ttl).multiply(1e3).add(e);return n.lessThan(e)?a.Integer.MAX_VALUE:n}catch(e){throw a.newError("Unable to parse TTL entry from router "+r+" from raw routing table:\n"+a.json.stringify(t)+"\nError message: "+e.message,c)}}(r,t),i=function(t,r){try{var n=[],o=[],i=[];return t.servers.forEach(function(e){var t=e.role,e=e.addresses;"ROUTE"===t?n=_(e).map(function(e){return u.fromUrl(e)}):"WRITE"===t?i=_(e).map(function(e){return u.fromUrl(e)}):"READ"===t&&(o=_(e).map(function(e){return u.fromUrl(e)}))}),{routers:n,readers:o,writers:i}}catch(e){throw a.newError("Unable to parse servers entry from router "+r+" from addresses:\n"+a.json.stringify(t.servers)+"\nError message: "+e.message,c)}}(r,t),s=i.routers,r=i.readers,i=i.writers;return d(s,"routers",t),d(r,"readers",t),new l({database:e,routers:s,readers:r,writers:i,expirationTime:o,ttl:n})}function d(e,t,r){if(0===e.length)throw a.newError("Received no "+t+" from router "+r,c)}function _(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}r.default=l,r.createValidRoutingTable=p},{"neo4j-driver-core":58}],52:[function(e,t,r){"use strict";function u(e,t,r){return t<=e&&e<=r}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function s(e){this.tokens=[].slice.call(e)}s.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};function c(e,t){if(e)throw TypeError("Decoder error");return t||65533}var n="utf-8";function o(e,t){if(!(this instanceof o))return new o(e,t);if((e=void 0!==e?String(e).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function a(e,t){if(!(this instanceof a))return new a(e,t);if((e=void 0!==e?String(e).toLowerCase():n)!==n)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function l(e){var r=e.fatal,n=0,o=0,i=0,s=128,a=191;this.handler=function(e,t){if(-1===t&&0!==i)return i=0,c(r);if(-1===t)return-1;if(0===i){if(u(t,0,127))return t;if(u(t,194,223))i=1,n=t-192;else if(u(t,224,239))224===t&&(s=160),237===t&&(a=159),i=2,n=t-224;else{if(!u(t,240,244))return c(r);240===t&&(s=144),244===t&&(a=143),i=3,n=t-240}return n<<=6*i,null}if(!u(t,s,a))return n=i=o=0,s=128,a=191,e.prepend(t),c(r);if(a=191,n+=t-(s=128)<<6*(i-(o+=1)),o!==i)return null;t=n;return n=i=o=0,t}}function f(e){e.fatal;this.handler=function(e,t){if(-1===t)return-1;if(u(t,0,127))return t;var r,n;u(t,128,2047)?(r=1,n=192):u(t,2048,65535)?(r=2,n=224):u(t,65536,1114111)&&(r=3,n=240);for(var o=[(t>>6*r)+n];0<r;)o.push(128|63&t>>6*(r-1)),--r;return o}}o.prototype={decode:function(e,t){e="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0);t=i(t),this._streaming||(this._decoder=new l({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,n=new s(e),o=[];!n.endOfStream()&&-1!==(r=this._decoder.handler(n,n.read()));)null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r));if(!this._streaming){for(;-1!==(r=this._decoder.handler(n,n.read()))&&(null!==r&&(Array.isArray(r)?o.push.apply(o,r):o.push(r)),!n.endOfStream()););this._decoder=null}return o.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===o[0]?(this._BOMseen=!0,o.shift()):this._BOMseen=!0)),function(e){for(var t="",r=0;r<e.length;++r){var n=e[r];n<=65535?t+=String.fromCharCode(n):(n-=65536,t+=String.fromCharCode(55296+(n>>10),56320+(1023&n)))}return t}(o)}},a.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new f(this._options)),this._streaming=Boolean(t.stream);for(var r,n=[],o=new s(function(e){for(var t=String(e),r=t.length,n=0,o=[];n<r;){var i,s=t.charCodeAt(n);s<55296||57343<s?o.push(s):56320<=s&&s<=57343?o.push(65533):55296<=s&&s<=56319&&(n!==r-1&&56320<=(i=e.charCodeAt(n+1))&&i<=57343?(o.push(65536+((1023&s)<<10)+(1023&i)),n+=1):o.push(65533)),n+=1}return o}(e));!o.endOfStream()&&-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);if(!this._streaming){for(;-1!==(r=this._encoder.handler(o,o.read()));)Array.isArray(r)?n.push.apply(n,r):n.push(r);this._encoder=null}return new Uint8Array(n)}},r.TextEncoder=a,r.TextDecoder=o},{}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.acquireConnection=function(e){throw Error("Not implemented")},o.prototype.supportsMultiDb=function(){throw Error("Not implemented")},o.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o);function o(){}r.default=n},{}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.isOpen=function(){return!1},o.prototype.protocol=function(){throw Error("Not implemented")},o.prototype.connect=function(e,t){throw Error("Not implemented")},o.prototype.write=function(e,t,r){throw Error("Not implemented")},o.prototype.resetAndFlush=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o.prototype._release=function(){return Promise.resolve()},o);function o(){}r.default=n},{}],55:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.WRITE=r.READ=r.Driver=void 0;var s=e("./internal/bookmark"),o=e("./internal/connectivity-verifier"),i=n(e("./internal/resolver/configured-custom-resolver")),a=e("./internal/constants"),u=e("./internal/logger"),c=n(e("./session")),l=e("./internal/util"),f=36e5,h=1e3,e=a.ACCESS_MODE_READ;r.READ=e;var p=a.ACCESS_MODE_WRITE;r.WRITE=p;var d=0,e=(_.prototype.verifyConnectivity=function(e){var t=(void 0===e?{}:e).database,e=void 0===t?"":t,t=this._getOrCreateConnectionProvider();return new o.ConnectivityVerifier(t).verify({database:e})},_.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},_.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},_.prototype._supportsRouting=function(){return this._meta.routing},_.prototype._isEncrypted=function(){return this._config.encrypted===l.ENCRYPTION_ON},_.prototype._getTrust=function(){return this._config.trust},_.prototype.session=function(e){var t=void 0===e?{}:e,r=t.defaultAccessMode,n=t.bookmarks,e=t.database,t=t.fetchSize;return this._newSession({defaultAccessMode:void 0===r?p:r,bookmarkOrBookmarks:n,database:void 0===e?"":e,reactive:!1,fetchSize:b(t,this._config.fetchSize)})},_.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},_.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},_.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,o=e.reactive,i=e.fetchSize,e=c.default._validateSessionMode(t),t=this._getOrCreateConnectionProvider(),r=r?new s.Bookmark(r):s.Bookmark.empty();return new c.default({mode:e,database:n||"",connectionProvider:t,bookmark:r,config:this._config,reactive:o,fetchSize:i})},_.prototype._getOrCreateConnectionProvider=function(){var e;return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(e=this._config,new i.default(e.resolver)))),this._connectionProvider},_);function _(e,t,r){var n;(n=t=void 0===t?{}:t).maxConnectionLifetime=y(n.maxConnectionLifetime,f),n.maxConnectionPoolSize=y(n.maxConnectionPoolSize,a.DEFAULT_POOL_MAX_SIZE),n.connectionAcquisitionTimeout=y(n.connectionAcquisitionTimeout,a.DEFAULT_POOL_ACQUISITION_TIMEOUT),n.fetchSize=b(n.fetchSize,h),function(e){var t=e.resolver;if(t&&"function"!=typeof t)throw new TypeError("Configured resolver should be a function. Got: "+t)}(t),this._id=d++,this._meta=e,this._config=t,this._log=u.Logger.create(t),this._createConnectionProvider=r,this._connectionProvider=null,this._afterConstruction()}function y(e,t){e=parseInt(e,10);return 0<e||0===e?e:e<0?Number.MAX_SAFE_INTEGER:t}function b(e,t){e=parseInt(e,10);if(0<e||e===a.FETCH_ALL)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or "+a.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}r.Driver=e,r.default=e},{"./internal/bookmark":60,"./internal/connectivity-verifier":62,"./internal/constants":63,"./internal/logger":65,"./internal/resolver/configured-custom-resolver":68,"./internal/util":76,"./session":81}],56:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PROTOCOL_ERROR=r.SESSION_EXPIRED=r.SERVICE_UNAVAILABLE=r.Neo4jError=r.newError=void 0;r.SERVICE_UNAVAILABLE="ServiceUnavailable";r.SESSION_EXPIRED="SessionExpired";r.PROTOCOL_ERROR="ProtocolError";var i,s="N/A",a=(i=Error,o(u,i),u);function u(e,t){e=i.call(this,e)||this;return e.constructor=u,e.__proto__=u.prototype,e.code=t,e.name="Neo4jError",e}r.Neo4jError=a,r.newError=function(e,t){return new a(e,null!=t?t:s)}},{}],57:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=void 0;var n=e("./json"),o={value:!0,enumerable:!1,configurable:!1,writable:!1},i="__isNode__",s="__isRelationship__",a="__isUnboundRelationship__",u="__isPath__",c="__isPathSegment__";function l(e,t){return!0===(e&&e[t])}f.prototype.toString=function(){for(var e="("+this.identity,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(t=0;t<r.length;t++)0<t&&(e+=","),e+=r[t]+":"+n.stringify(this.properties[r[t]]);e+="}"}return e+=")"},e=f;function f(e,t,r){this.identity=e,this.labels=t,this.properties=r}r.Node=e,Object.defineProperty(e.prototype,i,o),r.isNode=function(e){return l(e,i)};var h=(p.prototype.toString=function(){var e="("+this.start+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+n.stringify(this.properties[t[r]]);e+="}"}return e+="]->("+this.end+")"},p);function p(e,t,r,n,o){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=o}r.Relationship=h,Object.defineProperty(h.prototype,s,o),r.isRelationship=function(e){return l(e,s)};d.prototype.bind=function(e,t){return new h(this.identity,e,t,this.type,this.properties)},d.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+n.stringify(this.properties[t[r]]);e+="}"}return e+="]->"},e=d;function d(e,t,r){this.identity=e,this.type=t,this.properties=r}r.UnboundRelationship=e,Object.defineProperty(e.prototype,a,o),r.isUnboundRelationship=function(e){return l(e,a)};e=function(e,t,r){this.start=e,this.relationship=t,this.end=r};r.PathSegment=e,Object.defineProperty(e.prototype,c,o),r.isPathSegment=function(e){return l(e,c)};e=function(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length};r.Path=e,Object.defineProperty(e.prototype,u,o),r.isPath=function(e){return l(e,u)}},{"./json":77}],58:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.types=r.Driver=r.Session=r.Transaction=r.Connection=r.ConnectionProvider=r.Result=r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=r.ResultSummary=r.Record=r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=r.Time=r.LocalTime=r.LocalDateTime=r.isTime=r.isLocalTime=r.isLocalDateTime=r.isDuration=r.isDateTime=r.isDate=r.Duration=r.DateTime=r.Date=r.Point=r.isPoint=r.internal=r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=r.Integer=r.error=r.Neo4jError=r.newError=void 0,r.json=r.driver=void 0;var a=e("./error");Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return a.newError}}),Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}});var u=i(e("./integer"));r.Integer=u.default,Object.defineProperty(r,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(r,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(r,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(r,"toString",{enumerable:!0,get:function(){return u.toString}});var c=e("./temporal-types");Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return c.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return c.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return c.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return c.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return c.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return c.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return c.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return c.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return c.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return c.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return c.Time}});var l=e("./graph-types");Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(r,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(r,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(r,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(r,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(r,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}});var f=s(e("./record"));r.Record=f.default;var h=e("./spatial-types");Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return h.Point}});var p=i(e("./result-summary"));r.ResultSummary=p.default,Object.defineProperty(r,"queryType",{enumerable:!0,get:function(){return p.queryType}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return p.ServerInfo}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return p.Notification}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return p.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return p.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return p.QueryStatistics}}),Object.defineProperty(r,"Stats",{enumerable:!0,get:function(){return p.Stats}});var d=s(e("./result"));r.Result=d.default;var _=s(e("./connection-provider"));r.ConnectionProvider=_.default;var y=s(e("./connection"));r.Connection=y.default;var b=s(e("./transaction"));r.Transaction=b.default;var v=s(e("./session"));r.Session=v.default;var m=i(e("./driver")),g=m;r.Driver=m.default,r.driver=g;_=i(e("./types"));r.types=_;s=i(e("./json"));r.json=s;i=i(e("./internal"));r.internal=i;e={SERVICE_UNAVAILABLE:a.SERVICE_UNAVAILABLE,SESSION_EXPIRED:a.SESSION_EXPIRED,PROTOCOL_ERROR:a.PROTOCOL_ERROR};r.error=e;s={newError:a.newError,Neo4jError:a.Neo4jError,error:e,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:i,isPoint:h.isPoint,Point:h.Point,Date:c.Date,DateTime:c.DateTime,Duration:c.Duration,isDate:c.isDate,isDateTime:c.isDateTime,isDuration:c.isDuration,isLocalDateTime:c.isLocalDateTime,isLocalTime:c.isLocalTime,isTime:c.isTime,LocalDateTime:c.LocalDateTime,LocalTime:c.LocalTime,Time:c.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:f.default,ResultSummary:p.default,queryType:p.queryType,ServerInfo:p.ServerInfo,Notification:p.Notification,Plan:p.Plan,ProfiledPlan:p.ProfiledPlan,QueryStatistics:p.QueryStatistics,Stats:p.Stats,Result:d.default,Transaction:b.default,Session:v.default,Driver:m.default,Connection:y.default,types:_,driver:g,json:s};r.default=s},{"./connection":54,"./connection-provider":53,"./driver":55,"./error":56,"./graph-types":57,"./integer":59,"./internal":64,"./json":77,"./record":78,"./result":80,"./result-summary":79,"./session":81,"./spatial-types":82,"./temporal-types":83,"./transaction":84,"./types":85}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=void 0;var c=e("./error"),n=new Map,o=(h.prototype.inSafeRange=function(){return this.greaterThanOrEqual(h.MIN_SAFE_VALUE)&&this.lessThanOrEqual(h.MAX_SAFE_VALUE)},h.prototype.toInt=function(){return this.low},h.prototype.toNumber=function(){return this.high*i+(this.low>>>0)},h.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(i)+BigInt(this.low>>>0);var e=this.negate();return BigInt(-1)*(BigInt(e.high>>>0)*BigInt(i)+BigInt(e.low>>>0))},h.prototype.toNumberOrInfinity=function(){return this.lessThan(h.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(h.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},h.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(h.MIN_VALUE)){var t=h.fromNumber(e),r=this.div(t),n=r.multiply(t).subtract(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=h.fromNumber(Math.pow(e,6));n=this;for(var i="";;){var s=n.div(o),a=(n.subtract(s.multiply(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},h.prototype.getHighBits=function(){return this.high},h.prototype.getLowBits=function(){return this.low},h.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(h.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1},h.prototype.isZero=function(){return 0===this.high&&0===this.low},h.prototype.isNegative=function(){return this.high<0},h.prototype.isPositive=function(){return 0<=this.high},h.prototype.isOdd=function(){return 1==(1&this.low)},h.prototype.isEven=function(){return 0==(1&this.low)},h.prototype.equals=function(e){e=h.fromValue(e);return this.high===e.high&&this.low===e.low},h.prototype.notEquals=function(e){return!this.equals(e)},h.prototype.lessThan=function(e){return this.compare(e)<0},h.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},h.prototype.greaterThan=function(e){return 0<this.compare(e)},h.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},h.prototype.compare=function(e){var t=h.fromValue(e);if(this.equals(t))return 0;var r=this.isNegative(),e=t.isNegative();return r&&!e||(r||!e)&&this.subtract(t).isNegative()?-1:1},h.prototype.negate=function(){return this.equals(h.MIN_VALUE)?h.MIN_VALUE:this.not().add(h.ONE)},h.prototype.add=function(e){var t=h.fromValue(e),r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=0,l=0,f=0,e=0;return f+=(e+=i+(65535&t.low))>>>16,l+=(f+=o+u)>>>16,c+=(l+=n+a)>>>16,c+=r+s,h.fromBits((f&=65535)<<16|(e&=65535),(c&=65535)<<16|(l&=65535))},h.prototype.subtract=function(e){e=h.fromValue(e);return this.add(e.negate())},h.prototype.multiply=function(e){if(this.isZero())return h.ZERO;var t=h.fromValue(e);if(t.isZero())return h.ZERO;if(this.equals(h.MIN_VALUE))return t.isOdd()?h.MIN_VALUE:h.ZERO;if(t.equals(h.MIN_VALUE))return this.isOdd()?h.MIN_VALUE:h.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(p)&&t.lessThan(p))return h.fromNumber(this.toNumber()*t.toNumber());var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,f=0,e=0,t=0;return e+=(t+=i*c)>>>16,f+=(e+=o*c)>>>16,e&=65535,f+=(e+=i*u)>>>16,l+=(f+=n*c)>>>16,f&=65535,l+=(f+=o*u)>>>16,f&=65535,l+=(f+=i*a)>>>16,l+=r*c+n*u+o*a+i*s,h.fromBits((e&=65535)<<16|(t&=65535),(l&=65535)<<16|(f&=65535))},h.prototype.div=function(e){var t,r,n,o=h.fromValue(e);if(o.isZero())throw c.newError("division by zero");if(this.isZero())return h.ZERO;{if(this.equals(h.MIN_VALUE))return o.equals(h.ONE)||o.equals(h.NEG_ONE)?h.MIN_VALUE:o.equals(h.MIN_VALUE)?h.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(h.ZERO)?o.isNegative()?h.ONE:h.NEG_ONE:(t=this.subtract(o.multiply(n)),r=n.add(t.div(o)));if(o.equals(h.MIN_VALUE))return h.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=h.ZERO,t=this;t.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(t.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),a=h.fromNumber(n),u=a.multiply(o);u.isNegative()||u.greaterThan(t);)u=(a=h.fromNumber(n-=s)).multiply(o);a.isZero()&&(a=h.ONE),r=r.add(a),t=t.subtract(u)}return r},h.prototype.modulo=function(e){e=h.fromValue(e);return this.subtract(this.div(e).multiply(e))},h.prototype.not=function(){return h.fromBits(~this.low,~this.high)},h.prototype.and=function(e){e=h.fromValue(e);return h.fromBits(this.low&e.low,this.high&e.high)},h.prototype.or=function(e){e=h.fromValue(e);return h.fromBits(this.low|e.low,this.high|e.high)},h.prototype.xor=function(e){e=h.fromValue(e);return h.fromBits(this.low^e.low,this.high^e.high)},h.prototype.shiftLeft=function(e){e=h.toNumber(e);return 0==(e&=63)?h.ZERO:e<32?h.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):h.fromBits(0,this.low<<e-32)},h.prototype.shiftRight=function(e){var t=h.toNumber(e);return 0==(t&=63)?h.ZERO:e<32?h.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):h.fromBits(this.high>>t-32,0<=this.high?0:-1)},h.isInteger=function(e){return!0===(e&&e.__isInteger__)},h.fromInt=function(e){var t;return-128<=(e|=0)&&e<128&&(t=n.get(e))||(t=new h(e,e<0?-1:0),-128<=e&&e<128&&n.set(e,t)),t},h.fromBits=function(e,t){return new h(e,t)},h.fromNumber=function(e){return isNaN(e)||!isFinite(e)?h.ZERO:e<=-s?h.MIN_VALUE:s<=e+1?h.MAX_VALUE:e<0?h.fromNumber(-e).negate():new h(e%i|0,e/i|0)},h.fromString=function(e,t){if(0===e.length)throw c.newError("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h.ZERO;if((t=t||10)<2||36<t)throw c.newError("radix out of range: "+t);var r;if(0<(r=e.indexOf("-")))throw c.newError('number format error: interior "-" character: '+e);if(0===r)return h.fromString(e.substring(1),t).negate();for(var n=h.fromNumber(Math.pow(t,8)),o=h.ZERO,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);o=s<8?(s=h.fromNumber(Math.pow(t,s)),o.multiply(s).add(h.fromNumber(a))):(o=o.multiply(n)).add(h.fromNumber(a))}return o},h.fromValue=function(e){return e instanceof h?e:"number"==typeof e?h.fromNumber(e):"string"==typeof e?h.fromString(e):"bigint"==typeof e?h.fromString(e.toString()):new h(e.low,e.high)},h.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return h.fromValue(e).toNumber()}},h.toString=function(e,t){return h.fromValue(e).toString(t)},h.inSafeRange=function(e){return h.fromValue(e).inSafeRange()},h.ZERO=h.fromInt(0),h.ONE=h.fromInt(1),h.NEG_ONE=h.fromInt(-1),h.MAX_VALUE=h.fromBits(-1,2147483647),h.MIN_VALUE=h.fromBits(0,-2147483648),h.MIN_SAFE_VALUE=h.fromBits(1,-2097152),h.MAX_SAFE_VALUE=h.fromBits(-1,2097151),h.__isInteger__=!0,h);function h(e,t){this.low=e||0,this.high=t||0}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var i=4294967296,s=i*i/2,p=o.fromInt(1<<24),e=o.fromValue;r.int=e;e=o.isInteger;r.isInt=e;e=o.inSafeRange;r.inSafeRange=e;e=o.toNumber;r.toNumber=e;e=o.toString;r.toString=e,r.default=o},{"./error":56}],60:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Bookmark=void 0;var s=i(e("./util")),e=(a.empty=function(){return u},a.prototype.isEmpty=function(){return 0===this._values.length},a.prototype.values=function(){return this._values},a.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={}).bookmarks=this._values,e)},a);function a(e){this._values=function(e){if(!e)return[];if(s.isString(e))return[e];if(Array.isArray(e)){for(var t=[],r=function r(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(r(t)):e.concat(t)},[])}(e),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!s.isString(o))throw new TypeError("Bookmark value should be a string, given: '"+o+"'");t.push(o)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+e+"'")}(e)}var u=new(r.Bookmark=e)(null)},{"./util":76}],61:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_CONNECTION_HOLDER=r.ReadOnlyConnectionHolder=r.ConnectionHolder=void 0;var i=e("../error"),s=e("./util"),a=e("./constants"),u=e("./bookmark"),c=(l.prototype.mode=function(){return this._mode},l.prototype.database=function(){return this._database},l.prototype.bookmark=function(){return this._bookmark},l.prototype.connectionProvider=function(){return this._connectionProvider},l.prototype.referenceCount=function(){return this._referenceCount},l.prototype.initializeConnection=function(){return 0===this._referenceCount&&this._connectionProvider?(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark}),this._referenceCount++,!0):(this._referenceCount++,!1)},l.prototype.getConnection=function(){return this._connectionPromise},l.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},l.prototype.close=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},l.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(e){return e?e.resetAndFlush().catch(_).then(function(){return e._release()}):Promise.resolve()}).catch(_),this._connectionPromise},l);function l(e){var t=void 0===e?{}:e,r=t.mode,n=void 0===r?a.ACCESS_MODE_WRITE:r,e=t.database,r=void 0===e?"":e,e=t.bookmark,t=t.connectionProvider;this._mode=n,this._database=r?s.assertString(r,"database"):"",this._bookmark=e||u.Bookmark.empty(),this._connectionProvider=t,this._referenceCount=0,this._connectionPromise=Promise.resolve()}r.ConnectionHolder=c;var f,h,e=(o(p,f=c),p.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},p.prototype.getConnection=function(){return this._connectionHolder.getConnection()},p.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},p.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},p);function p(e){var t=f.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return t._connectionHolder=e,t}function d(){return null!==h&&h.apply(this,arguments)||this}r.ReadOnlyConnectionHolder=e,r.default=e;c=new(o(d,h=c),d.prototype.mode=function(){},d.prototype.database=function(){},d.prototype.initializeConnection=function(){return!0},d.prototype.getConnection=function(){return Promise.reject(i.newError("This connection holder does not serve connections"))},d.prototype.releaseConnection=function(){return Promise.resolve()},d.prototype.close=function(){return Promise.resolve()},d);function _(e){}r.EMPTY_CONNECTION_HOLDER=c},{"../error":56,"./bookmark":60,"./constants":63,"./util":76}],62:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectivityVerifier=void 0;var n=e("./connection-holder"),o=e("./constants"),i=e("../error"),e=(s.prototype.verify=function(e){var t,r=(void 0===e?{}:e).database;return e=this._connectionProvider,(t=new n.ConnectionHolder({mode:o.ACCESS_MODE_READ,database:void 0===r?"":r,connectionProvider:e})).initializeConnection(),t.getConnection().then(function(e){if(!e)throw i.newError("Unexpected error acquiring transaction");return t.close().then(function(){return e.server})}).catch(function(e){return t.close().catch(function(e){}).then(function(){return Promise.reject(e)})})},s);function s(e){this._connectionProvider=e}r.ConnectivityVerifier=e},{"../error":56,"./connection-holder":61,"./constants":63}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOLT_PROTOCOL_V4_3=r.BOLT_PROTOCOL_V4_2=r.BOLT_PROTOCOL_V4_1=r.BOLT_PROTOCOL_V4_0=r.BOLT_PROTOCOL_V3=r.BOLT_PROTOCOL_V2=r.BOLT_PROTOCOL_V1=r.DEFAULT_POOL_MAX_SIZE=r.DEFAULT_POOL_ACQUISITION_TIMEOUT=r.ACCESS_MODE_WRITE=r.ACCESS_MODE_READ=r.FETCH_ALL=void 0;r.FETCH_ALL=-1;r.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4;r.DEFAULT_POOL_MAX_SIZE=100;r.ACCESS_MODE_READ="READ";r.ACCESS_MODE_WRITE="WRITE";r.BOLT_PROTOCOL_V1=1;r.BOLT_PROTOCOL_V2=2;r.BOLT_PROTOCOL_V3=3;r.BOLT_PROTOCOL_V4_0=4;r.BOLT_PROTOCOL_V4_1=4.1;r.BOLT_PROTOCOL_V4_2=4.2;r.BOLT_PROTOCOL_V4_3=4.3},{}],64:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.retryStrategy=r.resolver=r.serverAddress=r.urlUtil=r.logger=r.connectivityVerifier=r.transactionExecutor=r.txConfig=r.connectionHolder=r.constants=r.bookmark=r.observer=r.temporalUtil=r.util=void 0;var s=i(e("./util"));r.util=s;s=i(e("./temporal-util"));r.temporalUtil=s;s=i(e("./observers"));r.observer=s;s=i(e("./bookmark"));r.bookmark=s;s=i(e("./constants"));r.constants=s;s=i(e("./connection-holder"));r.connectionHolder=s;s=i(e("./tx-config"));r.txConfig=s;s=i(e("./transaction-executor"));r.transactionExecutor=s;s=i(e("./connectivity-verifier"));r.connectivityVerifier=s;s=i(e("./logger"));r.logger=s;s=i(e("./url-util"));r.urlUtil=s;s=i(e("./server-address"));r.serverAddress=s;s=i(e("./resolver"));r.resolver=s;e=i(e("./retry-strategy"));r.retryStrategy=e},{"./bookmark":60,"./connection-holder":61,"./connectivity-verifier":62,"./constants":63,"./logger":65,"./observers":66,"./resolver":69,"./retry-strategy":70,"./server-address":71,"./temporal-util":72,"./transaction-executor":73,"./tx-config":74,"./url-util":75,"./util":76}],65:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0;var i,s=e("../error"),a="error",u="warn",c="info",l="debug",f=c,h=((e={})[a]=0,e[u]=1,e[c]=2,e[l]=3,e),e=(p.create=function(e){if(e&&e.logging){e=e.logging;return new p(function(e){if(e&&e.level){var t=e.level,e=h[t];if(!e&&0!==e)throw s.newError("Illegal logging level: "+t+". Supported levels are: "+Object.keys(h));return t}return f}(e),function(e){if(e&&e.logger){var t=e.logger;if(t&&"function"==typeof t)return t}throw s.newError("Illegal logger function: "+e.logger)}(e))}return this.noOp()},p.noOp=function(){return _},p.prototype.isErrorEnabled=function(){return y(this._level,a)},p.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction(a,e)},p.prototype.isWarnEnabled=function(){return y(this._level,u)},p.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction(u,e)},p.prototype.isInfoEnabled=function(){return y(this._level,c)},p.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(c,e)},p.prototype.isDebugEnabled=function(){return y(this._level,l)},p.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction(l,e)},p);function p(e,t){this._level=e,this._loggerFunction=t}function d(){return i.call(this,c,function(e,t){})||this}r.Logger=e;var _=new(o(d,i=e),d.prototype.isErrorEnabled=function(){return!1},d.prototype.error=function(e){},d.prototype.isWarnEnabled=function(){return!1},d.prototype.warn=function(e){},d.prototype.isInfoEnabled=function(){return!1},d.prototype.info=function(e){},d.prototype.isDebugEnabled=function(){return!1},d.prototype.debug=function(e){},d);function y(e,t){return h[e]>=h[t]}},{"../error":56}],66:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FailedObserver=r.CompletedObserver=void 0;var n=(o.prototype.subscribe=function(e){s(e,e.onKeys,[]),s(e,e.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(e){throw Error("CompletedObserver not supposed to call onError")},o);function o(){}r.CompletedObserver=n;i.prototype.subscribe=function(e){s(e,e.onError,this._error),this._observers.push(e)},i.prototype.onError=function(t){var e=this;Promise.resolve(s(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(e){return s(e,e.onError,t)})})},i.prototype.cancel=function(){},i.prototype.prepareToHandleSingleResponse=function(){},i.prototype.markCompleted=function(){},n=i;function i(e){var t=e.error,e=e.onError;this._error=t,this._beforeError=e,this._observers=[],this.onError(t)}function s(e,t,r){t&&t.bind(e)(r)}r.FailedObserver=n},{}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.resolve=function(){throw new Error("Abstract function")},o.prototype._resolveToItself=function(e){return Promise.resolve([e])},o);function o(){}r.default=n},{}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../server-address");function o(e){return Promise.resolve([e])}i.prototype.resolve=function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(!Array.isArray(e))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses.Each address is '<host>:<port>'. Got: "+e);return e.map(function(e){return n.ServerAddress.fromUrl(e)})})},e=i;function i(e){this._resolverFunction=e||o}r.default=e},{"../server-address":71}],69:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ConfiguredCustomResolver=r.BaseHostNameResolver=void 0;var o=n(e("./base-host-name-resolver"));r.BaseHostNameResolver=o.default;e=n(e("./configured-custom-resolver"));r.ConfiguredCustomResolver=e.default},{"./base-host-name-resolver":67,"./configured-custom-resolver":68}],70:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.canRetryOn=void 0;var n=e("../error");r.canRetryOn=function(e){return e&&e instanceof n.Neo4jError&&e.code&&(e.code===n.SERVICE_UNAVAILABLE||e.code===n.SESSION_EXPIRED||"Neo.ClientError.Security.AuthorizationExpired"===e.code||function(e){e=e.code;if(0<=e.indexOf("TransientError"))return"Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e;return!1}(e))}},{"../error":56}],71:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.ServerAddress=void 0;var s=e("./util"),a=i(e("./url-util")),e=(u.prototype.host=function(){return this._host},u.prototype.resolvedHost=function(){return this._resolved||this._host},u.prototype.port=function(){return this._port},u.prototype.resolveWith=function(e){return new u(this._host,e,this._port,this._hostPort)},u.prototype.asHostPort=function(){return this._hostPort},u.prototype.asKey=function(){return this._hostPort},u.prototype.toString=function(){return this._stringValue},u.fromUrl=function(e){e=a.parseDatabaseUrl(e);return new u(e.host,null,e.port,e.hostAndPort)},u);function u(e,t,r,n){this._host=s.assertString(e,"host"),this._resolved=t?s.assertString(t,"resolved"):null,this._port=s.assertNumber(r,"port"),this._hostPort=n,this._stringValue=t?n+"("+t+")":""+n}r.ServerAddress=e},{"./url-util":75,"./util":76}],72:[function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(a,"__esModule",{value:!0}),a.floorMod=a.floorDiv=a.assertValidNanosecond=a.assertValidSecond=a.assertValidMinute=a.assertValidHour=a.assertValidDay=a.assertValidMonth=a.assertValidYear=a.timeZoneOffsetInSeconds=a.totalNanoseconds=a.dateToIsoString=a.timeZoneOffsetToIsoString=a.timeToIsoString=a.durationToIsoString=a.dateToEpochDay=a.localDateTimeToEpochSecond=a.localTimeToNanoOfDay=a.normalizeNanosecondsForDuration=a.normalizeSecondsForDuration=a.SECONDS_PER_DAY=a.DAYS_PER_400_YEAR_CYCLE=a.DAYS_0000_TO_1970=a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE=a.NANOS_PER_MILLISECOND=a.NANOS_PER_SECOND=a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE=a.MINUTES_PER_HOUR=a.NANOSECOND_OF_SECOND_RANGE=a.SECOND_OF_MINUTE_RANGE=a.MINUTE_OF_HOUR_RANGE=a.HOUR_OF_DAY_RANGE=a.DAY_OF_MONTH_RANGE=a.MONTH_OF_YEAR_RANGE=a.YEAR_RANGE=void 0;var u=r(e("../integer")),i=e("../error"),s=e("./util"),e=(c.prototype.contains=function(e){if(u.isInt(e)&&e instanceof u.default)return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger);if("bigint"!=typeof e)return e>=this._minNumber&&e<=this._maxNumber;e=u.int(e);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)},c.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},c);function c(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=u.int(e),this._maxInteger=u.int(t)}function l(e,t,r){e=u.int(e),t=u.int(t),r=u.int(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),e=e,(e=u.int(e)).modulo(4).equals(0)&&(!e.modulo(100).equals(0)||e.modulo(400).equals(0))||(n=n.subtract(1))),n.subtract(a.DAYS_0000_TO_1970)}function f(e,t,r){if(s.assertNumberOrInteger(e,r),!t.contains(e))throw i.newError(r+" is expected to be in range "+t+" but was: "+e);return e}function h(e,t){e=u.int(e),t=u.int(t);var r=e.div(t);return r=e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)?r.subtract(1):r}function p(e,t){return e=u.int(e),t=u.int(t),e.subtract(h(e,t).multiply(t))}function d(e){return(e=u.int(e)).equals(0)?"":"."+_(e,9)}function _(e,t){var r=(e=u.int(e)).isNegative(),n=(e=r?e.negate():e).toString();if(t)for(;n.length<t;)n="0"+n;return r?"-"+n:n}a.YEAR_RANGE=new e(-999999999,999999999),a.MONTH_OF_YEAR_RANGE=new e(1,12),a.DAY_OF_MONTH_RANGE=new e(1,31),a.HOUR_OF_DAY_RANGE=new e(0,23),a.MINUTE_OF_HOUR_RANGE=new e(0,59),a.SECOND_OF_MINUTE_RANGE=new e(0,59),a.NANOSECOND_OF_SECOND_RANGE=new e(0,999999999),a.MINUTES_PER_HOUR=60,a.SECONDS_PER_MINUTE=60,a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE*a.MINUTES_PER_HOUR,a.NANOS_PER_SECOND=1e9,a.NANOS_PER_MILLISECOND=1e6,a.NANOS_PER_MINUTE=a.NANOS_PER_SECOND*a.SECONDS_PER_MINUTE,a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE*a.MINUTES_PER_HOUR,a.DAYS_0000_TO_1970=719528,a.DAYS_PER_400_YEAR_CYCLE=146097,a.SECONDS_PER_DAY=86400,a.normalizeSecondsForDuration=function(e,t){return u.int(e).add(h(t,a.NANOS_PER_SECOND))},a.normalizeNanosecondsForDuration=function(e){return p(e,a.NANOS_PER_SECOND)},a.localTimeToNanoOfDay=function(e,t,r,n){return e=u.int(e),t=u.int(t),r=u.int(r),n=u.int(n),(e=(e=(e=e.multiply(a.NANOS_PER_HOUR)).add(t.multiply(a.NANOS_PER_MINUTE))).add(r.multiply(a.NANOS_PER_SECOND))).add(n)},a.localDateTimeToEpochSecond=function(e,t,r,n,o,i,s){return r=l(e,t,r),i=function(e,t,r){e=u.int(e),t=u.int(t),r=u.int(r);e=e.multiply(a.SECONDS_PER_HOUR);return(e=e.add(t.multiply(a.SECONDS_PER_MINUTE))).add(r)}(n,o,i),r.multiply(a.SECONDS_PER_DAY).add(i)},a.dateToEpochDay=l,a.durationToIsoString=function(e,t,r,n){return"P"+_(e)+"M"+_(t)+"DT"+function(e,t){var r;e=u.int(e),t=u.int(t);var n=e.isNegative(),o=t.greaterThan(0);e=n&&o?e.equals(-1)?"-0":e.add(1).toString():e.toString();o&&(r=d((n?t.negate().add(2*a.NANOS_PER_SECOND):t.add(a.NANOS_PER_SECOND)).modulo(a.NANOS_PER_SECOND)));return r?e+r:e}(r,n)+"S"},a.timeToIsoString=function(e,t,r,n){return _(e,2)+":"+_(t,2)+":"+_(r,2)+d(n)},a.timeZoneOffsetToIsoString=function(e){if((e=u.int(e)).equals(0))return"Z";var t=(n=e.isNegative())?"-":"+",r=_((e=n?e.multiply(-1):e).div(a.SECONDS_PER_HOUR),2),n=_(e.div(a.SECONDS_PER_MINUTE).modulo(a.MINUTES_PER_HOUR),2);return(e=(e=e.modulo(a.SECONDS_PER_MINUTE)).equals(0)?null:_(e,2))?t+r+":"+n+":"+e:t+r+":"+n},a.dateToIsoString=function(e,t,r){var n=(e=u.int(e)).isNegative(),e=_(e=n?e.multiply(-1):e,4);return(e=n?"-"+e:e)+"-"+_(t,2)+"-"+_(r,2)},a.totalNanoseconds=function(e,t){return function(e,t){{if(e instanceof u.default)return e.add(t);if("bigint"==typeof e)return e+BigInt(t)}return e+t}(t=t||0,e.getMilliseconds()*a.NANOS_PER_MILLISECOND)},a.timeZoneOffsetInSeconds=function(e){return 0===(e=e.getTimezoneOffset())?0:-1*e*a.SECONDS_PER_MINUTE},a.assertValidYear=function(e){return f(e,a.YEAR_RANGE,"Year")},a.assertValidMonth=function(e){return f(e,a.MONTH_OF_YEAR_RANGE,"Month")},a.assertValidDay=function(e){return f(e,a.DAY_OF_MONTH_RANGE,"Day")},a.assertValidHour=function(e){return f(e,a.HOUR_OF_DAY_RANGE,"Hour")},a.assertValidMinute=function(e){return f(e,a.MINUTE_OF_HOUR_RANGE,"Minute")},a.assertValidSecond=function(e){return f(e,a.SECOND_OF_MINUTE_RANGE,"Second")},a.assertValidNanosecond=function(e){return f(e,a.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")},a.floorDiv=h,a.floorMod=p},{"../error":56,"../integer":59,"./util":76}],73:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionExecutor=void 0;var n=e("../error"),u=e("./retry-strategy"),e=(o.prototype.execute=function(n,o){var i=this;return new Promise(function(e,t){i._executeTransactionInsidePromise(n,o,e,t)}).catch(function(e){var t=Date.now(),r=i._initialRetryDelayMs;return i._retryTransactionPromise(n,o,e,t,r)})},o.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(e){return clearTimeout(e)}),this._inFlightTimeoutIds=[]},o.prototype._retryTransactionPromise=function(o,i,e,r,s){var a=this;return Date.now()-r>this._maxRetryTimeMs||!u.canRetryOn(e)?Promise.reject(e):new Promise(function(e,t){var r=a._computeDelayWithJitter(s),n=setTimeout(function(){a._inFlightTimeoutIds=a._inFlightTimeoutIds.filter(function(e){return e!==n}),a._executeTransactionInsidePromise(o,i,e,t)},r);a._inFlightTimeoutIds.push(n)}).catch(function(e){var t=s*a._multiplier;return a._retryTransactionPromise(o,i,e,r,t)})},o.prototype._executeTransactionInsidePromise=function(e,t,r,n){var o,i=this;try{o=e()}catch(e){return void n(e)}this._safeExecuteTransactionWork(o,t).then(function(e){return i._handleTransactionWorkSuccess(e,o,r,n)}).catch(function(e){return i._handleTransactionWorkFailure(e,o,n)})},o.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},o.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},o.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}):r(e)},o.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t,t=e+t;return Math.random()*(t-r)+r},o.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw n.newError("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw n.newError("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw n.newError("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||1<this._jitterFactor)throw n.newError("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},o);function o(e,t,r,n){this._maxRetryTimeMs=i(e,3e4),this._initialRetryDelayMs=i(t,1e3),this._multiplier=i(r,2),this._jitterFactor=i(n,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}function i(e,t){return e||0===e?e:t}r.TransactionExecutor=e},{"../error":56,"./retry-strategy":70}],74:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TxConfig=void 0;var s=i(e("./util")),a=e("../error"),u=e("../integer"),e=(c.empty=function(){return l},c.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},c);function c(e){var t;(t=e)&&s.assertObject(t,"Transaction config"),this.timeout=function(e){if(!s.isObject(e)||!e.timeout&&0!==e.timeout)return null;s.assertNumberOrInteger(e.timeout,"Transaction timeout");e=u.int(e.timeout);if(e.isZero())throw a.newError("Transaction timeout should not be zero");if(e.isNegative())throw a.newError("Transaction timeout should not be negative");return e}(e),this.metadata=function(e){if(s.isObject(e)&&e.metadata){e=e.metadata;if(s.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}(e)}var l=new(r.TxConfig=e)({})},{"../error":56,"../integer":59,"./util":76}],75:[function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.Url=r.formatIPv6Address=r.formatIPv4Address=r.defaultPortForScheme=r.parseDatabaseUrl=void 0;var u=e("./util"),n=7687,o=7474,i=7473,c=function(e,t,r,n,o){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=o};function l(e,t,r){if(!(e=(e||"").trim()))throw new Error("Illegal empty "+t+" in URL query '"+r+"'");return e}function f(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address "+e)}return"["+e+"]"}function h(e){return"http"===e?o:"https"===e?i:n}r.Url=c,r.parseDatabaseUrl=function(e){u.assertString(e,"URL");var t=function(e){function i(e,t){t=e.indexOf(t);return 0<=t?[e.substring(0,t),e[t],e.substring(t+1)]:[e,"",""]}function t(e){var t,r={};(o="@")===(t=0<=(o=(n=e).lastIndexOf(o))?[n.substring(0,o),n[o],n.substring(o+1)]:["","",n])[1]&&(r.userInfo=decodeURIComponent(t[0]),e=t[2]);var n,o,n=a((o="]",n=i(e,n="["),[(o=i(n[2],o))[0],o[2]]),2),o=n[0],n=n[1];return""!==o?(r.host=o,t=i(n,":")):(t=i(e,":"),r.host=t[0]),":"===t[1]&&(r.port=t[2]),r}var r,n={};":"===(r=i(e,":"))[1]&&(n.scheme=decodeURIComponent(r[0]),e=r[2]);"#"===(r=i(e,"#"))[1]&&(n.fragment=decodeURIComponent(r[2]),e=r[0]);"?"===(r=i(e,"?"))[1]&&(n.query=r[2],e=r[0]);e.startsWith("//")?(r=i(e.substr(2),"/"),(n=s(s({},n),t(r[0]))).path=r[1]+r[2]):n.path=e;return n}((i=-1!==(o=(o=e).trim()).indexOf("://")?{schemeMissing:!1,url:o}:{schemeMissing:!0,url:"none://"+o}).url),r=i.schemeMissing?null:function(e){if(e)return e=":"===(e=e.trim()).charAt(e.length-1)?e.substring(0,e.length-1):e;return null}(t.scheme),n=function(e,t){if(e)return e.trim();throw new Error("Unable to extract host from "+t)}(t.host),o=function(e){if(e)return 0<=e.indexOf(":")?f(e):e;throw new Error("Illegal host "+e)}(n),i=function(e,t){e="string"==typeof e?parseInt(e,10):e;return 0===e||e?e:h(t)}(t.port,r),o=o+":"+i,e=function(e,r){var e=e?function(e){(e=(e||"").trim())&&"?"===e.charAt(0)&&(e=e.substring(1,e.length));return e}(e):null,n={};e&&e.split("&").forEach(function(e){var t=e.split("=");if(2!==t.length)throw new Error("Invalid parameters: '"+t+"' in URL '"+r+"'.");e=l(t[0],"key",r),t=l(t[1],"value",r);if(n[e])throw new Error("Duplicated query parameters with key '"+e+"' in URL '"+r+"'");n[e]=t});return n}(t.query||function(e){if("string"!=typeof e)return null;e=a(e.split("?"),2),e[0];return e[1]}(t.resourceName),e);return new c(r,n,i,o,e)},r.formatIPv4Address=function(e,t){return e+":"+t},r.formatIPv6Address=function(e,t){return f(e)+":"+t},r.defaultPortForScheme=h},{"./util":76}],76:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ENCRYPTION_OFF=r.ENCRYPTION_ON=r.validateQueryAndParameters=r.assertValidDate=r.assertNumberOrInteger=r.assertNumber=r.assertString=r.assertObject=r.isString=r.isObject=r.isEmptyObjectOrNull=void 0;var n=e("../integer"),o=e("../json");r.ENCRYPTION_ON="ENCRYPTION_ON";function i(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function s(e,t){if(!a(e))throw new TypeError(t+" expected to be string but was: "+o.stringify(e));return e}function a(e){return"[object String]"===Object.prototype.toString.call(e)}r.ENCRYPTION_OFF="ENCRYPTION_OFF",r.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!i(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.bind(e,t))return!1;return!0},r.isObject=i,r.validateQueryAndParameters=function(e,t,r){var n="",t=t||{},r=(null==r?void 0:r.skipAsserts)||!1;return"string"==typeof e?n=e:e instanceof String?n=e.toString():"object"==typeof e&&e.text&&(n=e.text,t=e.parameters||{}),r||(function(e){if(s(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(n),function(e){if(!i(e)){var t=e.constructor?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+e)}}(t)),{validatedQuery:n,params:t}},r.assertObject=function(e,t){if(!i(e))throw new TypeError(t+" expected to be an object but was: "+o.stringify(e));return e},r.assertString=s,r.assertNumber=function(e,t){if("number"!=typeof e)throw new TypeError(t+" expected to be a number but was: "+o.stringify(e));return e},r.assertNumberOrInteger=function(e,t){if("number"!=typeof e&&"bigint"!=typeof e&&!n.isInt(e))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+o.stringify(e));return e},r.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+o.stringify(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+o.stringify(e));return e},r.isString=a},{"../integer":59,"../json":77}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringify=void 0,r.stringify=function(e){return JSON.stringify(e,function(e,t){return"bigint"==typeof t?t+"n":t})}},{}],78:[function(e,t,r){"use strict";var n=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./error");i.prototype.forEach=function(e){var t,r;try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0];e(i[1],s,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},i.prototype.map=function(e){var t,r,n=[];try{for(var o=c(this.entries()),i=o.next();!i.done;i=o.next()){var s=l(i.value,2),a=s[0],u=s[1];n.push(e(u,a,this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},i.prototype.entries=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.toObject=function(){var t,e,r={};try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0],a=i[1];r[s]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},i.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw o.newError("This record has no field with key '"+e+"', available key are: ["+this.keys+"].")}else t=e;if(t>this._fields.length-1||t<0)throw o.newError("This record has no field with index '"+t+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},i.prototype.has=function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]},e=i;function i(e,t,r){var n;this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=r||(n={},e.forEach(function(e,t){n[e]=t}),n)}r.default=e},{"./error":56}],79:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=void 0;var s=i(e("./integer")),e=(a.prototype._buildNotifications=function(e){return e?e.map(function(e){return new p(e)}):[]},a.prototype.hasPlan=function(){return this.plan instanceof u},a.prototype.hasProfile=function(){return this.profile instanceof c},a);function a(e,t,r,n){this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new f(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new u(r.plan||r.profile),this.profile=!!r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new _(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:r.db||null}}var u=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map(function(e){return new t(e)}):[]};r.Plan=u;var c=(l.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},l);function l(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=b("dbHits",e),this.rows=b("rows",e),this.pageCacheMisses=b("pageCacheMisses",e),this.pageCacheHits=b("pageCacheHits",e),this.pageCacheHitRatio=b("pageCacheHitRatio",e),this.time=b("time",e),this.children=e.children?e.children.map(function(e){return new l(e)}):[]}r.ProfiledPlan=c,r.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var f=(h.prototype.containsUpdates=function(){var r=this;return 0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)},h.prototype.updates=function(){return this._stats},h.prototype.containsSystemUpdates=function(){return 0<this._systemUpdates},h.prototype.systemUpdates=function(){return this._systemUpdates},h);function h(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=y(r[e]):"systemUpdates"===t&&(n._systemUpdates=y(r[e]))}),this._stats=Object.freeze(this._stats)}r.QueryStatistics=f;var p=(d._constructPosition=function(e){return e?{offset:y(e.offset),line:y(e.line),column:y(e.column)}:{}},d);function d(e){this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=d._constructPosition(e.position)}r.Notification=p;var _=function(e,t){e&&(this.address=e.address,this.version=e.version,this.agent=e.version),this.protocolVersion=t};function y(e){return e instanceof s.default?e.toInt():"bigint"==typeof e?s.int(e).toInt():e}function b(e,t,r){return void 0===r&&(r=0),e in t?y(t[e]):r}r.ServerInfo=_;r.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},r.default=e},{"./integer":59}],80:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});function s(e){console.log("Uncaught error when processing result: "+e)}function a(e){}var i=n(e("./result-summary")),u=e("./internal"),o=u.connectionHolder.EMPTY_CONNECTION_HOLDER,e=(c.prototype.keys=function(){var e=this;return new Promise(function(t,r){e._streamObserverPromise.then(function(e){return e.subscribe({onKeys:function(e){return t(e)},onError:function(e){return r(e)}})}).catch(r)})},c.prototype.summary=function(){var n=this;return new Promise(function(t,r){n._streamObserverPromise.then(function(e){e.cancel(),e.subscribe({onCompleted:function(e){return n._createSummary(e).then(t,r)},onError:function(e){return r(e)}})}).catch(r)})},c.prototype._getOrCreatePromise=function(){var e=this;return this._p||(this._p=new Promise(function(t,r){var n=[];e.subscribe({onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},c.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},c.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},c.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},c.prototype.subscribe=function(n){var o=this,t=n.onCompleted||a;n.onCompleted=function(e){o._createSummary(e).then(function(e){return t.call(n,e)})};var i=n.onError||s;n.onError=function(r){o._connectionHolder.releaseConnection().then(function(){var e,t;e=r,(t=o._stack)&&(e.stack=e.toString()+"\n"+t),i.call(n,r)})},this._streamObserverPromise.then(function(e){return e.subscribe(n)}).catch(function(e){return n.onError(e)})},c.prototype._cancel=function(){this._streamObserverPromise.then(function(e){return e.cancel()})},c.prototype._createSummary=function(t){var e=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=e.validatedQuery,n=e.params,o=this._connectionHolder;return o.getConnection().then(function(e){return o.releaseConnection().then(function(){return e?e.protocol().version:void 0})},function(e){}).then(function(e){return new i.default(r,n,t,e)})},c);function c(e,t,r,n){this._stack=function(){var e=new Error("");if(e.stack)return e.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=r||{},this._connectionHolder=n||o}Symbol.toStringTag,r.default=e},{"./internal":64,"./result-summary":79}],81:[function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},i=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("./internal/observers"),a=e("./internal/util"),u=e("./error"),c=n(e("./result")),l=n(e("./transaction")),f=e("./internal/connection-holder"),h=e("./internal/constants"),p=e("./internal/transaction-executor"),d=e("./internal/bookmark"),_=e("./internal/tx-config"),e=(y.prototype.run=function(e,t,r){var n=this,t=a.validateQueryAndParameters(e,t),o=t.validatedQuery,i=t.params,s=r?new _.TxConfig(r):_.TxConfig.empty();return this._run(o,i,function(e){return n._assertSessionIsOpen(),e.protocol().run(o,i,{bookmark:n._lastBookmark,txConfig:s,mode:n._mode,database:n._database,afterComplete:n._onComplete,reactive:n._reactive,fetchSize:n._fetchSize})})},y.prototype._run=function(e,t,r){var n=this._connectionHolderWithMode(this._mode),o=this._open?!this._hasTx&&n.initializeConnection()?n.getConnection().then(function(e){return r(e)}).catch(function(e){return Promise.resolve(new s.FailedObserver({error:e}))}):Promise.resolve(new s.FailedObserver({error:u.newError("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new s.FailedObserver({error:u.newError("Cannot run query in a closed session.")}));return new c.default(o,e,t,n)},y.prototype._acquireConnection=function(t){return o(this,void 0,void 0,function(){var r,n=this;return i(this,function(e){return r=this._connectionHolderWithMode(this._mode),[2,this._open?!this._hasTx&&r.initializeConnection()?r.getConnection().then(function(e){return t(e)}).then(function(t){return o(n,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,r.releaseConnection()];case 1:return e.sent(),[2,t]}})})}):Promise.reject(u.newError("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject(u.newError("Cannot run query in a closed session."))]})})},y.prototype.beginTransaction=function(e){var t=e,e=_.TxConfig.empty();return t&&(e=new _.TxConfig(t)),this._beginTransaction(this._mode,e)},y.prototype._beginTransaction=function(e,t){if(!this._open)throw u.newError("Cannot begin a transaction on a closed session.");if(this._hasTx)throw u.newError("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");e=y._validateSessionMode(e),e=this._connectionHolderWithMode(e);e.initializeConnection(),this._hasTx=!0;e=new l.default({connectionHolder:e,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return e._begin(this._lastBookmark,t),e},y.prototype._assertSessionIsOpen=function(){if(!this._open)throw u.newError("You cannot run more transactions on a closed session.")},y.prototype._transactionClosed=function(){this._hasTx=!1},y.prototype.lastBookmark=function(){return this._lastBookmark.values()},y.prototype.readTransaction=function(e,t){t=new _.TxConfig(t);return this._runTransaction(h.ACCESS_MODE_READ,t,e)},y.prototype.writeTransaction=function(e,t){t=new _.TxConfig(t);return this._runTransaction(h.ACCESS_MODE_WRITE,t,e)},y.prototype._runTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(e,t)},r)},y.prototype._updateBookmark=function(e){e&&!e.isEmpty()&&(this._lastBookmark=e)},y.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return e.sent(),[4,this._writeConnectionHolder.close()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},y.prototype._connectionHolderWithMode=function(e){if(e===h.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===h.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw u.newError("Unknown access mode: "+e)},y.prototype._onCompleteCallback=function(e){this._updateBookmark(new d.Bookmark(e.bookmark))},y._validateSessionMode=function(e){e=e||h.ACCESS_MODE_WRITE;if(e!==h.ACCESS_MODE_READ&&e!==h.ACCESS_MODE_WRITE)throw u.newError("Illegal session mode "+e);return e},y);function y(e){var t=e.mode,r=e.connectionProvider,n=e.bookmark,o=e.database,i=e.config,s=e.reactive,e=e.fetchSize;this._mode=t,this._database=o,this._reactive=s,this._fetchSize=e,this._readConnectionHolder=new f.ConnectionHolder({mode:h.ACCESS_MODE_READ,database:o,bookmark:n,connectionProvider:r}),this._writeConnectionHolder=new f.ConnectionHolder({mode:h.ACCESS_MODE_WRITE,database:o,bookmark:n,connectionProvider:r}),this._open=!0,this._hasTx=!1,this._lastBookmark=n||d.Bookmark.empty(),this._transactionExecutor=function(e){e=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new p.TransactionExecutor(e)}(i),this._onComplete=this._onCompleteCallback.bind(this)}r.default=e},{"./error":56,"./internal/bookmark":60,"./internal/connection-holder":61,"./internal/constants":63,"./internal/observers":66,"./internal/transaction-executor":73,"./internal/tx-config":74,"./internal/util":76,"./result":80,"./transaction":84}],82:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPoint=r.Point=void 0;var o=e("./internal/util"),n="__isPoint__",e=(i.prototype.toString=function(){return this.z||0===this.z?"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+", z="+s(this.z)+"}":"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+"}"},i);function i(e,t,r,n){this.srid=o.assertNumberOrInteger(e,"SRID"),this.x=o.assertNumber(t,"X coordinate"),this.y=o.assertNumber(r,"Y coordinate"),this.z=null==n?n:o.assertNumber(n,"Z coordinate"),Object.freeze(this)}function s(e){return Number.isInteger(e)?e+".0":e.toString()}r.Point=e,Object.defineProperty(e.prototype,n,{value:!0,enumerable:!1,configurable:!1,writable:!1}),r.isPoint=function(e){return!0===(e&&e[n])}},{"./internal/util":76}],83:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.isDateTime=r.DateTime=r.isLocalDateTime=r.LocalDateTime=r.isDate=r.Date=r.isTime=r.Time=r.isLocalTime=r.LocalTime=r.isDuration=r.Duration=void 0;var l=i(e("./internal/temporal-util")),f=e("./internal/util"),h=e("./error"),s=i(e("./integer")),i={value:!0,enumerable:!1,configurable:!1,writable:!1},a="__isDuration__",u="__isLocalTime__",p="__isTime__",d="__isDate__",_="__isLocalDateTime__",y="__isDateTime__",e=(b.prototype.toString=function(){return l.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},b);function b(e,t,r,n){this.months=f.assertNumberOrInteger(e,"Months"),this.days=f.assertNumberOrInteger(t,"Days"),f.assertNumberOrInteger(r,"Seconds"),f.assertNumberOrInteger(n,"Nanoseconds"),this.seconds=l.normalizeSecondsForDuration(r,n),this.nanoseconds=l.normalizeNanosecondsForDuration(n),Object.freeze(this)}r.Duration=e,Object.defineProperty(e.prototype,a,i),r.isDuration=function(e){return w(e,a)};v.fromStandardDate=function(e,t){C(e,t);t=l.totalNanoseconds(e,t);return new v(e.getHours(),e.getMinutes(),e.getSeconds(),t instanceof s.default?t.toInt():"bigint"==typeof t?s.int(t).toInt():t)},v.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e=v;function v(e,t,r,n){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),Object.freeze(this)}r.LocalTime=e,Object.defineProperty(e.prototype,u,i),r.isLocalTime=function(e){return w(e,u)};m.fromStandardDate=function(e,t){return C(e,t),new m(e.getHours(),e.getMinutes(),e.getSeconds(),s.toNumber(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e))},m.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e=m;function m(e,t,r,n,o){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),this.timeZoneOffsetSeconds=f.assertNumberOrInteger(o,"Time zone offset in seconds"),Object.freeze(this)}r.Time=e,Object.defineProperty(e.prototype,p,i),r.isTime=function(e){return w(e,p)};g.fromStandardDate=function(e){return C(e),new g(e.getFullYear(),e.getMonth()+1,e.getDate())},g.prototype.toString=function(){return l.dateToIsoString(this.year,this.month,this.day)},e=g;function g(e,t,r){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),Object.freeze(this)}r.Date=e,Object.defineProperty(e.prototype,d,i),r.isDate=function(e){return w(e,d)};O.fromStandardDate=function(e,t){return C(e,t),new O(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),s.toNumber(l.totalNanoseconds(e,t)))},O.prototype.toString=function(){return P(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e=O;function O(e,t,r,n,o,i,s){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s),Object.freeze(this)}r.LocalDateTime=e,Object.defineProperty(e.prototype,_,i),r.isLocalDateTime=function(e){return w(e,_)};E.fromStandardDate=function(e,t){return C(e,t),new E(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),s.toNumber(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e),null)},E.prototype.toString=function(){return P(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"["+this.timeZoneId+"]":l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0))},e=E;function E(e,t,r,n,o,i,s,a,u){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s);a=c(function(e,t){var r=e||0===e,n=t&&""!==t;{if(r&&!n)return f.assertNumberOrInteger(e,"Time zone offset in seconds"),[e,void 0];if(!r&&n)return f.assertString(t,"Time zone ID"),[void 0,t];throw r&&n?h.newError("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: "+e+" and id: "+t):h.newError("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+e+" and id: "+t)}}(a,u),2),u=a[0],a=a[1];this.timeZoneOffsetSeconds=u,this.timeZoneId=a||void 0,Object.freeze(this)}function w(e,t){return!0===(e&&e[t])}function P(e,t,r,n,o,i,s){return l.dateToIsoString(e,t,r)+"T"+l.timeToIsoString(n,o,i,s)}function C(e,t){f.assertValidDate(e,"Standard date"),null!=t&&f.assertNumberOrInteger(t,"Nanosecond")}r.DateTime=e,Object.defineProperty(e.prototype,y,i),r.isDateTime=function(e){return w(e,y)}},{"./error":56,"./integer":59,"./internal/temporal-util":72,"./internal/util":76}],84:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./internal/util"),i=e("./internal/connection-holder"),c=e("./internal/bookmark"),l=e("./internal/tx-config"),f=e("./internal/observers"),h=e("./error"),a=n(e("./result")),e=(s.prototype._begin=function(t,r){var n=this;this._connectionHolder.getConnection().then(function(e){if(n._onConnection(),e)return e.protocol().beginTransaction({bookmark:t,txConfig:r,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),beforeError:n._onError,afterComplete:n._onComplete});throw h.newError("No connection available")}).catch(function(e){return n._onError(e)})},s.prototype.run=function(e,t){e=o.validateQueryAndParameters(e,t),t=e.validatedQuery,e=e.params,e=this._state.run(t,e,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(e),e},s.prototype.commit=function(){var r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},s.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},s.prototype.isOpen=function(){return this._state===u.ACTIVE},s.prototype._onErrorCallback=function(e){return this._state=u.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},s.prototype._onCompleteCallback=function(e){this._onBookmark(new c.Bookmark(e.bookmark))},s);function s(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmark,o=e.onConnection,i=e.reactive,e=e.fetchSize;this._connectionHolder=t,this._reactive=i,this._state=u.ACTIVE,this._onClose=r,this._onBookmark=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=e,this._results=[]}var u={ACTIVE:{commit:function(e){return{result:p(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:u.SUCCEEDED}},rollback:function(e){return{result:p(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:u.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,o=e.onError,i=e.onComplete,s=e.onConnection,a=e.reactive,u=e.fetchSize;return d(n.getConnection().then(function(e){if(s(),e)return e.protocol().run(t,r,{bookmark:c.Bookmark.empty(),txConfig:l.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:a,fetchSize:u});throw h.newError("No connection available")}).catch(function(e){return new f.FailedObserver({error:e,onError:o})}),t,r,n)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:d(new f.FailedObserver({error:h.newError("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t),state:u.FAILED}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:d(new f.CompletedObserver,"ROLLBACK",{},t),state:u.FAILED}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:h.newError("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,t,n)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:d(new f.FailedObserver({error:h.newError("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{}),state:u.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:d(new f.FailedObserver({error:h.newError("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{}),state:u.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:h.newError("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,t,n)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:d(new f.FailedObserver({error:h.newError("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t),state:u.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:d(new f.FailedObserver({error:h.newError("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:u.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return d(new f.FailedObserver({error:h.newError("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,t,n)}}};function p(r,e,n,o,i,s){var t=e.getConnection().then(function(t){return i(),s.forEach(function(e){return e._cancel()}),Promise.all(s).then(function(e){if(t)return r?t.protocol().commitTransaction({beforeError:n,afterComplete:o}):t.protocol().rollbackTransaction({beforeError:n,afterComplete:o});throw h.newError("No connection available")})}).catch(function(e){return new f.FailedObserver({error:e,onError:n})});return new a.default(t,r?"COMMIT":"ROLLBACK",{},e)}function d(e,t,r,n){return void 0===n&&(n=i.EMPTY_CONNECTION_HOLDER),new a.default(Promise.resolve(e),t,r,new i.ReadOnlyConnectionHolder(n||i.EMPTY_CONNECTION_HOLDER))}r.default=e},{"./error":56,"./internal/bookmark":60,"./internal/connection-holder":61,"./internal/observers":66,"./internal/tx-config":74,"./internal/util":76,"./result":80}],85:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],86:[function(b,e,v){!function(y){!function(){"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v,"__esModule",{value:!0}),v.Connection=v.ConnectionProvider=v.DateTime=v.LocalDateTime=v.Date=v.Time=v.LocalTime=v.Duration=v.Point=v.Transaction=v.Session=v.ServerInfo=v.Notification=v.QueryStatistics=v.ProfiledPlan=v.Plan=v.Integer=v.Path=v.PathSegment=v.UnboundRelationship=v.Relationship=v.Node=v.ResultSummary=v.Record=v.Result=v.Driver=v.temporal=v.spatial=v.error=v.session=v.types=v.logging=v.auth=v.Neo4jError=v.integer=v.isDateTime=v.isLocalDateTime=v.isDate=v.isTime=v.isLocalTime=v.isDuration=v.isPoint=v.isInt=v.int=v.driver=void 0;var t=e(b("./version")),u=b("neo4j-driver-core");Object.defineProperty(v,"Neo4jError",{enumerable:!0,get:function(){return u.Neo4jError}}),Object.defineProperty(v,"error",{enumerable:!0,get:function(){return u.error}}),Object.defineProperty(v,"Integer",{enumerable:!0,get:function(){return u.Integer}}),Object.defineProperty(v,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(v,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(v,"isPoint",{enumerable:!0,get:function(){return u.isPoint}}),Object.defineProperty(v,"Point",{enumerable:!0,get:function(){return u.Point}}),Object.defineProperty(v,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(v,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(v,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(v,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(v,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(v,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(v,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(v,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(v,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(v,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(v,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(v,"Time",{enumerable:!0,get:function(){return u.Time}}),Object.defineProperty(v,"Node",{enumerable:!0,get:function(){return u.Node}}),Object.defineProperty(v,"Path",{enumerable:!0,get:function(){return u.Path}}),Object.defineProperty(v,"PathSegment",{enumerable:!0,get:function(){return u.PathSegment}}),Object.defineProperty(v,"Relationship",{enumerable:!0,get:function(){return u.Relationship}}),Object.defineProperty(v,"UnboundRelationship",{enumerable:!0,get:function(){return u.UnboundRelationship}}),Object.defineProperty(v,"Record",{enumerable:!0,get:function(){return u.Record}}),Object.defineProperty(v,"ResultSummary",{enumerable:!0,get:function(){return u.ResultSummary}}),Object.defineProperty(v,"Result",{enumerable:!0,get:function(){return u.Result}}),Object.defineProperty(v,"ConnectionProvider",{enumerable:!0,get:function(){return u.ConnectionProvider}}),Object.defineProperty(v,"Driver",{enumerable:!0,get:function(){return u.Driver}}),Object.defineProperty(v,"Plan",{enumerable:!0,get:function(){return u.Plan}}),Object.defineProperty(v,"ProfiledPlan",{enumerable:!0,get:function(){return u.ProfiledPlan}}),Object.defineProperty(v,"QueryStatistics",{enumerable:!0,get:function(){return u.QueryStatistics}}),Object.defineProperty(v,"Notification",{enumerable:!0,get:function(){return u.Notification}}),Object.defineProperty(v,"Session",{enumerable:!0,get:function(){return u.Session}}),Object.defineProperty(v,"Transaction",{enumerable:!0,get:function(){return u.Transaction}}),Object.defineProperty(v,"ServerInfo",{enumerable:!0,get:function(){return u.ServerInfo}}),Object.defineProperty(v,"Connection",{enumerable:!0,get:function(){return u.Connection}});var c=b("neo4j-driver-bolt-connection"),r=u.driver.READ,n=u.driver.WRITE,o=u.internal.util,l=o.ENCRYPTION_ON,f=(o.ENCRYPTION_OFF,o.assertString),h=o.isEmptyObjectOrNull,p=u.internal.serverAddress.ServerAddress,d=u.internal.urlUtil;function i(e,o,t){void 0===t&&(t={}),f(e,"Bolt URL");var r,i=d.parseDatabaseUrl(e),n=!1,s=!1;switch(i.scheme){case"bolt":break;case"bolt+s":s=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":s=!0,r="TRUST_ALL_CERTIFICATES";break;case"neo4j":n=!0;break;case"neo4j+s":r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",n=s=!0;break;case"neo4j+ssc":r="TRUST_ALL_CERTIFICATES",n=s=!0;break;default:throw new Error("Unknown scheme: "+i.scheme)}if(s){if("encrypted"in t||"trust"in t)throw new Error("Encryption/trust can only be configured either through URL or config, not both");t.encrypted=l,t.trust=r}(o=o||{}).scheme=o.scheme||"none",t.userAgent=t.userAgent||_;var a=p.fromUrl(i.hostAndPort);return new u.Driver({address:a,typename:n?"Routing":"Direct",routing:n},t,function(){{if(n)return function(e,t,r,n){return new c.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authToken:o,address:a,userAgent:t.userAgent,routingContext:i.query})};if(!h(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '"+e+"'");return function(e,t,r){return new c.DirectConnectionProvider({id:e,config:t,log:r,authToken:o,address:a,userAgent:t.userAgent})}}}())}v.driver=i;var s={basic:function(e,t,r){return r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},custom:function(e,t,r,n,o){return o?{scheme:n,principal:e,credentials:t,realm:r,parameters:o}:{scheme:n,principal:e,credentials:t,realm:r}}};v.auth=s;var _="neo4j-javascript/"+t.default,a={console:function(e){return{level:e,logger:function(e,t){return console.log(y.Date.now()+" "+e.toUpperCase()+" "+t)}}}};v.logging=a;e={Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Result:u.Result,ResultSummary:u.ResultSummary,Record:u.Record,Point:u.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Integer:u.Integer};v.types=e;o={READ:r,WRITE:n};v.session=o;t={toNumber:u.toNumber,toString:u.toString,inSafeRange:u.inSafeRange};v.integer=t;r={isPoint:u.isPoint};v.spatial=r;n={isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime};v.temporal=n;n={driver:i,int:u.int,isInt:u.isInt,isPoint:u.isPoint,isDuration:u.isDuration,isLocalTime:u.isLocalTime,isTime:u.isTime,isDate:u.isDate,isLocalDateTime:u.isLocalDateTime,isDateTime:u.isDateTime,integer:t,Neo4jError:u.Neo4jError,auth:s,logging:a,types:e,session:o,error:u.error,spatial:r,temporal:n,Driver:u.Driver,Result:u.Result,Record:u.Record,ResultSummary:u.ResultSummary,Node:u.Node,Relationship:u.Relationship,UnboundRelationship:u.UnboundRelationship,PathSegment:u.PathSegment,Path:u.Path,Integer:u.Integer,Plan:u.Plan,ProfiledPlan:u.ProfiledPlan,QueryStatistics:u.QueryStatistics,Notification:u.Notification,ServerInfo:u.ServerInfo,Session:u.Session,Transaction:u.Transaction,Point:u.Point,Duration:u.Duration,LocalTime:u.LocalTime,Time:u.Time,Date:u.Date,LocalDateTime:u.LocalDateTime,DateTime:u.DateTime,ConnectionProvider:u.ConnectionProvider,Connection:u.Connection};v.default=n}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./version":87,"neo4j-driver-bolt-connection":37,"neo4j-driver-core":58}],87:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="4.3.2"},{}]},{},[86])(86)});