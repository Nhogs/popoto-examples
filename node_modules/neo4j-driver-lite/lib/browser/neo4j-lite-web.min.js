!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).neo4j=e()}(function(){return function n(o,i,s){function a(t,e){if(!i[t]){if(!o[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(u)return u(t,!0);throw(r=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",r}r=i[t]={exports:{}},o[t][0].call(r.exports,function(e){return a(o[t][1][e]||e)},r,r.exports,n,o,i,s)}return i[t].exports}for(var u="function"==typeof require&&require,e=0;e<s.length;e++)a(s[e]);return a}({1:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.assertImpersonatedUserIsEmpty=r.assertTxConfigIsEmpty=r.assertDatabaseIsEmpty=void 0;var n=e("neo4j-driver-core");r.assertTxConfigIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e&&!e.isEmpty()){e=(0,n.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw t(e.message),r.onError(e),e}},r.assertDatabaseIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e){e=(0,n.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw t(e.message),r.onError(e),e}},r.assertImpersonatedUserIsEmpty=function(e,t,r){if(void 0===t&&(t=function(){}),e){e=(0,n.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. Trying to impersonate "+e+".");throw t(e.message),r.onError(e),e}}},{"neo4j-driver-core":59}],2:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var h=e("./bolt-protocol-util"),o=e("../packstream"),p=n(e("./request-message")),d=e("./stream-observers"),n=e("neo4j-driver-core"),i=n.internal.bookmark.Bookmark,e=n.internal.constants,s=e.ACCESS_MODE_WRITE,a=e.BOLT_PROTOCOL_V1,u=(n.internal.logger.Logger,n.internal.txConfig.TxConfig),n=(Object.defineProperty(c.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),c.prototype.packer=function(){return this._packer},c.prototype.unpacker=function(){return this._unpacker},c.prototype.transformMetadata=function(e){return e},c.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new d.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(p.default.init(n,e),r,!0),r},c.prototype.prepareToClose=function(){},c.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.mode,s=t.impersonatedUser,a=t.beforeError,u=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("BEGIN",r?r.asBeginTransactionParameters():{},{bookmark:r,txConfig:n,database:o,mode:i,impersonatedUser:s,beforeError:a,afterError:u,beforeComplete:e,afterComplete:t,flush:!1})},c.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("COMMIT",{},{bookmark:i.empty(),txConfig:u.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t})},c.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete;return this.run("ROLLBACK",{},{bookmark:i.empty(),txConfig:u.empty(),mode:s,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t})},c.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=(n.bookmark,n.txConfig),i=n.database,s=(n.mode,n.impersonatedUser),a=n.beforeKeys,u=n.afterKeys,c=n.beforeError,l=n.afterError,f=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new d.ResultStreamObserver({server:this._server,beforeKeys:a,afterKeys:u,beforeError:c,afterError:l,beforeComplete:f,afterComplete:r});return(0,h.assertTxConfigIsEmpty)(o,this._onProtocolError,r),(0,h.assertDatabaseIsEmpty)(i,this._onProtocolError,r),(0,h.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,r),this.write(p.default.run(e,t),r,!1),this.write(p.default.pullAll(),r,n),r},Object.defineProperty(c.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),c.prototype.reset=function(e){var t=void 0===e?{}:e,e=t.onError,t=t.onComplete,t=new d.ResetObserver({onProtocolError:this._onProtocolError,onError:e,onComplete:t});return this.write(p.default.reset(),t,!0),t},c.prototype._createPacker=function(e){return new o.v1.Packer(e)},c.prototype._createUnpacker=function(e,t){return new o.v1.Unpacker(e,t)},c.prototype.write=function(e,t,r){var n=this;this.queueObserverIfProtocolIsNotBroken(t)&&(this._log.isDebugEnabled()&&this._log.debug("C: "+e),this.packer().packStruct(e.signature,e.fields.map(function(e){return n.packer().packable(e)})),this._chunker.messageBoundary(),r&&this._chunker.flush())},c.prototype.notifyFatalError=function(e){return this._fatalError=e,this._responseHandler._notifyErrorToObservers(e)},c.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},c.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},c.prototype.queueObserverIfProtocolIsNotBroken=function(e){return this.isBroken()?(this.notifyFatalErrorToObserver(e),!1):this._responseHandler._queueObserver(e)},c.prototype.isBroken=function(){return!!this._fatalError},c.prototype.notifyFatalErrorToObserver=function(e){e&&e.onError&&e.onError(this._fatalError)},c.prototype.resetFailure=function(){this._responseHandler._resetFailure()},c.prototype._onLoginCompleted=function(e,t){var r;e&&(r=e.server,this._server.version||(this._server.version=r)),t&&t(e)},c.prototype._onLoginError=function(e,t){this._onProtocolError(e.message),t&&t(e)},c);function c(e,t,r,n,o,i){var s=void 0===r?{}:r,r=s.disableLosslessIntegers,s=s.useBigInt;void 0===n&&(n=function(){return null}),this._server=e||{},this._chunker=t,this._packer=this._createPacker(t),this._unpacker=this._createUnpacker(r,s),this._responseHandler=n(this),this._log=o,this._onProtocolError=i,this._fatalError=null}r.default=n},{"../packstream":43,"./bolt-protocol-util":1,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],3:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./bolt-protocol-v1")),u=i(e("../packstream")),c=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V2,o=(s=a.default,o(l,s),l.prototype._createPacker=function(e){return new u.default.Packer(e)},l.prototype._createUnpacker=function(e,t){return new u.default.Unpacker(e,t)},Object.defineProperty(l.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),l);function l(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"../packstream":43,"./bolt-protocol-v1":2,"neo4j-driver-core":59}],4:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a,u=s(e("./bolt-protocol-v2")),d=s(e("./request-message")),_=e("./bolt-protocol-util"),y=e("./stream-observers"),e=e("neo4j-driver-core"),c=(e.internal.bookmark.Bookmark,e.internal.constants.BOLT_PROTOCOL_V3),l=e.internal.txConfig.TxConfig,f="context",h=new y.StreamObserver,o=(a=u.default,o(p,a),Object.defineProperty(p.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),p.prototype.transformMetadata=function(e){return"t_first"in e&&(e.result_available_after=e.t_first,delete e.t_first),"t_last"in e&&(e.result_consumed_after=e.t_last,delete e.t_last),e},p.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new y.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(d.default.hello(n,e),r,!0),r},p.prototype.prepareToClose=function(){this.write(d.default.goodbye(),h,!0)},p.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.impersonatedUser,s=t.mode,a=t.beforeError,u=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new y.ResultStreamObserver({server:this._server,beforeError:a,afterError:u,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),(0,_.assertDatabaseIsEmpty)(o,this._onProtocolError,t),(0,_.assertImpersonatedUserIsEmpty)(i,this._onProtocolError,t),this.write(d.default.begin({bookmark:r,txConfig:n,mode:s}),t,!0),t},p.prototype.commitTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new y.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(d.default.commit(),t,!0),t},p.prototype.rollbackTransaction=function(e){var t=void 0===e?{}:e,r=t.beforeError,n=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new y.ResultStreamObserver({server:this._server,beforeError:r,afterError:n,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(d.default.rollback(),t,!0),t},p.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,a=n.impersonatedUser,u=n.mode,c=n.beforeKeys,l=n.afterKeys,f=n.beforeError,h=n.afterError,p=n.beforeComplete,r=n.afterComplete,n=n.flush,n=void 0===n||n,r=new y.ResultStreamObserver({server:this._server,beforeKeys:c,afterKeys:l,beforeError:f,afterError:h,beforeComplete:p,afterComplete:r});return(0,_.assertDatabaseIsEmpty)(s,this._onProtocolError,r),(0,_.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,r),this.write(d.default.runWithMetadata(e,t,{bookmark:o,txConfig:i,mode:u}),r,!1),this.write(d.default.pullAll(),r,n),r},p.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.sessionContext,n=void 0===r?{}:r,o=e.onError,r=e.onCompleted,n=this.run("CALL dbms.cluster.routing.getRoutingTable($context)",((e={})[f]=void 0===t?{}:t,e),i(i({},n),{txConfig:l.empty()}));return new y.ProcedureRouteObserver({resultObserver:n,onProtocolError:this._onProtocolError,onError:o,onCompleted:r})},p);function p(){return null!==a&&a.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-util":1,"./bolt-protocol-v2":3,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],5:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a,u=i(e("./bolt-protocol-v3")),y=i(e("./request-message")),b=e("./bolt-protocol-util"),v=e("./stream-observers"),i=e("neo4j-driver-core"),e=(i.internal.bookmark.Bookmark,i.internal.constants),c=e.BOLT_PROTOCOL_V4_0,m=e.FETCH_ALL,l=i.internal.txConfig.TxConfig,f="context",h="database",o=(a=u.default,o(p,a),Object.defineProperty(p.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),p.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.impersonatedUser,s=t.mode,a=t.beforeError,u=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new v.ResultStreamObserver({server:this._server,beforeError:a,afterError:u,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),(0,b.assertImpersonatedUserIsEmpty)(i,this._onProtocolError,t),this.write(y.default.begin({bookmark:r,txConfig:n,database:o,mode:s}),t,!0),t},p.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,a=n.impersonatedUser,u=n.mode,c=n.beforeKeys,l=n.afterKeys,f=n.beforeError,h=n.afterError,p=n.beforeComplete,d=n.afterComplete,_=n.flush,r=void 0===_||_,_=n.reactive,_=void 0!==_&&_,n=n.fetchSize,n=void 0===n?m:n,d=new v.ResultStreamObserver({server:this._server,reactive:_,fetchSize:n,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:h,beforeComplete:p,afterComplete:d});(0,b.assertImpersonatedUserIsEmpty)(a,this._onProtocolError,d);a=_;return this.write(y.default.runWithMetadata(e,t,{bookmark:o,txConfig:i,database:s,mode:u}),d,a&&r),_||this.write(y.default.pull({n:n}),d,r),d},p.prototype._requestMore=function(e,t,r){this.write(y.default.pull({stmtId:e,n:t}),r,!0)},p.prototype._requestDiscard=function(e,t){this.write(y.default.discard({stmtId:e}),t,!0)},p.prototype._noOp=function(){},p.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=e.databaseName,n=void 0===r?null:r,o=e.sessionContext,i=void 0===o?{}:o,r=e.onError,o=e.onCompleted,i=this.run("CALL dbms.routing.getRoutingTable($context, $database)",((e={})[f]=void 0===t?{}:t,e[h]=n,e),s(s({},i),{txConfig:l.empty()}));return new v.ProcedureRouteObserver({resultObserver:i,onProtocolError:this._onProtocolError,onError:r,onCompleted:o})},p);function p(){return null!==a&&a.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-util":1,"./bolt-protocol-v3":4,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],6:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a,s=i(e("./bolt-protocol-v4x0")),u=i(e("./request-message")),c=e("./stream-observers"),l=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_1,o=(a=s.default,o(f,a),Object.defineProperty(f.prototype,"version",{get:function(){return l},enumerable:!1,configurable:!0}),f.prototype.initialize=function(e){var t=this,r=void 0===e?{}:e,n=r.userAgent,e=r.authToken,o=r.onError,i=r.onComplete,r=new c.LoginObserver({onError:function(e){return t._onLoginError(e,o)},onCompleted:function(e){return t._onLoginCompleted(e,i)}});return this.write(u.default.hello(n,e,this._serversideRouting),r,!0),r},f);function f(e,t,r,n,o,i,s){i=a.call(this,e,t,r,n=void 0===n?function(){return null}:n,o,i)||this;return i._serversideRouting=s,i}r.default=o},{"./bolt-protocol-v4x0":5,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],7:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,i=i(e("./bolt-protocol-v4x1")),a=e("neo4j-driver-core").internal.constants.BOLT_PROTOCOL_V4_2,o=(s=i.default,o(u,s),Object.defineProperty(u.prototype,"version",{get:function(){return a},enumerable:!1,configurable:!0}),u);function u(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x1":6,"neo4j-driver-core":59}],8:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./bolt-protocol-v4x2")),u=i(e("./request-message")),c=e("./stream-observers"),e=e("neo4j-driver-core"),l=e.internal.bookmark.Bookmark,f=e.internal.constants.BOLT_PROTOCOL_V4_3,o=(s=a.default,o(h,s),Object.defineProperty(h.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),h.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=void 0===t?{}:t,n=e.databaseName,o=void 0===n?null:n,t=e.sessionContext,n=void 0===t?{}:t,t=e.onError,e=e.onCompleted,e=new c.RouteObserver({onProtocolError:this._onProtocolError,onError:t,onCompleted:e}),n=n.bookmark||l.empty();return this.write(u.default.route(r,n.values(),o),e,!0),e},h);function h(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x2":7,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],9:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./bolt-protocol-v4x3")),u=e("neo4j-driver-core"),y=i(e("./request-message")),b=e("./stream-observers"),e=u.internal.constants,c=e.BOLT_PROTOCOL_V4_4,v=e.FETCH_ALL,l=u.internal.bookmark.Bookmark,o=(s=a.default,o(f,s),Object.defineProperty(f.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),f.prototype.requestRoutingInformation=function(e){var t=e.routingContext,r=void 0===t?{}:t,n=e.databaseName,o=void 0===n?null:n,i=e.impersonatedUser,t=void 0===i?null:i,n=e.sessionContext,i=void 0===n?{}:n,n=e.onError,e=e.onCompleted,e=new b.RouteObserver({onProtocolError:this._onProtocolError,onError:n,onCompleted:e}),i=i.bookmark||l.empty();return this.write(y.default.routeV4x4(r,i.values(),{databaseName:o,impersonatedUser:t}),e,!0),e},f.prototype.run=function(e,t,r){var n=void 0===r?{}:r,o=n.bookmark,i=n.txConfig,s=n.database,a=n.mode,u=n.impersonatedUser,c=n.beforeKeys,l=n.afterKeys,f=n.beforeError,h=n.afterError,p=n.beforeComplete,d=n.afterComplete,_=n.flush,r=void 0===_||_,_=n.reactive,_=void 0!==_&&_,n=n.fetchSize,n=void 0===n?v:n,p=new b.ResultStreamObserver({server:this._server,reactive:_,fetchSize:n,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:c,afterKeys:l,beforeError:f,afterError:h,beforeComplete:p,afterComplete:d}),d=_;return this.write(y.default.runWithMetadata(e,t,{bookmark:o,txConfig:i,database:s,mode:a,impersonatedUser:u}),p,d&&r),_||this.write(y.default.pull({n:n}),p,r),p},f.prototype.beginTransaction=function(e){var t=void 0===e?{}:e,r=t.bookmark,n=t.txConfig,o=t.database,i=t.mode,s=t.impersonatedUser,a=t.beforeError,u=t.afterError,e=t.beforeComplete,t=t.afterComplete,t=new b.ResultStreamObserver({server:this._server,beforeError:a,afterError:u,beforeComplete:e,afterComplete:t});return t.prepareToHandleSingleResponse(),this.write(y.default.begin({bookmark:r,txConfig:n,database:o,mode:i,impersonatedUser:s}),t,!0),t},f);function f(){return null!==s&&s.apply(this,arguments)||this}r.default=o},{"./bolt-protocol-v4x3":8,"./request-message":13,"./stream-observers":16,"neo4j-driver-core":59}],10:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var f=e("neo4j-driver-core"),h=n(e("./bolt-protocol-v1")),p=n(e("./bolt-protocol-v2")),d=n(e("./bolt-protocol-v3")),_=n(e("./bolt-protocol-v4x0")),y=n(e("./bolt-protocol-v4x1")),b=n(e("./bolt-protocol-v4x2")),v=n(e("./bolt-protocol-v4x3")),m=n(e("./bolt-protocol-v4x4")),g=n(e("./response-handler"));r.default=function(e){var t=void 0===e?{}:e,r=t.version,n=t.chunker,o=t.dechunker,i=t.channel,s=t.disableLosslessIntegers,a=t.useBigInt,u=t.serversideRouting,e=t.server,c=t.log,l=t.observer;return function(e,t,r,n,o,i,s,a){switch(e){case 1:return new h.default(t,r,n,i,a,s);case 2:return new p.default(t,r,n,i,a,s);case 3:return new d.default(t,r,n,i,a,s);case 4:return new _.default(t,r,n,i,a,s);case 4.1:return new y.default(t,r,n,i,a,s,o);case 4.2:return new b.default(t,r,n,i,a,s,o);case 4.3:return new v.default(t,r,n,i,a,s,o);case 4.4:return new m.default(t,r,n,i,a,s,o);default:throw(0,f.newError)("Unknown Bolt protocol version: "+e)}}(r,e,n,{disableLosslessIntegers:s,useBigInt:a},u,function(t){var r=new g.default({transformMetadata:t.transformMetadata.bind(t),log:c,observer:l});return i.onerror=l.onError.bind(l),i.onmessage=function(e){return o.write(e)},o.onmessage=function(e){r.handleResponse(t.unpacker().unpack(e))},r},l.onProtocolError.bind(l),c)}},{"./bolt-protocol-v1":2,"./bolt-protocol-v2":3,"./bolt-protocol-v3":4,"./bolt-protocol-v4x0":5,"./bolt-protocol-v4x1":6,"./bolt-protocol-v4x2":7,"./bolt-protocol-v4x3":8,"./bolt-protocol-v4x4":9,"./response-handler":14,"neo4j-driver-core":59}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../channel"),i=e("neo4j-driver-core"),s=1616949271;function o(e,t){return{major:e,minor:t}}function a(){return function(e){if(4<e.length)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var o=(0,n.alloc)(20);return o.writeInt32(s),e.forEach(function(e){var t,r,n;e instanceof Array?(r=(t=e[0]).major,n=t.minor,t=e[1].minor,o.writeInt32(n-t<<16|n<<8|r)):(r=e.major,n=e.minor,o.writeInt32(n<<8|r))}),o.reset(),o}([[o(4,4),o(4,2)],o(4,1),o(4,0),o(3,0)])}r.default=function(t){var o=this;return new Promise(function(r,n){function e(e){n(e)}t.onerror=e.bind(o),t._error&&e(t._error),t.onmessage=function(t){try{var e=function(e){if(72===(e=[e.readUInt8(),e.readUInt8(),e.readUInt8(),e.readUInt8()])[0]&&84===e[1]&&84===e[2]&&80===e[3])throw(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(e[3]+"."+e[2])}(t);r({protocolVersion:e,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(e){n(e)}},t.write(a())})}},{"../channel":26,"neo4j-driver-core":59}],12:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RawRoutingTable=r.BoltProtocol=void 0;var s=i(e("./handshake")),a=i(e("./create")),u=i(e("./bolt-protocol-v4x3")),i=i(e("./routing-table-raw"));o(e("./stream-observers"),r),r.BoltProtocol=u.default,r.RawRoutingTable=i.default,r.default={handshake:s.default,create:a.default}},{"./bolt-protocol-v4x3":8,"./create":10,"./handshake":11,"./routing-table-raw":15,"./stream-observers":16}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("neo4j-driver-core"),e=o.internal.constants,s=e.ACCESS_MODE_READ,n=e.FETCH_ALL,a=o.internal.util.assertString,e=(i.init=function(e,t){return new i(1,[e,t],function(){return"INIT "+e+" {...}"})},i.run=function(e,t){return new i(16,[e,t],function(){return"RUN "+e+" "+o.json.stringify(t)})},i.pullAll=function(){return l},i.reset=function(){return f},i.hello=function(e,t,r){void 0===r&&(r=null);t=Object.assign({user_agent:e},t);return r&&(t.routing=r),new i(1,[t],function(){return"HELLO {user_agent: '"+e+"', ...}"})},i.begin=function(e){var e=void 0===e?{}:e,t=u(e.bookmark,e.txConfig,e.database,e.mode,e.impersonatedUser);return new i(17,[t],function(){return"BEGIN "+o.json.stringify(t)})},i.commit=function(){return h},i.rollback=function(){return p},i.runWithMetadata=function(e,t,r){var r=void 0===r?{}:r,n=u(r.bookmark,r.txConfig,r.database,r.mode,r.impersonatedUser);return new i(16,[e,t,n],function(){return"RUN "+e+" "+o.json.stringify(t)+" "+o.json.stringify(n)})},i.goodbye=function(){return d},i.pull=function(e){var t=void 0===e?{}:e,e=t.stmtId,e=void 0===e?-1:e,t=t.n,r=c(null==e?-1:e,(void 0===t?n:t)||n);return new i(63,[r],function(){return"PULL "+o.json.stringify(r)})},i.discard=function(e){var t=void 0===e?{}:e,e=t.stmtId,e=void 0===e?-1:e,t=t.n,r=c(null==e?-1:e,(void 0===t?n:t)||n);return new i(47,[r],function(){return"DISCARD "+o.json.stringify(r)})},i.route=function(e,t,r){return new i(102,[e=void 0===e?{}:e,t=void 0===t?[]:t,r=void 0===r?null:r],function(){return"ROUTE "+o.json.stringify(e)+" "+o.json.stringify(t)+" "+r})},i.routeV4x4=function(e,t,r){void 0===e&&(e={}),void 0===t&&(t=[]);var n={};return(r=void 0===r?{}:r).databaseName&&(n.db=r.databaseName),r.impersonatedUser&&(n.imp_user=r.impersonatedUser),new i(102,[e,t,n],function(){return"ROUTE "+o.json.stringify(e)+" "+o.json.stringify(t)+" "+o.json.stringify(n)})},i);function i(e,t,r){this.signature=e,this.fields=t,this.toString=r}function u(e,t,r,n,o){var i={};return e.isEmpty()||(i.bookmarks=e.values()),t.timeout&&(i.tx_timeout=t.timeout),t.metadata&&(i.tx_metadata=t.metadata),r&&(i.db=a(r,"database")),o&&(i.imp_user=a(o,"impersonatedUser")),n===s&&(i.mode="r"),i}function c(e,t){t={n:(0,o.int)(t)};return-1!==e&&(t.qid=(0,o.int)(e)),t}var l=new(r.default=e)(63,[],function(){return"PULL_ALL"}),f=new e(15,[],function(){return"RESET"}),h=new e(18,[],function(){return"COMMIT"}),p=new e(19,[],function(){return"ROLLBACK"}),d=new e(2,[],function(){return"GOODBYE"})},{"neo4j-driver-core":59}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=e("neo4j-driver-core");function n(){}function i(e){return e}var s={onNext:n,onCompleted:n,onError:n},e=(Object.defineProperty(a.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),a.prototype.handleResponse=function(e){var t=e.fields[0];switch(e.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD "+o.json.stringify(e)),this._currentObserver.onNext(t);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS "+o.json.stringify(e));try{var r=this._transformMetadata(t);this._currentObserver.onCompleted(r)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE "+o.json.stringify(e));try{var n=(0,o.newError)(t.message,t.code);this._currentFailure=this._observer.onErrorApplyTransformation(n),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED "+o.json.stringify(e));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,o.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,o.newError)("Unknown Bolt protocol message: "+e))}},a.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onPendingObserversChange(this._pendingObservers.length)},a.prototype._queueObserver=function(e){return(e=e||s).onCompleted=e.onCompleted||n,e.onError=e.onError||n,e.onNext=e.onNext||n,void 0===this._currentObserver?this._currentObserver=e:this._pendingObservers.push(e),this._observer.onPendingObserversChange(this._pendingObservers.length),!0},a.prototype._notifyErrorToObservers=function(e){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(e);0<this._pendingObservers.length;){var t=this._pendingObservers.shift();t&&t.onError&&t.onError(e)}},a.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||0<this._pendingObservers.length},a.prototype._resetFailure=function(){this._currentFailure=null},a);function a(e){var t=void 0===e?{}:e,r=t.transformMetadata,e=t.log,t=t.observer;this._pendingObservers=[],this._log=e,this._transformMetadata=r||i,this._observer=Object.assign({onPendingObserversChange:n,onError:n,onFailure:n,onErrorApplyTransformation:i},t)}r.default=e},{"neo4j-driver-core":59}],15:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.ofRecord=function(e){return null===e?s.ofNull():new d(e)},s.ofMessageResponse=function(e){return null===e?s.ofNull():new u(e)},s.ofNull=function(){return new f},Object.defineProperty(s.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),s);function s(){}r.default=i;var a,u=(o(c,a=i),Object.defineProperty(c.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),c);function c(e){var t=a.call(this)||this;return t._response=e,t}var l,f=(o(h,l=i),Object.defineProperty(h.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),h);function h(){return null!==l&&l.apply(this,arguments)||this}var p,d=(o(_,p=i),Object.defineProperty(_.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),_);function _(e){var t=p.call(this)||this;return t._record=e,t}},{}],16:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ProcedureRouteObserver=r.RouteObserver=r.CompletedObserver=r.FailedObserver=r.ResetObserver=r.LoginObserver=r.ResultStreamObserver=r.StreamObserver=void 0;var s=e("neo4j-driver-core"),a=i(e("./routing-table-raw")),h=s.internal.constants.FETCH_ALL,u=s.error.PROTOCOL_ERROR,c=(l.prototype.onNext=function(e){},l.prototype.onError=function(e){},l.prototype.onCompleted=function(e){},l);function l(){}r.StreamObserver=c;var p,i=(o(f,p=c),f.prototype.onNext=function(e){var t=new s.Record(this._fieldKeys,e,this._fieldLookup);this._observers.some(function(e){return e.onNext})?this._observers.forEach(function(e){e.onNext&&e.onNext(t)}):(this._queuedRecords.push(t),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},f.prototype.onCompleted=function(e){this._state.onSuccess(this,e)},f.prototype.onError=function(e){this._state.onError(this,e)},f.prototype.cancel=function(){this._discard=!0},f.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(S.STREAMING)},f.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(S.SUCCEEDED)},f.prototype.subscribe=function(e){if(this._error)e.onError(this._error);else{if(this._head&&e.onKeys&&e.onKeys(this._head),0<this._queuedRecords.length&&e.onNext)for(var t=0;t<this._queuedRecords.length;t++)e.onNext(this._queuedRecords[t]),this._queuedRecords.length-t-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===S.READY&&this._handleStreaming());this._tail&&e.onCompleted&&e.onCompleted(this._tail),this._observers.push(e),this._state===S.READY&&this._handleStreaming()}},f.prototype._handleHasMore=function(e){this._setState(S.READY),this._handleStreaming(),delete e.has_more},f.prototype._handlePullSuccess=function(e){var t=this;this._setState(S.SUCCEEDED);var r=Object.assign(this._server?{server:this._server}:{},this._meta,e),n=null;this._beforeComplete&&(n=this._beforeComplete(r));e=function(){t._tail=r,t._observers.some(function(e){return e.onCompleted})&&t._observers.forEach(function(e){e.onCompleted&&e.onCompleted(r)}),t._afterComplete&&t._afterComplete(r)};n?Promise.resolve(n).then(e):e()},f.prototype._handleRunSuccess=function(e,t){var r=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},e.fields&&0<e.fields.length){this._fieldKeys=e.fields;for(var n=0;n<e.fields.length;n++)this._fieldLookup[e.fields[n]]=n;delete e.fields}null!==e.qid&&void 0!==e.qid&&(this._queryId=e.qid,delete e.qid),this._storeMetadataForCompletion(e);var o=null;this._beforeKeys&&(o=this._beforeKeys(this._fieldKeys));var i=function(){r._head=r._fieldKeys,r._observers.some(function(e){return e.onKeys})&&r._observers.forEach(function(e){e.onKeys&&e.onKeys(r._fieldKeys)}),r._afterKeys&&r._afterKeys(r._fieldKeys),t()};o?Promise.resolve(o).then(i):i()}},f.prototype._handleError=function(t){var e=this;this._setState(S.FAILED),this._error=t;var r=null;this._beforeError&&(r=this._beforeError(t));function n(){e._observers.some(function(e){return e.onError})&&e._observers.forEach(function(e){e.onError&&e.onError(t)}),e._afterError&&e._afterError(t)}r?Promise.resolve(r).then(n):n()},f.prototype._handleStreaming=function(){this._head&&this._observers.some(function(e){return e.onNext||e.onCompleted})&&(this._discard?(this._discardFunction(this._queryId,this),this._setState(S.STREAMING)):this._autoPull&&(this._moreFunction(this._queryId,this._fetchSize,this),this._setState(S.STREAMING)))},f.prototype._storeMetadataForCompletion=function(e){for(var t,r=Object.keys(e),n=r.length;n--;)t=r[n],this._meta[t]=e[t]},f.prototype._setState=function(e){this._state=e},f.prototype._setupAuoPull=function(e){this._autoPull=!0,e===h?(this._lowRecordWatermark=Number.MAX_VALUE,this._highRecordWatermark=Number.MAX_VALUE):(this._lowRecordWatermark=.3*e,this._highRecordWatermark=.7*e)},f);function f(e){var t=void 0===e?{}:e,r=t.reactive,n=void 0!==r&&r,o=t.moreFunction,i=t.discardFunction,s=t.fetchSize,a=void 0===s?h:s,u=t.beforeError,c=t.afterError,l=t.beforeKeys,f=t.afterKeys,e=t.beforeComplete,r=t.afterComplete,s=t.server,t=p.call(this)||this;return t._fieldKeys=null,t._fieldLookup=null,t._head=null,t._queuedRecords=[],t._tail=null,t._error=null,t._observers=[],t._meta={},t._server=s,t._beforeError=u,t._afterError=c,t._beforeKeys=l,t._afterKeys=f,t._beforeComplete=e,t._afterComplete=r,t._queryId=null,t._moreFunction=o,t._discardFunction=i,t._discard=!1,t._fetchSize=a,t._setState(n?S.READY:S.READY_STREAMING),t._setupAuoPull(a),t}r.ResultStreamObserver=i;var d,e=(o(_,d=c),_.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when initializing "+s.json.stringify(e)))},_.prototype.onError=function(e){this._onError&&this._onError(e)},_.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(e)},_);function _(e){var t=void 0===e?{}:e,r=t.onError,e=t.onCompleted,t=d.call(this)||this;return t._onError=r,t._onCompleted=e,t}r.LoginObserver=e;var y,e=(o(b,y=c),b.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},b.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},b.prototype.onCompleted=function(e){this._onComplete&&this._onComplete(e)},b);function b(e){var t=void 0===e?{}:e,r=t.onProtocolError,n=t.onError,e=t.onComplete,t=y.call(this)||this;return t._onProtocolError=r,t._onError=n,t._onComplete=e,t}r.ResetObserver=e;var v,e=(o(m,v=i),m);function m(e){var t=e.error,e=e.onError,e=v.call(this,{beforeError:e})||this;return e.onError(t),e}r.FailedObserver=e;var g,i=(o(E,g=i),E);function E(){var e=g.call(this)||this;return g.prototype.markCompleted.call(e),e}r.CompletedObserver=i;var w,i=(o(O,w=c),O.prototype.onNext=function(e){this._records.push(e)},O.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},O.prototype.onCompleted=function(){null===this._records||1===this._records.length?this._onCompleted&&this._onCompleted(a.default.ofRecord(this._records[0])):this.onError((0,s.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+s.json.stringify(this._records),u))},O);function O(e){var t=e.resultObserver,r=e.onProtocolError,n=e.onError,o=e.onCompleted,e=w.call(this)||this;return e._resultObserver=t,e._onError=n,e._onCompleted=o,e._records=[],e._onProtocolError=r,t.subscribe(e),e}r.ProcedureRouteObserver=i;var C,c=(o(P,C=c),P.prototype.onNext=function(e){this.onError((0,s.newError)("Received RECORD when resetting: received record is: "+s.json.stringify(e),u))},P.prototype.onError=function(e){e.code===u&&this._onProtocolError&&this._onProtocolError(e.message),this._onError&&this._onError(e)},P.prototype.onCompleted=function(e){this._onCompleted&&this._onCompleted(a.default.ofMessageResponse(e))},P);function P(e){var t=void 0===e?{}:e,r=t.onProtocolError,n=t.onError,e=t.onCompleted,t=C.call(this)||this;return t._onProtocolError=r,t._onError=n,t._onCompleted=e,t}r.RouteObserver=c;var S={READY_STREAMING:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){e._setState(S.STREAMING)})},onError:function(e,t){e._handleError(t)},name:function(){return"READY_STREAMING"}},READY:{onSuccess:function(e,t){e._handleRunSuccess(t,function(){return e._handleStreaming()})},onError:function(e,t){e._handleError(t)},name:function(){return"READY"}},STREAMING:{onSuccess:function(e,t){t.has_more?e._handleHasMore(t):e._handlePullSuccess(t)},onError:function(e,t){e._handleError(t)},name:function(){return"STREAMING"}},FAILED:{onError:function(e){},name:function(){return"FAILED"}},SUCCEEDED:{name:function(){return"SUCCEEDED"}}}},{"./routing-table-raw":15,"neo4j-driver-core":59}],17:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i=(s.prototype.getUInt8=function(e){throw new Error("Not implemented")},s.prototype.getInt8=function(e){throw new Error("Not implemented")},s.prototype.getFloat64=function(e){throw new Error("Not implemented")},s.prototype.putUInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putInt8=function(e,t){throw new Error("Not implemented")},s.prototype.putFloat64=function(e,t){throw new Error("Not implemented")},s.prototype.getInt16=function(e){return this.getInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getUInt16=function(e){return this.getUInt8(e)<<8|this.getUInt8(e+1)},s.prototype.getInt32=function(e){return this.getInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getUInt32=function(e){return this.getUInt8(e)<<24|this.getUInt8(e+1)<<16|this.getUInt8(e+2)<<8|this.getUInt8(e+3)},s.prototype.getInt64=function(e){return this.getInt8(e)<<56|this.getUInt8(e+1)<<48|this.getUInt8(e+2)<<40|this.getUInt8(e+3)<<32|this.getUInt8(e+4)<<24|this.getUInt8(e+5)<<16|this.getUInt8(e+6)<<8|this.getUInt8(e+7)},s.prototype.getSlice=function(e,t){return new u(e,t,this)},s.prototype.putInt16=function(e,t){this.putInt8(e,t>>8),this.putUInt8(e+1,255&t)},s.prototype.putUInt16=function(e,t){this.putUInt8(e,t>>8&255),this.putUInt8(e+1,255&t)},s.prototype.putInt32=function(e,t){this.putInt8(e,t>>24),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putUInt32=function(e,t){this.putUInt8(e,t>>24&255),this.putUInt8(e+1,t>>16&255),this.putUInt8(e+2,t>>8&255),this.putUInt8(e+3,255&t)},s.prototype.putInt64=function(e,t){this.putInt8(e,t>>48),this.putUInt8(e+1,t>>42&255),this.putUInt8(e+2,t>>36&255),this.putUInt8(e+3,t>>30&255),this.putUInt8(e+4,t>>24&255),this.putUInt8(e+5,t>>16&255),this.putUInt8(e+6,t>>8&255),this.putUInt8(e+7,255&t)},s.prototype.putBytes=function(e,t){for(var r=0,n=t.remaining();r<n;r++)this.putUInt8(e+r,t.readUInt8())},s.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},s.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},s.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},s.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},s.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},s.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},s.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},s.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},s.prototype.writeUInt8=function(e){this.putUInt8(this._updatePos(1),e)},s.prototype.writeInt8=function(e){this.putInt8(this._updatePos(1),e)},s.prototype.writeInt16=function(e){this.putInt16(this._updatePos(2),e)},s.prototype.writeInt32=function(e){this.putInt32(this._updatePos(4),e)},s.prototype.writeUInt32=function(e){this.putUInt32(this._updatePos(4),e)},s.prototype.writeInt64=function(e){this.putInt64(this._updatePos(8),e)},s.prototype.writeFloat64=function(e){this.putFloat64(this._updatePos(8),e)},s.prototype.writeBytes=function(e){this.putBytes(this._updatePos(e.remaining()),e)},s.prototype.readSlice=function(e){return this.getSlice(this._updatePos(e),e)},s.prototype._updatePos=function(e){var t=this.position;return this.position+=e,t},s.prototype.remaining=function(){return this.length-this.position},s.prototype.hasRemaining=function(){return 0<this.remaining()},s.prototype.reset=function(){this.position=0},s.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},s.prototype.toHex=function(){for(var e="",t=0;t<this.length;t++){var r=this.getUInt8(t).toString(16);e+=r=1===r.length?"0"+r:r,t!==this.length-1&&(e+=" ")}return e},s);function s(e){this.position=0,this.length=e}r.default=i;var a,u=(o(c,a=i),c.prototype.putUInt8=function(e,t){this._inner.putUInt8(this._start+e,t)},c.prototype.getUInt8=function(e){return this._inner.getUInt8(this._start+e)},c.prototype.putInt8=function(e,t){this._inner.putInt8(this._start+e,t)},c.prototype.putFloat64=function(e,t){this._inner.putFloat64(this._start+e,t)},c.prototype.getInt8=function(e){return this._inner.getInt8(this._start+e)},c.prototype.getFloat64=function(e){return this._inner.getFloat64(this._start+e)},c);function c(e,t,r){t=a.call(this,t)||this;return t._start=e,t._inner=r,t}},{}],18:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.BaseBuffer=void 0;e=n(e("./base-buf"));r.BaseBuffer=e.default,r.default=e.default},{"./base-buf":17}],19:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var i=n(e("../channel-buf")),s=e("neo4j-driver-core"),e=s.internal.util,a=e.ENCRYPTION_OFF,u=e.ENCRYPTION_ON,e=(o.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,s.newError)("Failed to establish connection in "+this._config.connectionTimeout+"ms",this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&(this._error=(0,s.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},o.prototype.write=function(e){if(null!==this._pending)this._pending.push(e);else{if(!(e instanceof i.default))throw(0,s.newError)("Don't know how to send buffer: "+e);try{this._ws.send(e._buffer)}catch(e){if(1===this._ws.readyState)throw e;this._handleConnectionError()}}},o.prototype.close=function(){var r=this;return new Promise(function(e,t){r._ws&&3!==r._ws.readyState?(r._open=!1,r._clearConnectionTimeout(),r._ws.onclose=function(){return e()},r._ws.close()):e()})},o.prototype.setupReceiveTimeout=function(e){},o.prototype.stopReceiveTimeout=function(){},o.prototype.startReceiveTimeout=function(){},o.prototype._setupConnectionTimeout=function(){var e=this,t=this._config.connectionTimeout;if(t){var r=this._ws;return setTimeout(function(){1!==r.readyState&&(e._connectionTimeoutFired=!0,r.close())},t)}return null},o.prototype._clearConnectionTimeout=function(){var e=this._connectionTimeoutId;!e&&0!==e||(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(e))},o);function o(e,t,r){void 0===t&&(t=c),void 0===r&&(r=function(e){return new WebSocket(e)}),this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this);var n,o=function(e,t){var r=function(e){return!0===e.encrypted||e.encrypted===u}(e),n=function(e){return!1===e.encrypted||e.encrypted===a}(e),e=e.trust,t=function(e){e="function"==typeof e?e():"";return e&&0<=e.toLowerCase().indexOf("https")}(t);if(function(e,t,r){null===r||(e&&!r?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):t&&r&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(r,n,t),n)return{scheme:"ws",error:null};if(t)return{scheme:"wss",error:null};if(r)return e&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==e?{scheme:null,error:(0,s.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+e+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+a+'"` in the driver configuration.')}:{scheme:"wss",error:null};return{scheme:"ws",error:null}}(this._config=e,t),t=o.scheme,o=o.error;o?this._error=o:(this._ws=function(t,r,n){var e=t+"://"+r.asHostPort();try{return n(e)}catch(e){if(function(e,t){return"SyntaxError"===e.name&&function(e){return"["===e.charAt(0)&&-1!==e.indexOf("]")}(t.asHostPort())}(e,r)){r=function(e,t){var r=t.host().replace(new RegExp(":","g"),"-").replace("%","s");return e+"://"+r+".ipv6-literal.net:"+t.port()}(t,r);return n(r)}throw e}}(t,e.address,r),this._ws.binaryType="arraybuffer",(n=this)._ws.onclose=function(e){e&&!e.wasClean&&n._handleConnectionError(),n._open=!1},this._ws.onopen=function(){n._clearConnectionTimeout();var e=n._pending;n._pending=null;for(var t=0;t<e.length;t++)n.write(e[t])},this._ws.onmessage=function(e){n.onmessage&&(e=new i.default(e.data),n.onmessage(e))},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout())}function c(){return"undefined"!=typeof window&&window.location?window.location.protocol:null}r.default=e},{"../channel-buf":22,"neo4j-driver-core":59}],20:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,e=e("neo4j-driver-core").internal.resolver.BaseHostNameResolver,e=(o(s,i=e),s.prototype.resolve=function(e){return this._resolveToItself(e)},s);function s(){return null!==i&&i.apply(this,arguments)||this}r.default=e},{"neo4j-driver-core":59}],21:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.HostNameResolver=r.Channel=void 0;var o=n(e("./browser-channel")),e=n(e("./browser-host-name-resolver"));r.Channel=o.default,r.HostNameResolver=e.default},{"./browser-channel":19,"./browser-host-name-resolver":20}],22:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.alloc=void 0;var s,a=i(e("buffer")),e=i(e("../buf")),u=(s=e.default,o(c,s),c.prototype.getUInt8=function(e){return this._buffer.readUInt8(e)},c.prototype.getInt8=function(e){return this._buffer.readInt8(e)},c.prototype.getFloat64=function(e){return this._buffer.readDoubleBE(e)},c.prototype.putUInt8=function(e,t){this._buffer.writeUInt8(t,e)},c.prototype.putInt8=function(e,t){this._buffer.writeInt8(t,e)},c.prototype.putFloat64=function(e,t){this._buffer.writeDoubleBE(t,e)},c.prototype.putBytes=function(e,t){var r;t instanceof c?(r=Math.min(t.length-t.position,this.length-e),t._buffer.copy(this._buffer,e,t.position,t.position+r),t.position+=r):s.prototype.putBytes.call(this,e,t)},c.prototype.getSlice=function(e,t){return new c(this._buffer.slice(e,e+t))},c);function c(e){var t=this,e=(e=e)instanceof a.default.Buffer?e:"number"==typeof e&&"function"==typeof a.default.Buffer.alloc?a.default.Buffer.alloc(e):new a.default.Buffer(e);return(t=s.call(this,e.length)||this)._buffer=e,t}r.default=u,r.alloc=function(e){return new u(e)}},{"../buf":18,buffer:91}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("neo4j-driver-core"),o=n.internal.util,e=o.ENCRYPTION_OFF,o=o.ENCRYPTION_ON,i=n.error.SERVICE_UNAVAILABLE,s=3e4,a=[null,void 0,!0,!1,o,e],u=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"];r.default=function(e,t,r){this.address=e,this.encrypted=function(e){e=e.encrypted;if(-1!==a.indexOf(e))return e;throw(0,n.newError)("Illegal value of the encrypted setting "+e+". Expected one of "+a)}(t),this.trust=function(e){e=e.trust;if(-1!==u.indexOf(e))return e;throw(0,n.newError)("Illegal value of the trust setting "+e+". Expected one of "+u)}(t),this.trustedCertificates=t.trustedCertificates||[],this.knownHostsPath=t.knownHosts||null,this.connectionErrorCode=r||i,this.connectionTimeout=function(e){e=parseInt(e.connectionTimeout,10);return 0===e||e&&e<0?null:e||s}(t)}},{"neo4j-driver-core":59}],24:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Dechunker=r.Chunker=void 0;var s,a=i(e("../buf/base-buf")),u=e("./channel-buf"),c=i(e("./combined-buf")),o=(s=a.default,o(l,s),l.prototype.putUInt8=function(e,t){this._ensure(1),this._buffer.writeUInt8(t)},l.prototype.putInt8=function(e,t){this._ensure(1),this._buffer.writeInt8(t)},l.prototype.putFloat64=function(e,t){this._ensure(8),this._buffer.writeFloat64(t)},l.prototype.putBytes=function(e,t){for(;0<t.remaining();)this._ensure(1),this._buffer.remaining()>t.remaining()?this._buffer.writeBytes(t):this._buffer.writeBytes(t.readSlice(this._buffer.remaining()));return this},l.prototype.flush=function(){var e;return 0<this._buffer.position&&(this._closeChunkIfOpen(),e=this._buffer,this._buffer=null,this._ch.write(e.getSlice(0,e.position)),this._buffer=(0,u.alloc)(this._bufferSize),this._chunkOpen=!1),this},l.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},l.prototype._ensure=function(e){e=this._chunkOpen?e:e+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},l.prototype._closeChunkIfOpen=function(){var e;this._chunkOpen&&(e=this._buffer.position-(this._currentChunkStart+2),this._buffer.putUInt16(this._currentChunkStart,e),this._chunkOpen=!1)},l);function l(e,t){var r=s.call(this,0)||this;return r._bufferSize=t||1400,r._ch=e,r._buffer=(0,u.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}r.Chunker=o;f.prototype.AWAITING_CHUNK=function(e){return 2<=e.remaining()?this._onHeader(e.readUInt16()):(this._partialChunkHeader=e.readUInt8()<<8,this.IN_HEADER)},f.prototype.IN_HEADER=function(e){return this._onHeader(65535&(this._partialChunkHeader|e.readUInt8()))},f.prototype.IN_CHUNK=function(e){return this._chunkSize<=e.remaining()?(this._currentMessage.push(e.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=e.remaining(),this._currentMessage.push(e.readSlice(e.remaining())),this.IN_CHUNK)},f.prototype.CLOSED=function(e){},f.prototype._onHeader=function(e){if(0!==e)return this._chunkSize=e,this.IN_CHUNK;var t=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:t=this._currentMessage[0];break;default:t=new c.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(t),this.AWAITING_CHUNK},f.prototype.write=function(e){for(;e.hasRemaining();)this._state=this._state(e)},o=f;function f(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}r.Dechunker=o},{"../buf/base-buf":17,"./channel-buf":22,"./combined-buf":25}],25:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,s=e("../buf"),a=e("./channel-buf"),o=(i=s.BaseBuffer,o(u,i),u.prototype.getUInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getUInt8(e);e-=r.length}},u.prototype.getInt8=function(e){for(var t=0;t<this._buffers.length;t++){var r=this._buffers[t];if(!(e>=r.length))return r.getInt8(e);e-=r.length}},u.prototype.getFloat64=function(e){for(var t=(0,a.alloc)(8),r=0;r<8;r++)t.putUInt8(r,this.getUInt8(e+r));return t.getFloat64(0)},u);function u(e){for(var t=this,r=0,n=0;n<e.length;n++)r+=e[n].length;return(t=i.call(this,r)||this)._buffers=e,t}r.default=o},{"../buf":18,"./channel-buf":22}],26:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.utf8=r.alloc=r.ChannelConfig=void 0,o(e("./node"),r),o(e("./chunking"),r);var s=e("./channel-config");Object.defineProperty(r,"ChannelConfig",{enumerable:!0,get:function(){return i(s).default}});var a=e("./channel-buf");Object.defineProperty(r,"alloc",{enumerable:!0,get:function(){return a.alloc}});var u=e("./utf8");Object.defineProperty(r,"utf8",{enumerable:!0,get:function(){return i(u).default}})},{"./channel-buf":22,"./channel-config":23,"./chunking":24,"./node":21,"./utf8":27}],27:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var o=n(e("./channel-buf")),i=e("neo4j-driver-core"),s=n(e("buffer")),a=new(e("string_decoder").StringDecoder)("utf8");r.default={encode:function(e){return new o.default((e=e,"function"==typeof s.default.Buffer.from?s.default.Buffer.from(e,"utf8"):new s.default.Buffer(e,"utf8")))},decode:function(e,t){if(Object.prototype.hasOwnProperty.call(e,"_buffer"))return n=t,o=(r=e).position,n=o+n,r.position=Math.min(n,r.length),r._buffer.toString("utf8",o,n);if(Object.prototype.hasOwnProperty.call(e,"_buffers"))return function(e,t,o,r){var i=t,s=e.position;return e._updatePos(Math.min(t,e.length-s)),e._buffers.reduce(function(e,t){if(i<=0)return e;if(s>=t.length)return s-=t.length,"";t._updatePos(s-t.position);var r=Math.min(t.length-s,i),n=t.readSlice(r);return t._updatePos(r),i=Math.max(i-n.length,0),s=0,e+o(n)},"")+r()}(e,t,function(e){return a.write(e._buffer)},function(){return a.end()});throw(0,i.newError)("Don't know how to decode strings from '"+e+"'");var r,n,o}}},{"./channel-buf":22,buffer:91,"neo4j-driver-core":59,string_decoder:94}],28:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var u,c=a(e("./connection-provider-pooled")),l=e("../connection"),a=e("neo4j-driver-core"),e=a.internal.constants,f=e.BOLT_PROTOCOL_V3,h=e.BOLT_PROTOCOL_V4_0,p=e.BOLT_PROTOCOL_V4_4,d=a.error.SERVICE_UNAVAILABLE,o=(a.error.newError,u=c.default,o(_,u),_.prototype.acquireConnection=function(e){var r=this,e=void 0===e?{}:e,n=(e.accessMode,e.database),t=(e.bookmarks,l.ConnectionErrorHandler.create({errorCode:d,handleAuthorizationExpired:function(e,t){return r._handleAuthorizationExpired(e,t,n)}}));return this._connectionPool.acquire(this._address).then(function(e){return new l.DelegateConnection(e,t)})},_.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Direct driver "+this._id+" will close connection to "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(t).catch(function(){}),e},_.prototype._hasProtocolVersion=function(n){return i(this,void 0,void 0,function(){var t,r;return s(this,function(e){switch(e.label){case 0:return[4,(0,l.createChannelConnection)(this._address,this._config,this._createConnectionErrorHandler(),this._log)];case 1:return t=e.sent(),r=t.protocol()?t.protocol().version:null,[4,t.close()];case 2:return e.sent(),r?[2,n(r)]:[2,!1]}})})},_.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return h<=e})];case 1:return[2,e.sent()]}})})},_.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return f<=e})];case 1:return[2,e.sent()]}})})},_.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return p<=e})];case 1:return[2,e.sent()]}})})},_);function _(e){var t=e.id,r=e.config,n=e.log,o=e.address,i=e.userAgent,e=e.authToken,e=u.call(this,{id:t,config:r,log:n,userAgent:i,authToken:e})||this;return e._address=o,e}r.default=o},{"../connection":37,"./connection-provider-pooled":29,"neo4j-driver-core":59}],29:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},u=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},c=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};Object.defineProperty(r,"__esModule",{value:!0});var l,f=e("../connection"),h=a(e("../pool")),e=e("neo4j-driver-core"),p=e.error.SERVICE_UNAVAILABLE,o=(l=e.ConnectionProvider,o(d,l),d.prototype._createConnectionErrorHandler=function(){return new f.ConnectionErrorHandler(p)},d.prototype._createConnection=function(e,r){var n=this;return this._createChannelConnection(e).then(function(t){return t._release=function(){return r(e,t)},(n._openConnections[t.id]=t).connect(n._userAgent,n._authToken).catch(function(e){throw n._destroyConnection(t),e})})},d.prototype._validateConnection=function(e){if(!e.isOpen())return!1;var t=this._config.maxConnectionLifetime;return Date.now()-e.creationTimestamp<=t},d.prototype._destroyConnection=function(e){return delete this._openConnections[e.id],e.close()},d.prototype.close=function(){return u(this,void 0,void 0,function(){return c(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.close()];case 1:return e.sent(),[4,Promise.all(Object.values(this._openConnections).map(function(e){return e.close()}))];case 2:return e.sent(),[2]}})})},d._installIdleObserverOnConnection=function(e,t){e._queueObserver(t)},d._removeIdleObserverOnConnection=function(e){e._updateCurrentObserver()},d);function d(e,t){var r=e.id,n=e.config,o=e.log,i=e.userAgent,e=e.authToken;void 0===t&&(t=null);var s=l.call(this)||this;return s._id=r,s._config=n,s._log=o,s._userAgent=i,s._authToken=e,s._createChannelConnection=t||function(e){return(0,f.createChannelConnection)(e,s._config,s._createConnectionErrorHandler(),s._log)},s._connectionPool=new h.default({create:s._createConnection.bind(s),destroy:s._destroyConnection.bind(s),validate:s._validateConnection.bind(s),installIdleObserver:d._installIdleObserverOnConnection.bind(s),removeIdleObserver:d._removeIdleObserverOnConnection.bind(s),config:h.PoolConfig.fromDriverConfig(n),log:s._log}),s._openConnections={},s}r.default=o},{"../connection":37,"../pool":47,"neo4j-driver-core":59}],30:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),l=this&&this.__assign||function(){return(l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t},p=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},d=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},u=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var h,_=e("neo4j-driver-core"),y=a(e("../rediscovery")),b=e("../channel"),v=f(e("./connection-provider-single")),f=f(e("./connection-provider-pooled")),m=e("../load-balancing"),g=e("../connection"),E=_.error.SERVICE_UNAVAILABLE,w=_.error.SESSION_EXPIRED,O=_.internal.bookmark.Bookmark,e=_.internal.constants,C=e.ACCESS_MODE_READ,P=e.ACCESS_MODE_WRITE,S=e.BOLT_PROTOCOL_V3,T=e.BOLT_PROTOCOL_V4_0,I=e.BOLT_PROTOCOL_V4_4,R=(0,_.int)(3e4),o=(h=f.default,o(k,h),k.prototype._createConnectionErrorHandler=function(){return new g.ConnectionErrorHandler(w)},k.prototype._handleUnavailability=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will forget "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this.forget(t,r||null),e},k.prototype._handleAuthorizationExpired=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will close connections to "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this._connectionPool.purge(t).catch(function(){}),e},k.prototype._handleWriteFailure=function(e,t,r){return this._log.warn("Routing driver "+this._id+" will forget writer "+t+" for database '"+r+"' because of an error "+e.code+" '"+e.message+"'"),this.forgetWriter(t,r||null),(0,_.newError)("No longer possible to write to server at "+t,w)},k.prototype.acquireConnection=function(e){var e=void 0===e?{}:e,u=e.accessMode,c=e.database,l=e.bookmarks,f=e.impersonatedUser,h=e.onDatabaseNameResolved;return p(this,void 0,void 0,function(){var t,r,n,o,i,s,a=this;return d(this,function(e){switch(e.label){case 0:return n={database:c||null},o=new g.ConnectionErrorHandler(w,function(e,t){return a._handleUnavailability(e,t,n.database)},function(e,t){return a._handleWriteFailure(e,t,n.database)},function(e,t){return a._handleAuthorizationExpired(e,t,n.database)}),[4,this._freshRoutingTable({accessMode:u,database:n.database,bookmark:l,impersonatedUser:f,onDatabaseNameResolved:function(e){n.database=n.database||e,h&&h(e)}})];case 1:if(i=e.sent(),u===C)r=this._loadBalancingStrategy.selectReader(i.readers),t="read";else{if(u!==P)throw(0,_.newError)("Illegal mode "+u);r=this._loadBalancingStrategy.selectWriter(i.writers),t="write"}if(!r)throw(0,_.newError)("Failed to obtain connection towards "+t+" server. Known routing table is: "+i,w);e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this._acquireConnectionToServer(r,t,i)];case 3:return s=e.sent(),[2,new g.DelegateConnection(s,o)];case 4:throw s=e.sent(),o.handleAndTransformError(s,r);case 5:return[2]}})})},k.prototype._hasProtocolVersion=function(s){return p(this,void 0,void 0,function(){var t,r,n,o,i;return d(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:t=e.sent(),r=0,e.label=2;case 2:if(!(r<t.length))return[3,8];e.label=3;case 3:return e.trys.push([3,6,,7]),[4,(0,g.createChannelConnection)(t[r],this._config,this._createConnectionErrorHandler(),this._log)];case 4:return n=e.sent(),o=n.protocol()?n.protocol().version:null,[4,n.close()];case 5:return e.sent(),o?[2,s(o)]:[2,!1];case 6:return i=e.sent(),i=i,[3,7];case 7:return r++,[3,2];case 8:if(i)throw i;return[2,!1]}})})},k.prototype.supportsMultiDb=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return T<=e})];case 1:return[2,e.sent()]}})})},k.prototype.supportsTransactionConfig=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return S<=e})];case 1:return[2,e.sent()]}})})},k.prototype.supportsUserImpersonation=function(){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._hasProtocolVersion(function(e){return I<=e})];case 1:return[2,e.sent()]}})})},k.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch(function(){})},k.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},k.prototype._acquireConnectionToServer=function(e,t,r){return this._connectionPool.acquire(e)},k.prototype._freshRoutingTable=function(e){var t=void 0===e?{}:e,r=t.accessMode,n=t.database,o=t.bookmark,i=t.impersonatedUser,e=t.onDatabaseNameResolved,t=this._routingTableRegistry.get(n,function(){return new y.RoutingTable({database:n})});return t.isStaleFor(r)?(this._log.info('Routing table is stale for database: "'+n+'" and access mode: "'+r+'": '+t),this._refreshRoutingTable(t,o,i,e)):t},k.prototype._refreshRoutingTable=function(e,t,r,n){var o=e.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(o,e,t,r,n):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(o,e,t,r,n)},k.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(n,o,i,s,a){return p(this,void 0,void 0,function(){var t,r;return d(this,function(e){switch(e.label){case 0:return t=[],[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,o,i,s)];case 1:return(r=e.sent())?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(n,o,i,s)];case 3:r=e.sent(),e.label=4;case 4:return[4,this._applyRoutingTableIfPossible(o,r,a)];case 5:return[2,e.sent()]}})})},k.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(r,n,o,i,s){return p(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(r,n,o,i)];case 1:return(t=e.sent())?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(r,this._seedRouter,n,o,i)];case 2:t=e.sent(),e.label=3;case 3:return[4,this._applyRoutingTableIfPossible(n,t,s)];case 4:return[2,e.sent()]}})})},k.prototype._fetchRoutingTableUsingKnownRouters=function(r,n,o,i){return p(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._fetchRoutingTable(r,n,o,i)];case 1:return(t=e.sent())?[2,t]:(t=r.length-1,k._forgetRouter(n,r,t),[2,null])}})})},k.prototype._fetchRoutingTableUsingSeedRouter=function(r,n,o,i,s){return p(this,void 0,void 0,function(){var t;return d(this,function(e){switch(e.label){case 0:return[4,this._resolveSeedRouter(n)];case 1:return t=e.sent(),t=t.filter(function(e){return r.indexOf(e)<0}),[4,this._fetchRoutingTable(t,o,i,s)];case 2:return[2,e.sent()]}})})},k.prototype._resolveSeedRouter=function(n){return p(this,void 0,void 0,function(){var t,r=this;return d(this,function(e){switch(e.label){case 0:return[4,this._hostNameResolver.resolve(n)];case 1:return t=e.sent(),[4,Promise.all(t.map(function(e){return r._dnsResolver.resolve(e)}))];case 2:return t=e.sent(),[2,[].concat.apply([],t)]}})})},k.prototype._fetchRoutingTable=function(s,a,u,c){var e=this;return s.reduce(function(n,o,i){return p(e,void 0,void 0,function(){var t,r;return d(this,function(e){switch(e.label){case 0:return[4,n];case 1:return(r=e.sent())?[2,r]:(k._forgetRouter(a,s,i-1),[4,this._createSessionForRediscovery(o,u,c)]);case 2:if(!(t=e.sent()))return[3,8];e.label=3;case 3:return e.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(t,a.database,o,c)];case 4:return[2,e.sent()];case 5:if((r=e.sent())&&"Neo.ClientError.Database.DatabaseNotFound"===r.code)throw r;return this._log.warn("unable to fetch routing table because of an error "+r),[2,null];case 6:return t.close(),[7];case 7:return[3,9];case 8:return[2,null];case 9:return[2]}})})},Promise.resolve(null))},k.prototype._createSessionForRediscovery=function(o,i,s){return p(this,void 0,void 0,function(){var t,r,n=this;return d(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this._connectionPool.acquire(o)];case 1:return t=e.sent(),r=g.ConnectionErrorHandler.create({errorCode:w,handleAuthorizationExpired:function(e,t){return n._handleAuthorizationExpired(e,t)}}),r=new v.default(new g.DelegateConnection(t,r)),t.protocol().version<4?[2,new _.Session({mode:P,bookmark:O.empty(),connectionProvider:r})]:[2,new _.Session({mode:C,database:"system",bookmark:i,connectionProvider:r,impersonatedUser:s})];case 2:if((r=e.sent())&&"Neo.ClientError.Security.Unauthorized"===r.code)throw r;return[2,null];case 3:return[2]}})})},k.prototype._applyRoutingTableIfPossible=function(t,r,n){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:if(!r)throw(0,_.newError)("Could not perform discovery. No routing servers available. Known routing table: "+t,E);return 0===r.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(r,n)];case 1:return e.sent(),[2,r]}})})},k.prototype._updateRoutingTable=function(t,r){return p(this,void 0,void 0,function(){return d(this,function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),r(t.database),this._log.info("Updated routing table "+t),[2]}})})},k._forgetRouter=function(e,t,r){r=t[r];e&&r&&e.forgetRouter(r)},k);function k(e){var t=e.id,r=e.address,n=e.routingContext,o=e.hostNameResolver,i=e.config,s=e.log,a=e.userAgent,u=e.authToken,e=e.routingTablePurgeDelay,c=h.call(this,{id:t,config:i,log:s,userAgent:a,authToken:u},function(e){return(0,g.createChannelConnection)(e,c._config,c._createConnectionErrorHandler(),c._log,c._routingContext)})||this;return c._routingContext=l(l({},n),{address:r.toString()}),c._seedRouter=r,c._rediscovery=new y.default(c._routingContext),c._loadBalancingStrategy=new m.LeastConnectedLoadBalancingStrategy(c._connectionPool),c._hostNameResolver=o,c._dnsResolver=new b.HostNameResolver,c._log=s,c._useSeedRouter=!0,c._routingTableRegistry=new N(e?(0,_.int)(e):R),c}r.default=o;var N=(j.prototype.register=function(e){return this._tables.set(e.database,e),this},j.prototype.apply=function(e,t){var r=void 0===t?{}:t,t=r.applyWhenExists,r=r.applyWhenDontExists,r=void 0===r?function(){}:r;return this._tables.has(e)?t(this._tables.get(e)):"string"==typeof e||null===e?r():this._forEach(t),this},j.prototype.get=function(e,t){return this._tables.has(e)?this._tables.get(e):"function"==typeof t?t():t},j.prototype.removeExpired=function(){var t=this;return this._removeIf(function(e){return e.isExpiredFor(t._routingTablePurgeDelay)})},j.prototype._forEach=function(e){var t,r;try{for(var n=u(this._tables),o=n.next();!o.done;o=n.next())e(c(o.value,2)[1])}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},j.prototype._remove=function(e){return this._tables.delete(e),this},j.prototype._removeIf=function(e){var t,r;try{for(var n=u(this._tables),o=n.next();!o.done;o=n.next()){var i=c(o.value,2),s=i[0];e(i[1])&&this._remove(s)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return this},j);function j(e){this._tables=new Map,this._routingTablePurgeDelay=e}},{"../channel":26,"../connection":37,"../load-balancing":39,"../rediscovery":50,"./connection-provider-pooled":29,"./connection-provider-single":31,"neo4j-driver-core":59}],31:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0});var i,e=e("neo4j-driver-core"),o=(i=e.ConnectionProvider,o(s,i),s.prototype.acquireConnection=function(e){e=void 0===e?{}:e,e.accessMode,e.database,e.bookmarks,e=this._connection;return this._connection=null,Promise.resolve(e)},s);function s(e){var t=i.call(this)||this;return t._connection=e,t}r.default=o},{"neo4j-driver-core":59}],32:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingConnectionProvider=r.DirectConnectionProvider=r.PooledConnectionProvider=r.SingleConnectionProvider=void 0;var o=e("./connection-provider-single");Object.defineProperty(r,"SingleConnectionProvider",{enumerable:!0,get:function(){return n(o).default}});var i=e("./connection-provider-pooled");Object.defineProperty(r,"PooledConnectionProvider",{enumerable:!0,get:function(){return n(i).default}});var s=e("./connection-provider-direct");Object.defineProperty(r,"DirectConnectionProvider",{enumerable:!0,get:function(){return n(s).default}});var a=e("./connection-provider-routing");Object.defineProperty(r,"RoutingConnectionProvider",{enumerable:!0,get:function(){return n(a).default}})},{"./connection-provider-direct":28,"./connection-provider-pooled":29,"./connection-provider-routing":30,"./connection-provider-single":31}],33:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},s=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=void 0;var f=e("../channel"),u=e("neo4j-driver-core"),c=a(e("./connection")),h=a(e("../bolt")),l=u.error.PROTOCOL_ERROR,p=u.internal.logger.Logger,d=0;r.createChannelConnection=function(i,s,a,u,c,e){void 0===c&&(c=null);var l=(e=void 0===e?function(e){return new f.Channel(e)}:e)(new f.ChannelConfig(i,s,a.errorCode()));return h.default.handshake(l).then(function(e){var r=e.protocolVersion,t=e.consumeRemainingBuffer,n=new f.Chunker(l),o=new f.Dechunker,e=new y(l,a,i,u,s.disableLosslessIntegers,c,n,function(t){return h.default.create({version:r,channel:l,chunker:n,dechunker:o,disableLosslessIntegers:s.disableLosslessIntegers,useBigInt:s.useBigInt,serversideRouting:c,server:t.server,log:t.logger,observer:{onPendingObserversChange:t._handleOngoingRequestsNumberChange.bind(t),onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})});return t(function(e){return o.write(e)}),e}).catch(function(e){return l.close().then(function(){throw e})})};var _,y=(_=c.default,o(b,_),Object.defineProperty(b.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(e){this._dbConnectionId=e},enumerable:!1,configurable:!0}),b.prototype.connect=function(e,t){return this._initialize(e,t)},b.prototype._initialize=function(e,n){var o=this,i=this;return new Promise(function(r,t){o._protocol.initialize({userAgent:e,authToken:n,onError:function(e){return t(e)},onComplete:function(e){var t;e&&(t=e.server,o.version&&!t||(o.version=t),t=e.connection_id,o.databaseId||(o.databaseId=t),!e.hints||null!=(e=e.hints["connection.recv_timeout_seconds"])&&(e=(0,u.toNumber)(e),Number.isInteger(e)&&0<e?o._ch.setupReceiveTimeout(1e3*e):o._log.info("Server located at "+o._address+" supplied an invalid connection receive timeout value ("+e+"). Please, verify the server configuration and status because this can be the symptom of a bigger issue."))),r(i)}})})},b.prototype.protocol=function(){return this._protocol},Object.defineProperty(b.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"version",{get:function(){return this._server.version},set:function(e){this._server.version=e},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),b.prototype._handleFatalError=function(e){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||e,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by "+this._error+" ("+u.json.stringify(this._error)+")"),this._protocol.notifyFatalError(this._error)},b.prototype._queueObserver=function(e){return this._protocol.queueObserverIfProtocolIsNotBroken(e)},b.prototype.hasOngoingObservableRequests=function(){return this._protocol.hasOngoingObservableRequests()},b.prototype.resetAndFlush=function(){var r=this;return new Promise(function(e,t){r._protocol.reset({onError:function(e){r._isBroken?t(e):(e=r._handleProtocolError("Received FAILURE as a response for RESET: "+e),t(e))},onComplete:function(){e()}})})},b.prototype._resetOnFailure=function(){var e=this;this.isOpen()&&this._protocol.reset({onError:function(){e._protocol.resetFailure()},onComplete:function(){e._protocol.resetFailure()}})},b.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},b.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},b.prototype._handleOngoingRequestsNumberChange=function(e){0===e?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout()},b.prototype.close=function(){return i(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return e.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}})})},b.prototype.toString=function(){return"Connection ["+this.id+"]["+(this.databaseId||"")+"]"},b.prototype._handleProtocolError=function(e){this._protocol.resetFailure(),this._updateCurrentObserver();e=(0,u.newError)(e,l);return this._handleFatalError(e),e},b);function b(e,t,r,n,o,i,s,a){void 0===o&&(o=!1),void 0===i&&(i=null);var u,c,t=_.call(this,t)||this;return t._id=d++,t._address=r,t._server={address:r.asHostPort()},t.creationTimestamp=Date.now(),t._disableLosslessIntegers=o,t._ch=e,t._chunker=s,t._log=(u=t,new p((c=n)._level,function(e,t){return c._loggerFunction(e,u+" "+t)})),t._serversideRouting=i,t._dbConnectionId=null,t._protocol=a(t),t._isBroken=!1,t._log.isDebugEnabled()&&t._log.debug("created towards "+r),t}r.default=y},{"../bolt":12,"../channel":26,"./connection":36,"neo4j-driver-core":59}],34:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,e=i(e("./connection")),o=(s=e.default,o(a,s),Object.defineProperty(a.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(e){this._delegate.databaseId=e},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"version",{get:function(){return this._delegate.version},set:function(e){this._delegate.version=e},enumerable:!1,configurable:!0}),a.prototype.isOpen=function(){return this._delegate.isOpen()},a.prototype.protocol=function(){return this._delegate.protocol()},a.prototype.connect=function(e,t){return this._delegate.connect(e,t)},a.prototype.write=function(e,t,r){return this._delegate.write(e,t,r)},a.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},a.prototype.close=function(){return this._delegate.close()},a.prototype._release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate._release()},a);function a(e,t){var r=s.call(this,t)||this;return t&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}r.default=o},{"./connection":36}],35:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e=e("neo4j-driver-core"),n=e.error.SERVICE_UNAVAILABLE,o=e.error.SESSION_EXPIRED,e=(i.create=function(e){return new i(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleAuthorizationExpired)},i.prototype.errorCode=function(){return this._errorCode},i.prototype.handleAndTransformError=function(e,t){return!(r=e)||"Neo.ClientError.Security.AuthorizationExpired"!==r.code&&"Neo.ClientError.Security.TokenExpired"!==r.code?function(e){if(e)return e.code===o||e.code===n||"Neo.TransientError.General.DatabaseUnavailable"===e.code;return!1}(e)?this._handleUnavailability(e,t):function(e){if(e)return"Neo.ClientError.Cluster.NotALeader"===e.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===e.code;return!1}(e)?this._handleWriteFailure(e,t):e:this._handleAuthorizationExpired(e,t);var r},i);function i(e,t,r,n){this._errorCode=e,this._handleUnavailability=t||s,this._handleWriteFailure=r||s,this._handleAuthorizationExpired=n||s}function s(e){return e}r.default=e},{"neo4j-driver-core":59}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(Object.defineProperty(o.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.isOpen=function(){throw new Error("not implemented")},o.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(o.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(e){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),o.prototype.connect=function(e,t){throw new Error("not implemented")},o.prototype.write=function(e,t,r){throw new Error("not implemented")},o.prototype.resetAndFlush=function(){throw new Error("not implemented")},o.prototype.close=function(){throw new Error("not implemented")},o.prototype.handleAndTransformError=function(e,t){return this._errorHandler?this._errorHandler.handleAndTransformError(e,t):e},o);function o(e){this._errorHandler=e}r.default=n},{}],37:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.createChannelConnection=r.ConnectionErrorHandler=r.DelegateConnection=r.ChannelConnection=r.Connection=void 0;var a=s(e("./connection"));r.Connection=a.default;var u=i(e("./connection-channel"));r.ChannelConnection=u.default,Object.defineProperty(r,"createChannelConnection",{enumerable:!0,get:function(){return u.createChannelConnection}});i=s(e("./connection-delegate"));r.DelegateConnection=i.default;e=s(e("./connection-error-handler"));r.ConnectionErrorHandler=e.default,r.default=a.default},{"./connection":36,"./connection-channel":33,"./connection-delegate":34,"./connection-error-handler":35}],38:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.pool=r.packstream=r.channel=r.buf=r.bolt=r.loadBalancing=void 0,r.loadBalancing=i(e("./load-balancing")),r.bolt=i(e("./bolt")),r.buf=i(e("./buf")),r.channel=i(e("./channel")),r.packstream=i(e("./packstream")),r.pool=i(e("./pool")),s(e("./connection-provider"),r)},{"./bolt":12,"./buf":18,"./channel":26,"./connection-provider":32,"./load-balancing":39,"./packstream":43,"./pool":47}],39:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.LeastConnectedLoadBalancingStrategy=r.LoadBalancingStrategy=void 0;var o=n(e("./load-balancing-strategy"));r.LoadBalancingStrategy=o.default;e=n(e("./least-connected-load-balancing-strategy"));r.LeastConnectedLoadBalancingStrategy=e.default,r.default=e.default},{"./least-connected-load-balancing-strategy":40,"./load-balancing-strategy":41}],40:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s,a=i(e("./round-robin-array-index")),e=i(e("./load-balancing-strategy")),o=(s=e.default,o(u,s),u.prototype.selectReader=function(e){return this._select(e,this._readersIndex)},u.prototype.selectWriter=function(e){return this._select(e,this._writersIndex)},u.prototype._select=function(e,t){var r=e.length;if(0===r)return null;var n=t.next(r),o=n,i=null,s=Number.MAX_SAFE_INTEGER;do{var a=e[o],u=this._connectionPool.activeResourceCount(a)}while(u<s&&(i=a,s=u),o===r-1?o=0:o++,o!==n);return i},u);function u(e){var t=s.call(this)||this;return t._readersIndex=new a.default,t._writersIndex=new a.default,t._connectionPool=e,t}r.default=o},{"./load-balancing-strategy":41,"./round-robin-array-index":42}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.selectReader=function(e){throw new Error("Abstract function")},o.prototype.selectWriter=function(e){throw new Error("Abstract function")},o);function o(){}r.default=n},{}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.next=function(e){if(0===e)return-1;var t=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),t%e},o);function o(e){this._offset=e||0}r.default=n},{}],43:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.v2=r.v1=void 0;var s=i(e("./packstream-v1"));r.v1=s;e=i(e("./packstream-v2"));r.v2=e,r.default=e},{"./packstream-v1":44,"./packstream-v2":45}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Structure=r.Unpacker=r.Packer=void 0;var o=e("../channel"),f=e("neo4j-driver-core"),n=f.error.PROTOCOL_ERROR,a=(i.prototype.toString=function(){for(var e="",t=0;t<this.fields.length;t++)0<t&&(e+=", "),e+=this.fields[t];return"Structure("+this.signature+", ["+e+"])"},i);function i(e,t){this.signature=e,this.fields=t}r.Structure=a;s.prototype.packable=function(i){var e,s=this;if(null===i)return function(){return s._ch.writeUInt8(192)};if(!0===i)return function(){return s._ch.writeUInt8(195)};if(!1===i)return function(){return s._ch.writeUInt8(194)};if("number"==typeof i)return function(){return s.packFloat(i)};if("string"==typeof i)return function(){return s.packString(i)};if("bigint"==typeof i)return function(){return s.packInteger((0,f.int)(i))};if((0,f.isInt)(i))return function(){return s.packInteger(i)};if(i instanceof Int8Array)return function(){return s.packBytes(i)};if(i instanceof Array)return function(){s.packListHeader(i.length);for(var e=0;e<i.length;e++)s.packable(void 0===i[e]?null:i[e])()};if(null!=(e=i)&&"function"==typeof e[Symbol.iterator])return this.packableIterable(i);if(i instanceof f.Node)return this._nonPackableValue("It is not allowed to pass nodes in query parameters, given: "+i);if(i instanceof f.Relationship)return this._nonPackableValue("It is not allowed to pass relationships in query parameters, given: "+i);if(i instanceof f.Path)return this._nonPackableValue("It is not allowed to pass paths in query parameters, given: "+i);if(i instanceof a){for(var t=[],r=0;r<i.fields.length;r++)t[r]=this.packable(i.fields[r]);return function(){return s.packStruct(i.signature,t)}}return"object"==typeof i?function(){for(var e=Object.keys(i),t=0,r=0;r<e.length;r++)void 0!==i[e[r]]&&t++;s.packMapHeader(t);for(var n=0;n<e.length;n++){var o=e[n];void 0!==i[o]&&(s.packString(o),s.packable(i[o])())}}:this._nonPackableValue("Unable to pack the given value: "+i)},s.prototype.packableIterable=function(t){try{var e=Array.from(t);return this.packable(e)}catch(e){throw(0,f.newError)("Cannot pack given iterable, "+e.message+": "+t)}},s.prototype.packStruct=function(e,t){this.packStructHeader((t=t||[]).length,e);for(var r=0;r<t.length;r++)t[r]()},s.prototype.packInteger=function(e){var t=e.high,r=e.low;e.greaterThanOrEqual(-16)&&e.lessThan(128)?this._ch.writeInt8(r):e.greaterThanOrEqual(-128)&&e.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(r)):e.greaterThanOrEqual(-32768)&&e.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(r)):(e.greaterThanOrEqual(-2147483648)&&e.lessThan(2147483648)?this._ch.writeUInt8(202):(this._ch.writeUInt8(203),this._ch.writeInt32(t)),this._ch.writeInt32(r))},s.prototype.packFloat=function(e){this._ch.writeUInt8(193),this._ch.writeFloat64(e)},s.prototype.packString=function(e){var t=o.utf8.encode(e),e=t.length;if(e<16)this._ch.writeUInt8(128|e),this._ch.writeBytes(t);else if(e<256)this._ch.writeUInt8(208),this._ch.writeUInt8(e),this._ch.writeBytes(t);else if(e<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256),this._ch.writeBytes(t);else{if(!(e<4294967296))throw(0,f.newError)("UTF-8 strings of size "+e+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256),this._ch.writeBytes(t)}},s.prototype.packListHeader=function(e){if(e<16)this._ch.writeUInt8(144|e);else if(e<256)this._ch.writeUInt8(212),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Lists of size "+e+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packBytes=function(e){if(!this._byteArraysSupported)throw(0,f.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(e.length);for(var t=0;t<e.length;t++)this._ch.writeInt8(e[t])},s.prototype.packBytesHeader=function(e){if(e<256)this._ch.writeUInt8(204),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Byte arrays of size "+e+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packMapHeader=function(e){if(e<16)this._ch.writeUInt8(160|e);else if(e<256)this._ch.writeUInt8(216),this._ch.writeUInt8(e);else if(e<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256);else{if(!(e<4294967296))throw(0,f.newError)("Maps of size "+e+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((e/16777216>>0)%256),this._ch.writeUInt8((e/65536>>0)%256),this._ch.writeUInt8((e/256>>0)%256),this._ch.writeUInt8(e%256)}},s.prototype.packStructHeader=function(e,t){if(e<16)this._ch.writeUInt8(176|e),this._ch.writeUInt8(t);else if(e<256)this._ch.writeUInt8(220),this._ch.writeUInt8(e),this._ch.writeUInt8(t);else{if(!(e<65536))throw(0,f.newError)("Structures of size "+e+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(e/256>>0),this._ch.writeUInt8(e%256)}},s.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},s.prototype._nonPackableValue=function(e){return function(){throw(0,f.newError)(e,n)}},e=s;function s(e){this._ch=e,this._byteArraysSupported=!0}r.Packer=e;u.prototype.unpack=function(e){var t=e.readUInt8(),r=240&t,n=15&t;if(192===t)return null;var o=this._unpackBoolean(t);if(null!==o)return o;o=this._unpackNumberOrInteger(t,e);if(null!==o){if((0,f.isInt)(o)){if(this._useBigInt)return o.toBigInt();if(this._disableLosslessIntegers)return o.toNumberOrInfinity()}return o}o=this._unpackString(t,r,n,e);if(null!==o)return o;o=this._unpackList(t,r,n,e);if(null!==o)return o;o=this._unpackByteArray(t,e);if(null!==o)return o;o=this._unpackMap(t,r,n,e);if(null!==o)return o;e=this._unpackStruct(t,r,n,e);if(null!==e)return e;throw(0,f.newError)("Unknown packed value with marker "+t.toString(16))},u.prototype.unpackInteger=function(e){var t=e.readUInt8(),e=this._unpackInteger(t,e);if(null==e)throw(0,f.newError)("Unable to unpack integer value with marker "+t.toString(16));return e},u.prototype._unpackBoolean=function(e){return 195===e||194!==e&&null},u.prototype._unpackNumberOrInteger=function(e,t){return 193===e?t.readFloat64():this._unpackInteger(e,t)},u.prototype._unpackInteger=function(e,t){if(0<=e&&e<128)return(0,f.int)(e);if(240<=e&&e<256)return(0,f.int)(e-256);if(200===e)return(0,f.int)(t.readInt8());if(201===e)return(0,f.int)(t.readInt16());if(202===e){var r=t.readInt32();return(0,f.int)(r)}if(203!==e)return null;e=t.readInt32(),t=t.readInt32();return new f.Integer(t,e)},u.prototype._unpackString=function(e,t,r,n){return 128===t?o.utf8.decode(n,r):208===e?o.utf8.decode(n,n.readUInt8()):209===e?o.utf8.decode(n,n.readUInt16()):210===e?o.utf8.decode(n,n.readUInt32()):null},u.prototype._unpackList=function(e,t,r,n){return 144===t?this._unpackListWithSize(r,n):212===e?this._unpackListWithSize(n.readUInt8(),n):213===e?this._unpackListWithSize(n.readUInt16(),n):214===e?this._unpackListWithSize(n.readUInt32(),n):null},u.prototype._unpackListWithSize=function(e,t){for(var r=[],n=0;n<e;n++)r.push(this.unpack(t));return r},u.prototype._unpackByteArray=function(e,t){return 204===e?this._unpackByteArrayWithSize(t.readUInt8(),t):205===e?this._unpackByteArrayWithSize(t.readUInt16(),t):206===e?this._unpackByteArrayWithSize(t.readUInt32(),t):null},u.prototype._unpackByteArrayWithSize=function(e,t){for(var r=new Int8Array(e),n=0;n<e;n++)r[n]=t.readInt8();return r},u.prototype._unpackMap=function(e,t,r,n){return 160===t?this._unpackMapWithSize(r,n):216===e?this._unpackMapWithSize(n.readUInt8(),n):217===e?this._unpackMapWithSize(n.readUInt16(),n):218===e?this._unpackMapWithSize(n.readUInt32(),n):null},u.prototype._unpackMapWithSize=function(e,t){for(var r={},n=0;n<e;n++)r[this.unpack(t)]=this.unpack(t);return r},u.prototype._unpackStruct=function(e,t,r,n){return 176===t?this._unpackStructWithSize(r,n):220===e?this._unpackStructWithSize(n.readUInt8(),n):221===e?this._unpackStructWithSize(n.readUInt16(),n):null},u.prototype._unpackStructWithSize=function(e,t){var r=t.readUInt8();return 78===r?this._unpackNode(e,t):82===r?this._unpackRelationship(e,t):114===r?this._unpackUnboundRelationship(e,t):80===r?this._unpackPath(e,t):this._unpackUnknownStruct(r,e,t)},u.prototype._unpackNode=function(e,t){return this._verifyStructSize("Node",3,e),new f.Node(this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackRelationship=function(e,t){return this._verifyStructSize("Relationship",5,e),new f.Relationship(this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackUnboundRelationship=function(e,t){return this._verifyStructSize("UnboundRelationship",3,e),new f.UnboundRelationship(this.unpack(t),this.unpack(t),this.unpack(t))},u.prototype._unpackPath=function(e,t){this._verifyStructSize("Path",3,e);for(var r=this.unpack(t),n=this.unpack(t),o=this.unpack(t),i=[],s=r[0],a=0;a<o.length;a+=2){var u=r[o[a+1]],c=(0,f.toNumber)(o[a]),l=void 0;0<c?(l=n[c-1])instanceof f.UnboundRelationship&&(n[c-1]=l=l.bind(s.identity,u.identity)):(l=n[-c-1])instanceof f.UnboundRelationship&&(n[-c-1]=l=l.bind(u.identity,s.identity)),i.push(new f.PathSegment(s,l,u)),s=u}return new f.Path(r[0],r[r.length-1],i)},u.prototype._unpackUnknownStruct=function(e,t,r){for(var n=new a(e,[]),o=0;o<t;o++)n.fields.push(this.unpack(r));return n},u.prototype._verifyStructSize=function(e,t,r){if(t!==r)throw(0,f.newError)("Wrong struct size for "+e+", expected "+t+" but was "+r,n)},e=u;function u(e,t){void 0===t&&(t=!1),this._disableLosslessIntegers=e=void 0===e?!1:e,this._useBigInt=t}r.Unpacker=e},{"../channel":26,"neo4j-driver-core":59}],45:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return s(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Unpacker=r.Packer=void 0;var u,a=a(e("./packstream-v1")),c=e("neo4j-driver-core"),l=e("./temporal-factory"),e=c.internal.temporalUtil,f=e.dateToEpochDay,h=e.localDateTimeToEpochSecond,p=e.localTimeToNanoOfDay,d=88,_=3,y=89,b=4,v=69,m=4,g=116,E=1,w=84,O=2,C=68,P=1,S=100,T=2,I=70,R=3,k=102,N=3,e=(u=a.Packer,o(j,u),j.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},j.prototype.packable=function(i){var s=this;return(0,c.isPoint)(i)?function(){var e,t;t=s,(null===(e=i).z||void 0===e.z?function(e,t){e=[t.packable((0,c.int)(e.srid)),t.packable(e.x),t.packable(e.y)];t.packStruct(d,e)}:function(e,t){e=[t.packable((0,c.int)(e.srid)),t.packable(e.x),t.packable(e.y),t.packable(e.z)];t.packStruct(y,e)})(e,t)}:(0,c.isDuration)(i)?function(){var e,t,r,n,o;e=i,t=s,r=(0,c.int)(e.months),n=(0,c.int)(e.days),o=(0,c.int)(e.seconds),e=(0,c.int)(e.nanoseconds),e=[t.packable(r),t.packable(n),t.packable(o),t.packable(e)],t.packStruct(v,e)}:(0,c.isLocalTime)(i)?function(){return function(e,t){e=p(e.hour,e.minute,e.second,e.nanosecond),e=[t.packable(e)];t.packStruct(g,e)}(i,s)}:(0,c.isTime)(i)?function(){var e,t,r;t=s,r=p((e=i).hour,e.minute,e.second,e.nanosecond),e=(0,c.int)(e.timeZoneOffsetSeconds),e=[t.packable(r),t.packable(e)],t.packStruct(w,e)}:(0,c.isDate)(i)?function(){return function(e,t){e=f(e.year,e.month,e.day),e=[t.packable(e)];t.packStruct(C,e)}(i,s)}:(0,c.isLocalDateTime)(i)?function(){var e,t,r;t=s,r=h((e=i).year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),e=(0,c.int)(e.nanosecond),e=[t.packable(r),t.packable(e)],t.packStruct(S,e)}:(0,c.isDateTime)(i)?function(){var e,t;t=s,((e=i).timeZoneId?function(e,t){var r=h(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=(0,c.int)(e.nanosecond),e=e.timeZoneId,e=[t.packable(r),t.packable(n),t.packable(e)];t.packStruct(k,e)}:function(e,t){var r=h(e.year,e.month,e.day,e.hour,e.minute,e.second,e.nanosecond),n=(0,c.int)(e.nanosecond),e=(0,c.int)(e.timeZoneOffsetSeconds),e=[t.packable(r),t.packable(n),t.packable(e)];t.packStruct(I,e)})(e,t)}:u.prototype.packable.call(this,i)},j);function j(){return null!==u&&u.apply(this,arguments)||this}r.Packer=e;var A,o=(A=a.Unpacker,o(D,A),D.prototype._unpackUnknownStruct=function(e,t,r){return e===d?(o=r,(n=this)._verifyStructSize("Point2D",_,t),new c.Point(n.unpack(o),n.unpack(o),n.unpack(o),void 0)):e===y?(n=r,(o=this)._verifyStructSize("Point3D",b,t),new c.Point(o.unpack(n),o.unpack(n),o.unpack(n),o.unpack(n))):e===v?function(e,t,r){e._verifyStructSize("Duration",m,t);var n=e.unpack(r),o=e.unpack(r),t=e.unpack(r),r=e.unpack(r);return new c.Duration(n,o,t,r)}(this,t,r):e===g?function(e,t,r,n){e._verifyStructSize("LocalTime",E,t);r=e.unpackInteger(r);return U((0,l.nanoOfDayToLocalTime)(r),n)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===w?function(e,t,r,n,o){e._verifyStructSize("Time",O,t);t=e.unpackInteger(r),r=e.unpackInteger(r),t=(0,l.nanoOfDayToLocalTime)(t);return U(new c.Time(t.hour,t.minute,t.second,t.nanosecond,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===C?function(e,t,r,n,o){e._verifyStructSize("Date",P,t);r=e.unpackInteger(r);return U((0,l.epochDayToDate)(r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===S?function(e,t,r,n,o){e._verifyStructSize("LocalDateTime",T,t);t=e.unpackInteger(r),r=e.unpackInteger(r);return U((0,l.epochSecondAndNanoToLocalDateTime)(t,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===I?function(e,t,r,n,o){e._verifyStructSize("DateTimeWithZoneOffset",R,t);var i=e.unpackInteger(r),t=e.unpackInteger(r),r=e.unpackInteger(r),t=(0,l.epochSecondAndNanoToLocalDateTime)(i,t);return U(new c.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,r,null),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):e===k?function(e,t,r,n,o){e._verifyStructSize("DateTimeWithZoneId",N,t);var i=e.unpackInteger(r),t=e.unpackInteger(r),r=e.unpack(r),t=(0,l.epochSecondAndNanoToLocalDateTime)(i,t);return U(new c.DateTime(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond,null,r),n,o)}(this,t,r,this._disableLosslessIntegers,this._useBigInt):A.prototype._unpackUnknownStruct.call(this,e,t,r,this._disableLosslessIntegers,this._useBigInt);var n,o},D);function D(e,t){return A.call(this,e=void 0===e?!1:e,t=void 0===t?!1:t)||this}function U(e,t,r){if(!t&&!r)return e;var n,o,i,s=Object.create(Object.getPrototypeOf(e));for(n in e)e.hasOwnProperty(n)&&(o=e[n],s[n]=(0,c.isInt)(o)?(i=o,r?i.toBigInt():i.toNumberOrInfinity()):o);return Object.freeze(s),s}r.Unpacker=o},{"./packstream-v1":44,"./temporal-factory":46,"neo4j-driver-core":59}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.epochSecondAndNanoToLocalDateTime=r.nanoOfDayToLocalTime=r.epochDayToDate=void 0;var o=e("neo4j-driver-core"),e=o.internal.temporalUtil,i=e.DAYS_0000_TO_1970,s=e.DAYS_PER_400_YEAR_CYCLE,a=e.NANOS_PER_HOUR,u=e.NANOS_PER_MINUTE,c=e.NANOS_PER_SECOND,n=e.SECONDS_PER_DAY,l=e.floorDiv,f=e.floorMod;function h(e){var t=(e=(0,o.int)(e)).add(i).subtract(60),r=(0,o.int)(0);t.lessThan(0)&&(r=(n=t.add(1).div(s).subtract(1)).multiply(400),t=t.add(n.multiply(-s)));var e=t.multiply(400).add(591).div(s),n=t.subtract(e.multiply(365).add(e.div(4)).subtract(e.div(100)).add(e.div(400)));n.lessThan(0)&&(e=e.subtract(1),n=t.subtract(e.multiply(365).add(e.div(4)).subtract(e.div(100)).add(e.div(400))));e=e.add(r),t=n,r=t.multiply(5).add(2).div(153),n=r.add(2).modulo(12).add(1),t=t.subtract(r.multiply(306).add(5).div(10)).add(1);return e=e.add(r.div(10)),new o.Date(e,n,t)}function p(e){var t=(e=(0,o.int)(e)).div(a),r=(e=e.subtract(t.multiply(a))).div(u),n=(e=e.subtract(r.multiply(u))).div(c),e=e.subtract(n.multiply(c));return new o.LocalTime(t,r,n,e)}r.epochDayToDate=h,r.nanoOfDayToLocalTime=p,r.epochSecondAndNanoToLocalDateTime=function(e,t){var r=l(e,n),t=f(e,n).multiply(c).add(t),r=h(r),t=p(t);return new o.LocalDateTime(r.year,r.month,r.day,t.hour,t.minute,t.second,t.nanosecond)}},{"neo4j-driver-core":59}],47:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_MAX_SIZE=r.DEFAULT_ACQUISITION_TIMEOUT=r.PoolConfig=r.Pool=void 0;var a=i(e("./pool-config"));r.PoolConfig=a.default,Object.defineProperty(r,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return a.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(r,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return a.DEFAULT_MAX_SIZE}});e=s(e("./pool"));r.Pool=e.default,r.default=e.default},{"./pool":49,"./pool-config":48}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_ACQUISITION_TIMEOUT=r.DEFAULT_MAX_SIZE=void 0;r.DEFAULT_MAX_SIZE=100;r.DEFAULT_ACQUISITION_TIMEOUT=6e4;var n=(o.defaultConfig=function(){return new o(100,6e4)},o.fromDriverConfig=function(e){return new o(s(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:100,s(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:6e4)},o);function o(e,t){this.maxSize=i(e,100),this.acquisitionTimeout=i(t,6e4)}function i(e,t){return 0===e||e?e:t}function s(e){return 0===e||e}r.default=n},{}],49:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},l=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var a=o(e("./pool-config")),u=e("neo4j-driver-core"),c=u.internal.logger.Logger,e=(i.prototype.acquire=function(s){var a=this;return this._acquire(s).then(function(e){var o=s.asKey();if(e)return e;var i=a._acquireRequests;return i[o]||(i[o]=[]),new Promise(function(e,t){var r=setTimeout(function(){var e,t=i[o];t&&(i[o]=t.filter(function(e){return e!==n})),n.isCompleted()||(e=a.activeResourceCount(s),t=a.has(s)?a._pools[o].length:0,n.reject((0,u.newError)("Connection acquisition timed out in "+a._acquisitionTimeout+" ms. Pool status: Active conn count = "+e+", Idle conn count = "+t+".")))},a._acquisitionTimeout),n=new h(o,e,t,r,a._log);i[o].push(n)})})},i.prototype.purge=function(e){return this._purgeKey(e.asKey())},i.prototype.close=function(){return n(this,void 0,void 0,function(){var t=this;return l(this,function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map(function(e){return t._purgeKey(e)}))];case 1:return[2,e.sent()]}})})},i.prototype.keepAll=function(e){var t=this,r=e.map(function(e){return e.asKey()}),e=Object.keys(this._pools).filter(function(e){return-1===r.indexOf(e)});return Promise.all(e.map(function(e){return t._purgeKey(e)}))},i.prototype.has=function(e){return e.asKey()in this._pools},i.prototype.activeResourceCount=function(e){return this._activeResourceCounts[e.asKey()]||0},i.prototype._acquire=function(a){return n(this,void 0,void 0,function(){var t,r,n,o,i,s=this;return l(this,function(e){switch(e.label){case 0:if(this._closed)throw(0,u.newError)("Pool is closed, it is no more able to serve requests.");t=a.asKey(),r=this._pools[t],n=this._poolState[t],r||(r=[],n=new p,this._pools[t]=r,this._pendingCreates[t]=0,this._poolState[t]=n),e.label=1;case 1:return r.length?(o=r.pop(),this._validate(o)?(this._removeIdleObserver&&this._removeIdleObserver(o),f(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(o+" acquired from the pool "+t),[2,o]):[3,2]):[3,5];case 2:return[4,this._destroy(o)];case 3:e.sent(),e.label=4;case 4:return[3,1];case 5:if(0<this._maxSize&&this.activeResourceCount(a)+this._pendingCreates[t]>=this._maxSize)return[2,null];this._pendingCreates[t]=this._pendingCreates[t]+1,e.label=6;case 6:return e.trys.push([6,,8,9]),[4,this._create(a,function(e,t){return s._release(n,e,t)})];case 7:return i=e.sent(),f(t,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug(i+" created for the pool "+t),[3,9];case 8:return this._pendingCreates[t]=this._pendingCreates[t]-1,[7];case 9:return[2,i]}})})},i.prototype._release=function(a,u,c){return n(this,void 0,void 0,function(){var o,i,s=this;return l(this,function(e){switch(e.label){case 0:return(o=u.asKey(),(i=this._pools[o])&&a&&a.isActive())?this._validate(c)?[3,2]:(this._log.isDebugEnabled()&&this._log.debug(c+" destroyed and can't be released to the pool "+o+" because it is not functional"),[4,this._destroy(c)]):[3,4];case 1:return e.sent(),[3,3];case 2:this._installIdleObserver&&this._installIdleObserver(c,{onError:function(e){s._log.debug("Idle connection "+c+" destroyed because of error: "+e);e=s._pools[o];e&&(s._pools[o]=e.filter(function(e){return e!==c})),s._destroy(c).catch(function(){})}}),i.push(c),this._log.isDebugEnabled()&&this._log.debug(c+" released to the pool "+o),e.label=3;case 3:return[3,6];case 4:return this._log.isDebugEnabled()&&this._log.debug(c+" destroyed and can't be released to the pool "+o+" because pool has been purged"),[4,this._destroy(c)];case 5:e.sent(),e.label=6;case 6:return t=o,r=this._activeResourceCounts,0<(n=(r[t]||0)-1)?r[t]=n:delete r[t],this._processPendingAcquireRequests(u),[2]}var t,r,n})})},i.prototype._purgeKey=function(o){return n(this,void 0,void 0,function(){var t,r,n;return l(this,function(e){switch(e.label){case 0:t=this._pools[o]||[],r=this._poolState[o]||new p,e.label=1;case 1:return t.length?(n=t.pop(),this._removeIdleObserver&&this._removeIdleObserver(n),[4,this._destroy(n)]):[3,3];case 2:return e.sent(),[3,1];case 3:return r.close(),delete this._pools[o],delete this._poolState[o],[2]}})})},i.prototype._processPendingAcquireRequests=function(t){var r,n=this,e=t.asKey(),o=this._acquireRequests[e],i=this._poolState[e];o&&((r=o.shift())?this._acquire(t).catch(function(e){return r.reject(e),null}).then(function(e){e&&(r.isCompleted()?n._release(i,t,e):r.resolve(e))}):delete this._acquireRequests[e])},i);function i(e){var t=void 0===e?{}:e,r=t.create,n=void 0===r?function(e,t){return Promise.resolve()}:r,o=t.destroy,i=void 0===o?function(e){return Promise.resolve()}:o,s=t.validate,e=void 0===s?function(e){return!0}:s,r=t.installIdleObserver,o=void 0===r?function(e,t){}:r,s=t.removeIdleObserver,r=void 0===s?function(e){}:s,s=t.config,s=void 0===s?a.default.defaultConfig():s,t=t.log,t=void 0===t?c.noOp():t;this._create=n,this._destroy=i,this._validate=e,this._installIdleObserver=o,this._removeIdleObserver=r,this._maxSize=s.maxSize,this._acquisitionTimeout=s.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._poolState={},this._release=this._release.bind(this),this._log=t,this._closed=!1}function f(e,t){var r=t[e]||0;t[e]=r+1}var h=(s.prototype.isCompleted=function(){return this._completed},s.prototype.resolve=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug(e+" acquired from the pool "+this._key),this._resolve(e))},s.prototype.reject=function(e){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(e))},s);function s(e,t,r,n,o){this._key=e,this._resolve=t,this._reject=r,this._timeoutId=n,this._log=o,this._completed=!1}var p=(d.prototype.isActive=function(){return this._active},d.prototype.close=function(){this._active=!1},d);function d(){this._active=!0}r.default=e},{"./pool-config":48,"neo4j-driver-core":59}],50:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.RoutingTable=r.Rediscovery=void 0;var o=n(e("./rediscovery"));r.Rediscovery=o.default;e=n(e("./routing-table"));r.RoutingTable=e.default,r.default=o.default},{"./rediscovery":51,"./routing-table":52}],51:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=n(e("./routing-table")),u=e("../bolt"),c=e("neo4j-driver-core"),l=c.error.SERVICE_UNAVAILABLE,e=(o.prototype.lookupRoutingTableOnRouter=function(t,r,n,o){var i=this;return t._acquireConnection(function(e){return i._requestRawRoutingTable(e,t,r,n,o).then(function(e){return e.isNull?null:s.default.fromRawRoutingTable(r,n,e)})})},o.prototype._requestRawRoutingTable=function(e,n,o,i,s){var a=this;return new Promise(function(t,r){e.protocol().requestRoutingInformation({routingContext:a._routingContext,databaseName:o,impersonatedUser:s,sessionContext:{bookmark:n._lastBookmark,mode:n._mode,database:n._database,afterComplete:n._onComplete},onCompleted:t,onError:function(e){"Neo.ClientError.Database.DatabaseNotFound"===e.code?r(e):"Neo.ClientError.Procedure.ProcedureNotFound"===e.code?r((0,c.newError)("Server at "+i.asHostPort()+" can't perform routing. Make sure you are connecting to a causal cluster",l)):t(u.RawRoutingTable.ofNull())}})})},o);function o(e){this._routingContext=e}r.default=e},{"../bolt":12,"./routing-table":52,"neo4j-driver-core":59}],52:[function(e,t,r){"use strict";var n=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},o=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||((n=n||Array.prototype.slice.call(t,0,o))[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(r,"__esModule",{value:!0}),r.createValidRoutingTable=void 0;var u=e("neo4j-driver-core"),e=u.internal.constants,i=e.ACCESS_MODE_WRITE,s=e.ACCESS_MODE_READ,c=u.internal.serverAddress.ServerAddress,l=u.error.PROTOCOL_ERROR,f=(a.fromRawRoutingTable=p,a.prototype.forget=function(e){this.readers=h(this.readers,e),this.writers=h(this.writers,e)},a.prototype.forgetRouter=function(e){this.routers=h(this.routers,e)},a.prototype.forgetWriter=function(e){this.writers=h(this.writers,e)},a.prototype.isStaleFor=function(e){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||e===s&&0===this.readers.length||e===i&&0===this.writers.length},a.prototype.isExpiredFor=function(e){return this.expirationTime.add(e).lessThan(Date.now())},a.prototype.allServers=function(){return o(o(o([],n(this.routers),!1),n(this.readers),!1),n(this.writers),!1)},a.prototype.toString=function(){return"RoutingTable[database="+this.databaseName+", expirationTime="+this.expirationTime+", currentTime="+Date.now()+", routers=["+this.routers+"], readers=["+this.readers+"], writers=["+this.writers+"]]"},a);function a(e){var t=void 0===e?{}:e,r=t.database,n=t.routers,o=t.readers,i=t.writers,e=t.expirationTime,t=t.ttl;this.database=r||null,this.databaseName=r||"default database",this.routers=n||[],this.readers=o||[],this.writers=i||[],this.expirationTime=e||(0,u.int)(0),this.ttl=t}function h(e,t){return e.filter(function(e){return e.asKey()!==t.asKey()})}function p(e,t,r){var n=r.ttl,o=function(t,r){try{var e=(0,u.int)(Date.now()),n=(0,u.int)(t.ttl).multiply(1e3).add(e);return n.lessThan(e)?u.Integer.MAX_VALUE:n}catch(e){throw(0,u.newError)("Unable to parse TTL entry from router "+r+" from raw routing table:\n"+u.json.stringify(t)+"\nError message: "+e.message,l)}}(r,t),i=function(t,r){try{var n=[],o=[],i=[];return t.servers.forEach(function(e){var t=e.role,e=e.addresses;"ROUTE"===t?n=_(e).map(function(e){return c.fromUrl(e)}):"WRITE"===t?i=_(e).map(function(e){return c.fromUrl(e)}):"READ"===t&&(o=_(e).map(function(e){return c.fromUrl(e)}))}),{routers:n,readers:o,writers:i}}catch(e){throw(0,u.newError)("Unable to parse servers entry from router "+r+" from addresses:\n"+u.json.stringify(t.servers)+"\nError message: "+e.message,l)}}(r,t),s=i.routers,a=i.readers,i=i.writers;return d(s,"routers",t),d(a,"readers",t),new f({database:e||r.db,routers:s,readers:a,writers:i,expirationTime:o,ttl:n})}function d(e,t,r){if(0===e.length)throw(0,u.newError)("Received no "+t+" from router "+r,l)}function _(e){if(!Array.isArray(e))throw new TypeError("Array expected but got: "+e);return Array.from(e)}r.default=f,r.createValidRoutingTable=p},{"neo4j-driver-core":59}],53:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});r.default={basic:function(e,t,r){return r?{scheme:"basic",principal:e,credentials:t,realm:r}:{scheme:"basic",principal:e,credentials:t}},kerberos:function(e){return{scheme:"kerberos",principal:"",credentials:e}},bearer:function(e){return{scheme:"bearer",credentials:e}},custom:function(e,t,r,n,o){return o?{scheme:n,principal:e,credentials:t,realm:r,parameters:o}:{scheme:n,principal:e,credentials:t,realm:r}}}},{}],54:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.acquireConnection=function(e){throw Error("Not implemented")},o.prototype.supportsMultiDb=function(){throw Error("Not implemented")},o.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},o.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o);function o(){}r.default=n},{}],55:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.isOpen=function(){return!1},o.prototype.protocol=function(){throw Error("Not implemented")},o.prototype.connect=function(e,t){throw Error("Not implemented")},o.prototype.write=function(e,t,r){throw Error("Not implemented")},o.prototype.resetAndFlush=function(){throw Error("Not implemented")},o.prototype.close=function(){throw Error("Not implemented")},o.prototype._release=function(){return Promise.resolve()},o);function o(){this.id="",this.databaseId=""}r.default=n},{}],56:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.WRITE=r.READ=r.Driver=void 0;var a=e("./internal/bookmark"),o=e("./internal/connectivity-verifier"),i=n(e("./internal/resolver/configured-custom-resolver")),s=e("./internal/constants"),u=e("./internal/logger"),c=n(e("./session")),l=e("./internal/util"),f=36e5,h=1e3,e=s.ACCESS_MODE_READ;r.READ=e;var p=s.ACCESS_MODE_WRITE;r.WRITE=p;var d=0,e=(_.prototype.verifyConnectivity=function(e){var t=(void 0===e?{}:e).database,e=void 0===t?"":t,t=this._getOrCreateConnectionProvider();return new o.ConnectivityVerifier(t).verify({database:e})},_.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},_.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},_.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},_.prototype._supportsRouting=function(){return this._meta.routing},_.prototype._isEncrypted=function(){return this._config.encrypted===l.ENCRYPTION_ON},_.prototype._getTrust=function(){return this._config.trust},_.prototype.session=function(e){var t=void 0===e?{}:e,r=t.defaultAccessMode,n=t.bookmarks,o=t.database,e=t.impersonatedUser,t=t.fetchSize;return this._newSession({defaultAccessMode:void 0===r?p:r,bookmarkOrBookmarks:n,database:void 0===o?"":o,reactive:!1,impersonatedUser:e,fetchSize:b(t,this._config.fetchSize)})},_.prototype.close=function(){return this._log.info("Driver "+this._id+" closing"),this._connectionProvider?this._connectionProvider.close():Promise.resolve()},_.prototype._afterConstruction=function(){this._log.info(this._meta.typename+" driver "+this._id+" created for server address "+this._meta.address)},_.prototype._newSession=function(e){var t=e.defaultAccessMode,r=e.bookmarkOrBookmarks,n=e.database,o=e.reactive,i=e.impersonatedUser,s=e.fetchSize,e=c.default._validateSessionMode(t),t=this._getOrCreateConnectionProvider(),r=r?new a.Bookmark(r):a.Bookmark.empty();return this._createSession({mode:e,database:n||"",connectionProvider:t,bookmark:r,config:this._config,reactive:o,impersonatedUser:i,fetchSize:s})},_.prototype._getOrCreateConnectionProvider=function(){var e;return this._connectionProvider||(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(e=this._config,new i.default(e.resolver)))),this._connectionProvider},_);function _(e,t,r,n){var o;void 0===n&&(n=function(e){return new c.default(e)}),(o=t=void 0===t?{}:t).maxConnectionLifetime=y(o.maxConnectionLifetime,f),o.maxConnectionPoolSize=y(o.maxConnectionPoolSize,s.DEFAULT_POOL_MAX_SIZE),o.connectionAcquisitionTimeout=y(o.connectionAcquisitionTimeout,s.DEFAULT_POOL_ACQUISITION_TIMEOUT),o.fetchSize=b(o.fetchSize,h),function(e){var t=e.resolver;if(t&&"function"!=typeof t)throw new TypeError("Configured resolver should be a function. Got: "+t)}(t),this._id=d++,this._meta=e,this._config=t,this._log=u.Logger.create(t),this._createConnectionProvider=r,this._createSession=n,this._connectionProvider=null,this._afterConstruction()}function y(e,t){e=parseInt(e,10);return 0<e||0===e?e:e<0?Number.MAX_SAFE_INTEGER:t}function b(e,t){e=parseInt(e,10);if(0<e||e===s.FETCH_ALL)return e;if(0===e||e<0)throw new Error("The fetch size can only be a positive value or "+s.FETCH_ALL+" for ALL. However fetchSize = "+e);return t}r.Driver=e,r.default=e},{"./internal/bookmark":61,"./internal/connectivity-verifier":63,"./internal/constants":64,"./internal/logger":66,"./internal/resolver/configured-custom-resolver":69,"./internal/util":77,"./session":82}],57:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.PROTOCOL_ERROR=r.SESSION_EXPIRED=r.SERVICE_UNAVAILABLE=r.Neo4jError=r.newError=void 0;r.SERVICE_UNAVAILABLE="ServiceUnavailable";r.SESSION_EXPIRED="SessionExpired";r.PROTOCOL_ERROR="ProtocolError";var i,s="N/A",a=(i=Error,o(u,i),u);function u(e,t){e=i.call(this,e)||this;return e.constructor=u,e.__proto__=u.prototype,e.code=t,e.name="Neo4jError",e}r.Neo4jError=a,r.newError=function(e,t){return new a(e,null!=t?t:s)}},{}],58:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=void 0;var n=e("./json"),o={value:!0,enumerable:!1,configurable:!1,writable:!1},i="__isNode__",s="__isRelationship__",a="__isUnboundRelationship__",u="__isPath__",c="__isPathSegment__";function l(e,t){return!0===(e&&e[t])}f.prototype.toString=function(){for(var e="("+this.identity,t=0;t<this.labels.length;t++)e+=":"+this.labels[t];var r=Object.keys(this.properties);if(0<r.length){e+=" {";for(t=0;t<r.length;t++)0<t&&(e+=","),e+=r[t]+":"+(0,n.stringify)(this.properties[r[t]]);e+="}"}return e+=")"},e=f;function f(e,t,r){this.identity=e,this.labels=t,this.properties=r}r.Node=e,Object.defineProperty(e.prototype,i,o),r.isNode=function(e){return l(e,i)};var h=(p.prototype.toString=function(){var e="("+this.start+")-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+="]->("+this.end+")"},p);function p(e,t,r,n,o){this.identity=e,this.start=t,this.end=r,this.type=n,this.properties=o}r.Relationship=h,Object.defineProperty(h.prototype,s,o),r.isRelationship=function(e){return l(e,s)};d.prototype.bind=function(e,t){return new h(this.identity,e,t,this.type,this.properties)},d.prototype.toString=function(){var e="-[:"+this.type,t=Object.keys(this.properties);if(0<t.length){e+=" {";for(var r=0;r<t.length;r++)0<r&&(e+=","),e+=t[r]+":"+(0,n.stringify)(this.properties[t[r]]);e+="}"}return e+="]->"},e=d;function d(e,t,r){this.identity=e,this.type=t,this.properties=r}r.UnboundRelationship=e,Object.defineProperty(e.prototype,a,o),r.isUnboundRelationship=function(e){return l(e,a)};e=function(e,t,r){this.start=e,this.relationship=t,this.end=r};r.PathSegment=e,Object.defineProperty(e.prototype,c,o),r.isPathSegment=function(e){return l(e,c)};e=function(e,t,r){this.start=e,this.end=t,this.segments=r,this.length=r.length};r.Path=e,Object.defineProperty(e.prototype,u,o),r.isPath=function(e){return l(e,u)}},{"./json":78}],59:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.types=r.Driver=r.Session=r.Transaction=r.Connection=r.ConnectionProvider=r.Result=r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=r.ResultSummary=r.Record=r.isPathSegment=r.PathSegment=r.isPath=r.Path=r.isUnboundRelationship=r.UnboundRelationship=r.isRelationship=r.Relationship=r.isNode=r.Node=r.Time=r.LocalTime=r.LocalDateTime=r.isTime=r.isLocalTime=r.isLocalDateTime=r.isDuration=r.isDateTime=r.isDate=r.Duration=r.DateTime=r.Date=r.Point=r.isPoint=r.internal=r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=r.Integer=r.error=r.Neo4jError=r.newError=void 0,r.auth=r.json=r.driver=void 0;var a=e("./error");Object.defineProperty(r,"newError",{enumerable:!0,get:function(){return a.newError}}),Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}});var u=i(e("./integer"));r.Integer=u.default,Object.defineProperty(r,"int",{enumerable:!0,get:function(){return u.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return u.isInt}}),Object.defineProperty(r,"inSafeRange",{enumerable:!0,get:function(){return u.inSafeRange}}),Object.defineProperty(r,"toNumber",{enumerable:!0,get:function(){return u.toNumber}}),Object.defineProperty(r,"toString",{enumerable:!0,get:function(){return u.toString}});var c=e("./temporal-types");Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return c.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return c.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return c.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return c.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return c.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return c.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return c.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return c.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return c.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return c.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return c.Time}});var l=e("./graph-types");Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(r,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(r,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(r,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(r,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(r,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}});var f=s(e("./record"));r.Record=f.default;var h=e("./spatial-types");Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return h.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return h.Point}});var p=i(e("./result-summary"));r.ResultSummary=p.default,Object.defineProperty(r,"queryType",{enumerable:!0,get:function(){return p.queryType}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return p.ServerInfo}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return p.Notification}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return p.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return p.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return p.QueryStatistics}}),Object.defineProperty(r,"Stats",{enumerable:!0,get:function(){return p.Stats}});var d=s(e("./result"));r.Result=d.default;var _=s(e("./connection-provider"));r.ConnectionProvider=_.default;var y=s(e("./connection"));r.Connection=y.default;var b=s(e("./transaction"));r.Transaction=b.default;var v=s(e("./session"));r.Session=v.default;var m=i(e("./driver")),g=m;r.Driver=m.default,r.driver=g;var E=s(e("./auth"));r.auth=E.default;_=i(e("./types"));r.types=_;s=i(e("./json"));r.json=s;i=i(e("./internal"));r.internal=i;e={SERVICE_UNAVAILABLE:a.SERVICE_UNAVAILABLE,SESSION_EXPIRED:a.SESSION_EXPIRED,PROTOCOL_ERROR:a.PROTOCOL_ERROR};r.error=e;E={newError:a.newError,Neo4jError:a.Neo4jError,error:e,Integer:u.default,int:u.int,isInt:u.isInt,inSafeRange:u.inSafeRange,toNumber:u.toNumber,toString:u.toString,internal:i,isPoint:h.isPoint,Point:h.Point,Date:c.Date,DateTime:c.DateTime,Duration:c.Duration,isDate:c.isDate,isDateTime:c.isDateTime,isDuration:c.isDuration,isLocalDateTime:c.isLocalDateTime,isLocalTime:c.isLocalTime,isTime:c.isTime,LocalDateTime:c.LocalDateTime,LocalTime:c.LocalTime,Time:c.Time,Node:l.Node,isNode:l.isNode,Relationship:l.Relationship,isRelationship:l.isRelationship,UnboundRelationship:l.UnboundRelationship,isUnboundRelationship:l.isUnboundRelationship,Path:l.Path,isPath:l.isPath,PathSegment:l.PathSegment,isPathSegment:l.isPathSegment,Record:f.default,ResultSummary:p.default,queryType:p.queryType,ServerInfo:p.ServerInfo,Notification:p.Notification,Plan:p.Plan,ProfiledPlan:p.ProfiledPlan,QueryStatistics:p.QueryStatistics,Stats:p.Stats,Result:d.default,Transaction:b.default,Session:v.default,Driver:m.default,Connection:y.default,types:_,driver:g,json:s,auth:E.default};r.default=E},{"./auth":53,"./connection":55,"./connection-provider":54,"./driver":56,"./error":57,"./graph-types":58,"./integer":60,"./internal":65,"./json":78,"./record":79,"./result":81,"./result-summary":80,"./session":82,"./spatial-types":83,"./temporal-types":84,"./transaction":85,"./types":86}],60:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.toString=r.toNumber=r.inSafeRange=r.isInt=r.int=void 0;var c=e("./error"),n=new Map,o=(h.prototype.inSafeRange=function(){return this.greaterThanOrEqual(h.MIN_SAFE_VALUE)&&this.lessThanOrEqual(h.MAX_SAFE_VALUE)},h.prototype.toInt=function(){return this.low},h.prototype.toNumber=function(){return this.high*i+(this.low>>>0)},h.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(i)+BigInt(this.low>>>0);var e=this.negate();return BigInt(-1)*(BigInt(e.high>>>0)*BigInt(i)+BigInt(e.low>>>0))},h.prototype.toNumberOrInfinity=function(){return this.lessThan(h.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(h.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},h.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix out of range: "+e);if(this.isZero())return"0";if(this.isNegative()){if(this.equals(h.MIN_VALUE)){var t=h.fromNumber(e),r=this.div(t),n=r.multiply(t).subtract(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=h.fromNumber(Math.pow(e,6));n=this;for(var i="";;){var s=n.div(o),a=(n.subtract(s.multiply(o)).toInt()>>>0).toString(e);if((n=s).isZero())return a+i;for(;a.length<6;)a="0"+a;i=""+a+i}},h.prototype.getHighBits=function(){return this.high},h.prototype.getLowBits=function(){return this.low},h.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(h.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var e=0!==this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!==this.high?t+33:t+1},h.prototype.isZero=function(){return 0===this.high&&0===this.low},h.prototype.isNegative=function(){return this.high<0},h.prototype.isPositive=function(){return 0<=this.high},h.prototype.isOdd=function(){return 1==(1&this.low)},h.prototype.isEven=function(){return 0==(1&this.low)},h.prototype.equals=function(e){e=h.fromValue(e);return this.high===e.high&&this.low===e.low},h.prototype.notEquals=function(e){return!this.equals(e)},h.prototype.lessThan=function(e){return this.compare(e)<0},h.prototype.lessThanOrEqual=function(e){return this.compare(e)<=0},h.prototype.greaterThan=function(e){return 0<this.compare(e)},h.prototype.greaterThanOrEqual=function(e){return 0<=this.compare(e)},h.prototype.compare=function(e){var t=h.fromValue(e);if(this.equals(t))return 0;var r=this.isNegative(),e=t.isNegative();return r&&!e||(r||!e)&&this.subtract(t).isNegative()?-1:1},h.prototype.negate=function(){return this.equals(h.MIN_VALUE)?h.MIN_VALUE:this.not().add(h.ONE)},h.prototype.add=function(e){var t=h.fromValue(e),r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=0,l=0,f=0,e=0;return f+=(e+=i+(65535&t.low))>>>16,l+=(f+=o+u)>>>16,c+=(l+=n+a)>>>16,c+=r+s,h.fromBits((f&=65535)<<16|(e&=65535),(c&=65535)<<16|(l&=65535))},h.prototype.subtract=function(e){e=h.fromValue(e);return this.add(e.negate())},h.prototype.multiply=function(e){if(this.isZero())return h.ZERO;var t=h.fromValue(e);if(t.isZero())return h.ZERO;if(this.equals(h.MIN_VALUE))return t.isOdd()?h.MIN_VALUE:h.ZERO;if(t.equals(h.MIN_VALUE))return this.isOdd()?h.MIN_VALUE:h.ZERO;if(this.isNegative())return t.isNegative()?this.negate().multiply(t.negate()):this.negate().multiply(t).negate();if(t.isNegative())return this.multiply(t.negate()).negate();if(this.lessThan(p)&&t.lessThan(p))return h.fromNumber(this.toNumber()*t.toNumber());var r=this.high>>>16,n=65535&this.high,o=this.low>>>16,i=65535&this.low,s=t.high>>>16,a=65535&t.high,u=t.low>>>16,c=65535&t.low,l=0,f=0,e=0,t=0;return e+=(t+=i*c)>>>16,f+=(e+=o*c)>>>16,e&=65535,f+=(e+=i*u)>>>16,l+=(f+=n*c)>>>16,f&=65535,l+=(f+=o*u)>>>16,f&=65535,l+=(f+=i*a)>>>16,l+=r*c+n*u+o*a+i*s,h.fromBits((e&=65535)<<16|(t&=65535),(l&=65535)<<16|(f&=65535))},h.prototype.div=function(e){var t,r,n,o=h.fromValue(e);if(o.isZero())throw(0,c.newError)("division by zero");if(this.isZero())return h.ZERO;{if(this.equals(h.MIN_VALUE))return o.equals(h.ONE)||o.equals(h.NEG_ONE)?h.MIN_VALUE:o.equals(h.MIN_VALUE)?h.ONE:(n=this.shiftRight(1).div(o).shiftLeft(1)).equals(h.ZERO)?o.isNegative()?h.ONE:h.NEG_ONE:(t=this.subtract(o.multiply(n)),r=n.add(t.div(o)));if(o.equals(h.MIN_VALUE))return h.ZERO}if(this.isNegative())return o.isNegative()?this.negate().div(o.negate()):this.negate().div(o).negate();if(o.isNegative())return this.div(o.negate()).negate();for(r=h.ZERO,t=this;t.greaterThanOrEqual(o);){n=Math.max(1,Math.floor(t.toNumber()/o.toNumber()));for(var i=Math.ceil(Math.log(n)/Math.LN2),s=i<=48?1:Math.pow(2,i-48),a=h.fromNumber(n),u=a.multiply(o);u.isNegative()||u.greaterThan(t);)u=(a=h.fromNumber(n-=s)).multiply(o);a.isZero()&&(a=h.ONE),r=r.add(a),t=t.subtract(u)}return r},h.prototype.modulo=function(e){e=h.fromValue(e);return this.subtract(this.div(e).multiply(e))},h.prototype.not=function(){return h.fromBits(~this.low,~this.high)},h.prototype.and=function(e){e=h.fromValue(e);return h.fromBits(this.low&e.low,this.high&e.high)},h.prototype.or=function(e){e=h.fromValue(e);return h.fromBits(this.low|e.low,this.high|e.high)},h.prototype.xor=function(e){e=h.fromValue(e);return h.fromBits(this.low^e.low,this.high^e.high)},h.prototype.shiftLeft=function(e){e=h.toNumber(e);return 0==(e&=63)?h.ZERO:e<32?h.fromBits(this.low<<e,this.high<<e|this.low>>>32-e):h.fromBits(0,this.low<<e-32)},h.prototype.shiftRight=function(e){var t=h.toNumber(e);return 0==(t&=63)?h.ZERO:e<32?h.fromBits(this.low>>>t|this.high<<32-t,this.high>>t):h.fromBits(this.high>>t-32,0<=this.high?0:-1)},h.isInteger=function(e){return!0===(e&&e.__isInteger__)},h.fromInt=function(e){var t;return-128<=(e|=0)&&e<128&&(t=n.get(e))||(t=new h(e,e<0?-1:0),-128<=e&&e<128&&n.set(e,t)),t},h.fromBits=function(e,t){return new h(e,t)},h.fromNumber=function(e){return isNaN(e)||!isFinite(e)?h.ZERO:e<=-s?h.MIN_VALUE:s<=e+1?h.MAX_VALUE:e<0?h.fromNumber(-e).negate():new h(e%i|0,e/i|0)},h.fromString=function(e,t){if(0===e.length)throw(0,c.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return h.ZERO;if((t=t||10)<2||36<t)throw(0,c.newError)("radix out of range: "+t);var r;if(0<(r=e.indexOf("-")))throw(0,c.newError)('number format error: interior "-" character: '+e);if(0===r)return h.fromString(e.substring(1),t).negate();for(var n=h.fromNumber(Math.pow(t,8)),o=h.ZERO,i=0;i<e.length;i+=8){var s=Math.min(8,e.length-i),a=parseInt(e.substring(i,i+s),t);o=s<8?(s=h.fromNumber(Math.pow(t,s)),o.multiply(s).add(h.fromNumber(a))):(o=o.multiply(n)).add(h.fromNumber(a))}return o},h.fromValue=function(e){return e instanceof h?e:"number"==typeof e?h.fromNumber(e):"string"==typeof e?h.fromString(e):"bigint"==typeof e?h.fromString(e.toString()):new h(e.low,e.high)},h.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return h.fromValue(e).toNumber()}},h.toString=function(e,t){return h.fromValue(e).toString(t)},h.inSafeRange=function(e){return h.fromValue(e).inSafeRange()},h.ZERO=h.fromInt(0),h.ONE=h.fromInt(1),h.NEG_ONE=h.fromInt(-1),h.MAX_VALUE=h.fromBits(-1,2147483647),h.MIN_VALUE=h.fromBits(0,-2147483648),h.MIN_SAFE_VALUE=h.fromBits(1,-2097152),h.MAX_SAFE_VALUE=h.fromBits(-1,2097151),h.__isInteger__=!0,h);function h(e,t){this.low=e||0,this.high=t||0}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var i=4294967296,s=i*i/2,p=o.fromInt(1<<24),e=o.fromValue;r.int=e;e=o.isInteger;r.isInt=e;e=o.inSafeRange;r.inSafeRange=e;e=o.toNumber;r.toNumber=e;e=o.toString;r.toString=e,r.default=o},{"./error":57}],61:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Bookmark=void 0;var s=i(e("./util")),e=(a.empty=function(){return u},a.prototype.isEmpty=function(){return 0===this._values.length},a.prototype.values=function(){return this._values},a.prototype.asBeginTransactionParameters=function(){var e;return this.isEmpty()?{}:((e={}).bookmarks=this._values,e)},a);function a(e){this._values=function(e){if(!e)return[];if(s.isString(e))return[e];if(Array.isArray(e)){for(var t=[],r=function r(e){return e.reduce(function(e,t){return Array.isArray(t)?e.concat(r(t)):e.concat(t)},[])}(e),n=0;n<r.length;n++){var o=r[n];if(null!=o){if(!s.isString(o))throw new TypeError("Bookmark value should be a string, given: '"+o+"'");t.push(o)}}return t}throw new TypeError("Bookmark should either be a string or a string array, given: '"+e+"'")}(e)}var u=new(r.Bookmark=e)(null)},{"./util":77}],62:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.EMPTY_CONNECTION_HOLDER=r.ReadOnlyConnectionHolder=r.ConnectionHolder=void 0;var i=e("../error"),s=e("./util"),a=e("./constants"),u=e("./bookmark"),c=(l.prototype.mode=function(){return this._mode},l.prototype.database=function(){return this._database},l.prototype.setDatabase=function(e){this._database=e},l.prototype.bookmark=function(){return this._bookmark},l.prototype.connectionProvider=function(){return this._connectionProvider},l.prototype.referenceCount=function(){return this._referenceCount},l.prototype.initializeConnection=function(){return 0===this._referenceCount&&this._connectionProvider?(this._connectionPromise=this._connectionProvider.acquireConnection({accessMode:this._mode,database:this._database,bookmarks:this._bookmark,impersonatedUser:this._impersonatedUser,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._referenceCount++,!0):(this._referenceCount++,!1)},l.prototype.getConnection=function(){return this._connectionPromise},l.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},l.prototype.close=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection())},l.prototype._releaseConnection=function(){return this._connectionPromise=this._connectionPromise.then(function(e){return e?e.isOpen()?e.resetAndFlush().catch(_).then(function(){return e._release()}):e._release():Promise.resolve()}).catch(_),this._connectionPromise},l);function l(e){var t=void 0===e?{}:e,r=t.mode,n=void 0===r?a.ACCESS_MODE_WRITE:r,o=t.database,i=void 0===o?"":o,e=t.bookmark,r=t.connectionProvider,o=t.impersonatedUser,t=t.onDatabaseNameResolved;this._mode=n,this._database=i?(0,s.assertString)(i,"database"):"",this._bookmark=e||u.Bookmark.empty(),this._connectionProvider=r,this._impersonatedUser=o,this._referenceCount=0,this._connectionPromise=Promise.resolve(),this._onDatabaseNameResolved=t}r.ConnectionHolder=c;var f,h,e=(o(p,f=c),p.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},p.prototype.getConnection=function(){return this._connectionHolder.getConnection()},p.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},p.prototype.close=function(){return this._connectionHolder.getConnection().catch(function(){return Promise.resolve()})},p);function p(e){var t=f.call(this,{mode:e.mode(),database:e.database(),bookmark:e.bookmark(),connectionProvider:e.connectionProvider()})||this;return t._connectionHolder=e,t}function d(){return null!==h&&h.apply(this,arguments)||this}r.ReadOnlyConnectionHolder=e,r.default=e;c=new(o(d,h=c),d.prototype.mode=function(){},d.prototype.database=function(){},d.prototype.initializeConnection=function(){return!0},d.prototype.getConnection=function(){return Promise.reject((0,i.newError)("This connection holder does not serve connections"))},d.prototype.releaseConnection=function(){return Promise.resolve()},d.prototype.close=function(){return Promise.resolve()},d);function _(e){}r.EMPTY_CONNECTION_HOLDER=c},{"../error":57,"./bookmark":61,"./constants":64,"./util":77}],63:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ConnectivityVerifier=void 0;var n=e("./connection-holder"),o=e("./constants"),i=e("../error"),e=(s.prototype.verify=function(e){var t,r=(void 0===e?{}:e).database;return e=this._connectionProvider,(t=new n.ConnectionHolder({mode:o.ACCESS_MODE_READ,database:void 0===r?"":r,connectionProvider:e})).initializeConnection(),t.getConnection().then(function(e){if(!e)throw(0,i.newError)("Unexpected error acquiring transaction");return t.close().then(function(){return e.server})}).catch(function(e){return t.close().catch(function(e){}).then(function(){return Promise.reject(e)})})},s);function s(e){this._connectionProvider=e}r.ConnectivityVerifier=e},{"../error":57,"./connection-holder":62,"./constants":64}],64:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BOLT_PROTOCOL_V4_4=r.BOLT_PROTOCOL_V4_3=r.BOLT_PROTOCOL_V4_2=r.BOLT_PROTOCOL_V4_1=r.BOLT_PROTOCOL_V4_0=r.BOLT_PROTOCOL_V3=r.BOLT_PROTOCOL_V2=r.BOLT_PROTOCOL_V1=r.DEFAULT_POOL_MAX_SIZE=r.DEFAULT_POOL_ACQUISITION_TIMEOUT=r.ACCESS_MODE_WRITE=r.ACCESS_MODE_READ=r.FETCH_ALL=void 0;r.FETCH_ALL=-1;r.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4;r.DEFAULT_POOL_MAX_SIZE=100;r.ACCESS_MODE_READ="READ";r.ACCESS_MODE_WRITE="WRITE";r.BOLT_PROTOCOL_V1=1;r.BOLT_PROTOCOL_V2=2;r.BOLT_PROTOCOL_V3=3;r.BOLT_PROTOCOL_V4_0=4;r.BOLT_PROTOCOL_V4_1=4.1;r.BOLT_PROTOCOL_V4_2=4.2;r.BOLT_PROTOCOL_V4_3=4.3;r.BOLT_PROTOCOL_V4_4=4.4},{}],65:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.retryStrategy=r.resolver=r.serverAddress=r.urlUtil=r.logger=r.connectivityVerifier=r.transactionExecutor=r.txConfig=r.connectionHolder=r.constants=r.bookmark=r.observer=r.temporalUtil=r.util=void 0;var s=i(e("./util"));r.util=s;s=i(e("./temporal-util"));r.temporalUtil=s;s=i(e("./observers"));r.observer=s;s=i(e("./bookmark"));r.bookmark=s;s=i(e("./constants"));r.constants=s;s=i(e("./connection-holder"));r.connectionHolder=s;s=i(e("./tx-config"));r.txConfig=s;s=i(e("./transaction-executor"));r.transactionExecutor=s;s=i(e("./connectivity-verifier"));r.connectivityVerifier=s;s=i(e("./logger"));r.logger=s;s=i(e("./url-util"));r.urlUtil=s;s=i(e("./server-address"));r.serverAddress=s;s=i(e("./resolver"));r.resolver=s;e=i(e("./retry-strategy"));r.retryStrategy=e},{"./bookmark":61,"./connection-holder":62,"./connectivity-verifier":63,"./constants":64,"./logger":66,"./observers":67,"./resolver":70,"./retry-strategy":71,"./server-address":72,"./temporal-util":73,"./transaction-executor":74,"./tx-config":75,"./url-util":76,"./util":77}],66:[function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(r,"__esModule",{value:!0}),r.Logger=void 0;var i,s=e("../error"),a="error",u="warn",c="info",l="debug",f=c,h=((e={})[a]=0,e[u]=1,e[c]=2,e[l]=3,e),e=(p.create=function(e){if(e&&e.logging){e=e.logging;return new p(function(e){if(e&&e.level){var t=e.level,e=h[t];if(!e&&0!==e)throw(0,s.newError)("Illegal logging level: "+t+". Supported levels are: "+Object.keys(h));return t}return f}(e),function(e){if(e&&e.logger){var t=e.logger;if(t&&"function"==typeof t)return t}throw(0,s.newError)("Illegal logger function: "+e.logger)}(e))}return this.noOp()},p.noOp=function(){return _},p.prototype.isErrorEnabled=function(){return y(this._level,a)},p.prototype.error=function(e){this.isErrorEnabled()&&this._loggerFunction(a,e)},p.prototype.isWarnEnabled=function(){return y(this._level,u)},p.prototype.warn=function(e){this.isWarnEnabled()&&this._loggerFunction(u,e)},p.prototype.isInfoEnabled=function(){return y(this._level,c)},p.prototype.info=function(e){this.isInfoEnabled()&&this._loggerFunction(c,e)},p.prototype.isDebugEnabled=function(){return y(this._level,l)},p.prototype.debug=function(e){this.isDebugEnabled()&&this._loggerFunction(l,e)},p);function p(e,t){this._level=e,this._loggerFunction=t}function d(){return i.call(this,c,function(e,t){})||this}r.Logger=e;var _=new(o(d,i=e),d.prototype.isErrorEnabled=function(){return!1},d.prototype.error=function(e){},d.prototype.isWarnEnabled=function(){return!1},d.prototype.warn=function(e){},d.prototype.isInfoEnabled=function(){return!1},d.prototype.info=function(e){},d.prototype.isDebugEnabled=function(){return!1},d.prototype.debug=function(e){},d);function y(e,t){return h[e]>=h[t]}},{"../error":57}],67:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.FailedObserver=r.CompletedObserver=void 0;var n=(o.prototype.subscribe=function(e){s(e,e.onKeys,[]),s(e,e.onCompleted,{})},o.prototype.cancel=function(){},o.prototype.prepareToHandleSingleResponse=function(){},o.prototype.markCompleted=function(){},o.prototype.onError=function(e){throw Error("CompletedObserver not supposed to call onError")},o);function o(){}r.CompletedObserver=n;i.prototype.subscribe=function(e){s(e,e.onError,this._error),this._observers.push(e)},i.prototype.onError=function(t){var e=this;Promise.resolve(s(this,this._beforeError,t)).then(function(){return e._observers.forEach(function(e){return s(e,e.onError,t)})})},i.prototype.cancel=function(){},i.prototype.prepareToHandleSingleResponse=function(){},i.prototype.markCompleted=function(){},n=i;function i(e){var t=e.error,e=e.onError;this._error=t,this._beforeError=e,this._observers=[],this.onError(t)}function s(e,t,r){t&&t.bind(e)(r)}r.FailedObserver=n},{}],68:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=(o.prototype.resolve=function(){throw new Error("Abstract function")},o.prototype._resolveToItself=function(e){return Promise.resolve([e])},o);function o(){}r.default=n},{}],69:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e("../server-address");function o(e){return Promise.resolve([e])}i.prototype.resolve=function(t){var r=this;return new Promise(function(e){return e(r._resolverFunction(t.asHostPort()))}).then(function(e){if(!Array.isArray(e))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses.Each address is '<host>:<port>'. Got: "+e);return e.map(function(e){return n.ServerAddress.fromUrl(e)})})},e=i;function i(e){this._resolverFunction=e||o}r.default=e},{"../server-address":72}],70:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.ConfiguredCustomResolver=r.BaseHostNameResolver=void 0;var o=n(e("./base-host-name-resolver"));r.BaseHostNameResolver=o.default;e=n(e("./configured-custom-resolver"));r.ConfiguredCustomResolver=e.default},{"./base-host-name-resolver":68,"./configured-custom-resolver":69}],71:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.canRetryOn=void 0;var n=e("../error");r.canRetryOn=function(e){return e&&e instanceof n.Neo4jError&&e.code&&(e.code===n.SERVICE_UNAVAILABLE||e.code===n.SESSION_EXPIRED||"Neo.ClientError.Security.AuthorizationExpired"===e.code||function(e){e=e.code;if(0<=e.indexOf("TransientError"))return"Neo.TransientError.Transaction.Terminated"!==e&&"Neo.TransientError.Transaction.LockClientStopped"!==e;return!1}(e))}},{"../error":57}],72:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.ServerAddress=void 0;var s=e("./util"),a=i(e("./url-util")),e=(u.prototype.host=function(){return this._host},u.prototype.resolvedHost=function(){return this._resolved||this._host},u.prototype.port=function(){return this._port},u.prototype.resolveWith=function(e){return new u(this._host,e,this._port,this._hostPort)},u.prototype.asHostPort=function(){return this._hostPort},u.prototype.asKey=function(){return this._hostPort},u.prototype.toString=function(){return this._stringValue},u.fromUrl=function(e){e=a.parseDatabaseUrl(e);return new u(e.host,null,e.port,e.hostAndPort)},u);function u(e,t,r,n){this._host=(0,s.assertString)(e,"host"),this._resolved=t?(0,s.assertString)(t,"resolved"):null,this._port=(0,s.assertNumber)(r,"port"),this._hostPort=n,this._stringValue=t?n+"("+t+")":""+n}r.ServerAddress=e},{"./url-util":76,"./util":77}],73:[function(e,t,a){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(a,"__esModule",{value:!0}),a.floorMod=a.floorDiv=a.assertValidNanosecond=a.assertValidSecond=a.assertValidMinute=a.assertValidHour=a.assertValidDay=a.assertValidMonth=a.assertValidYear=a.timeZoneOffsetInSeconds=a.totalNanoseconds=a.dateToIsoString=a.timeZoneOffsetToIsoString=a.timeToIsoString=a.durationToIsoString=a.dateToEpochDay=a.localDateTimeToEpochSecond=a.localTimeToNanoOfDay=a.normalizeNanosecondsForDuration=a.normalizeSecondsForDuration=a.SECONDS_PER_DAY=a.DAYS_PER_400_YEAR_CYCLE=a.DAYS_0000_TO_1970=a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE=a.NANOS_PER_MILLISECOND=a.NANOS_PER_SECOND=a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE=a.MINUTES_PER_HOUR=a.NANOSECOND_OF_SECOND_RANGE=a.SECOND_OF_MINUTE_RANGE=a.MINUTE_OF_HOUR_RANGE=a.HOUR_OF_DAY_RANGE=a.DAY_OF_MONTH_RANGE=a.MONTH_OF_YEAR_RANGE=a.YEAR_RANGE=void 0;var u=r(e("../integer")),i=e("../error"),s=e("./util"),e=(c.prototype.contains=function(e){if((0,u.isInt)(e)&&e instanceof u.default)return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger);if("bigint"!=typeof e)return e>=this._minNumber&&e<=this._maxNumber;e=(0,u.int)(e);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)},c.prototype.toString=function(){return"["+this._minNumber+", "+this._maxNumber+"]"},c);function c(e,t){this._minNumber=e,this._maxNumber=t,this._minInteger=(0,u.int)(e),this._maxInteger=(0,u.int)(t)}function l(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);var n=e.multiply(365);return n=(n=(n=e.greaterThanOrEqual(0)?n.add(e.add(3).div(4).subtract(e.add(99).div(100)).add(e.add(399).div(400))):n.subtract(e.div(-4).subtract(e.div(-100)).add(e.div(-400)))).add(t.multiply(367).subtract(362).div(12))).add(r.subtract(1)),t.greaterThan(2)&&(n=n.subtract(1),e=e,(e=(0,u.int)(e)).modulo(4).equals(0)&&(!e.modulo(100).equals(0)||e.modulo(400).equals(0))||(n=n.subtract(1))),n.subtract(a.DAYS_0000_TO_1970)}function f(e,t,r){if((0,s.assertNumberOrInteger)(e,r),!t.contains(e))throw(0,i.newError)(r+" is expected to be in range "+t+" but was: "+e);return e}function h(e,t){e=(0,u.int)(e),t=(0,u.int)(t);var r=e.div(t);return r=e.isPositive()!==t.isPositive()&&r.multiply(t).notEquals(e)?r.subtract(1):r}function p(e,t){return e=(0,u.int)(e),t=(0,u.int)(t),e.subtract(h(e,t).multiply(t))}function d(e){return(e=(0,u.int)(e)).equals(0)?"":"."+_(e,9)}function _(e,t){var r=(e=(0,u.int)(e)).isNegative(),n=(e=r?e.negate():e).toString();if(t)for(;n.length<t;)n="0"+n;return r?"-"+n:n}a.YEAR_RANGE=new e(-999999999,999999999),a.MONTH_OF_YEAR_RANGE=new e(1,12),a.DAY_OF_MONTH_RANGE=new e(1,31),a.HOUR_OF_DAY_RANGE=new e(0,23),a.MINUTE_OF_HOUR_RANGE=new e(0,59),a.SECOND_OF_MINUTE_RANGE=new e(0,59),a.NANOSECOND_OF_SECOND_RANGE=new e(0,999999999),a.MINUTES_PER_HOUR=60,a.SECONDS_PER_MINUTE=60,a.SECONDS_PER_HOUR=a.SECONDS_PER_MINUTE*a.MINUTES_PER_HOUR,a.NANOS_PER_SECOND=1e9,a.NANOS_PER_MILLISECOND=1e6,a.NANOS_PER_MINUTE=a.NANOS_PER_SECOND*a.SECONDS_PER_MINUTE,a.NANOS_PER_HOUR=a.NANOS_PER_MINUTE*a.MINUTES_PER_HOUR,a.DAYS_0000_TO_1970=719528,a.DAYS_PER_400_YEAR_CYCLE=146097,a.SECONDS_PER_DAY=86400,a.normalizeSecondsForDuration=function(e,t){return(0,u.int)(e).add(h(t,a.NANOS_PER_SECOND))},a.normalizeNanosecondsForDuration=function(e){return p(e,a.NANOS_PER_SECOND)},a.localTimeToNanoOfDay=function(e,t,r,n){return e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r),n=(0,u.int)(n),(e=(e=(e=e.multiply(a.NANOS_PER_HOUR)).add(t.multiply(a.NANOS_PER_MINUTE))).add(r.multiply(a.NANOS_PER_SECOND))).add(n)},a.localDateTimeToEpochSecond=function(e,t,r,n,o,i,s){return r=l(e,t,r),i=function(e,t,r){e=(0,u.int)(e),t=(0,u.int)(t),r=(0,u.int)(r);e=e.multiply(a.SECONDS_PER_HOUR);return(e=e.add(t.multiply(a.SECONDS_PER_MINUTE))).add(r)}(n,o,i),r.multiply(a.SECONDS_PER_DAY).add(i)},a.dateToEpochDay=l,a.durationToIsoString=function(e,t,r,n){return"P"+_(e)+"M"+_(t)+"DT"+function(e,t){var r;e=(0,u.int)(e),t=(0,u.int)(t);var n=e.isNegative(),o=t.greaterThan(0);e=n&&o?e.equals(-1)?"-0":e.add(1).toString():e.toString();o&&(r=d((n?t.negate().add(2*a.NANOS_PER_SECOND):t.add(a.NANOS_PER_SECOND)).modulo(a.NANOS_PER_SECOND)));return r?e+r:e}(r,n)+"S"},a.timeToIsoString=function(e,t,r,n){return _(e,2)+":"+_(t,2)+":"+_(r,2)+d(n)},a.timeZoneOffsetToIsoString=function(e){if((e=(0,u.int)(e)).equals(0))return"Z";var t=(n=e.isNegative())?"-":"+",r=_((e=n?e.multiply(-1):e).div(a.SECONDS_PER_HOUR),2),n=_(e.div(a.SECONDS_PER_MINUTE).modulo(a.MINUTES_PER_HOUR),2);return(e=(e=e.modulo(a.SECONDS_PER_MINUTE)).equals(0)?null:_(e,2))?t+r+":"+n+":"+e:t+r+":"+n},a.dateToIsoString=function(e,t,r){var n=(e=(0,u.int)(e)).isNegative(),e=_(e=n?e.multiply(-1):e,4);return(e=n?"-"+e:e)+"-"+_(t,2)+"-"+_(r,2)},a.totalNanoseconds=function(e,t){return function(e,t){{if(e instanceof u.default)return e.add(t);if("bigint"==typeof e)return e+BigInt(t)}return e+t}(t=t||0,e.getMilliseconds()*a.NANOS_PER_MILLISECOND)},a.timeZoneOffsetInSeconds=function(e){return 0===(e=e.getTimezoneOffset())?0:-1*e*a.SECONDS_PER_MINUTE},a.assertValidYear=function(e){return f(e,a.YEAR_RANGE,"Year")},a.assertValidMonth=function(e){return f(e,a.MONTH_OF_YEAR_RANGE,"Month")},a.assertValidDay=function(e){return f(e,a.DAY_OF_MONTH_RANGE,"Day")},a.assertValidHour=function(e){return f(e,a.HOUR_OF_DAY_RANGE,"Hour")},a.assertValidMinute=function(e){return f(e,a.MINUTE_OF_HOUR_RANGE,"Minute")},a.assertValidSecond=function(e){return f(e,a.SECOND_OF_MINUTE_RANGE,"Second")},a.assertValidNanosecond=function(e){return f(e,a.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")},a.floorDiv=h,a.floorMod=p},{"../error":57,"../integer":60,"./util":77}],74:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TransactionExecutor=void 0;var n=e("../error"),u=e("./retry-strategy"),e=(o.prototype.execute=function(n,o){var i=this;return new Promise(function(e,t){i._executeTransactionInsidePromise(n,o,e,t)}).catch(function(e){var t=Date.now(),r=i._initialRetryDelayMs;return i._retryTransactionPromise(n,o,e,t,r)})},o.prototype.close=function(){this._inFlightTimeoutIds.forEach(function(e){return clearTimeout(e)}),this._inFlightTimeoutIds=[]},o.prototype._retryTransactionPromise=function(o,i,e,r,s){var a=this;return Date.now()-r>this._maxRetryTimeMs||!(0,u.canRetryOn)(e)?Promise.reject(e):new Promise(function(e,t){var r=a._computeDelayWithJitter(s),n=setTimeout(function(){a._inFlightTimeoutIds=a._inFlightTimeoutIds.filter(function(e){return e!==n}),a._executeTransactionInsidePromise(o,i,e,t)},r);a._inFlightTimeoutIds.push(n)}).catch(function(e){var t=s*a._multiplier;return a._retryTransactionPromise(o,i,e,r,t)})},o.prototype._executeTransactionInsidePromise=function(e,t,r,n){var o,i=this;try{o=e()}catch(e){return void n(e)}this._safeExecuteTransactionWork(o,t).then(function(e){return i._handleTransactionWorkSuccess(e,o,r,n)}).catch(function(e){return i._handleTransactionWorkFailure(e,o,n)})},o.prototype._safeExecuteTransactionWork=function(e,t){try{var r=t(e);return Promise.resolve(r)}catch(e){return Promise.reject(e)}},o.prototype._handleTransactionWorkSuccess=function(e,t,r,n){t.isOpen()?t.commit().then(function(){r(e)}).catch(function(e){n(e)}):r(e)},o.prototype._handleTransactionWorkFailure=function(e,t,r){t.isOpen()?t.rollback().catch(function(e){}).then(function(){return r(e)}):r(e)},o.prototype._computeDelayWithJitter=function(e){var t=e*this._jitterFactor,r=e-t,t=e+t;return Math.random()*(t-r)+r},o.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,n.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs);if(this._initialRetryDelayMs<0)throw(0,n.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs);if(this._multiplier<1)throw(0,n.newError)("Multiplier should be >= 1.0: "+this._multiplier);if(this._jitterFactor<0||1<this._jitterFactor)throw(0,n.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor)},o);function o(e,t,r,n){this._maxRetryTimeMs=i(e,3e4),this._initialRetryDelayMs=i(t,1e3),this._multiplier=i(r,2),this._jitterFactor=i(n,.2),this._inFlightTimeoutIds=[],this._verifyAfterConstruction()}function i(e,t){return e||0===e?e:t}r.TransactionExecutor=e},{"../error":57,"./retry-strategy":71}],75:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.TxConfig=void 0;var s=i(e("./util")),a=e("../error"),u=e("../integer"),e=(c.empty=function(){return l},c.prototype.isEmpty=function(){return Object.values(this).every(function(e){return null==e})},c);function c(e){var t;(t=e)&&s.assertObject(t,"Transaction config"),this.timeout=function(e){if(!s.isObject(e)||!e.timeout&&0!==e.timeout)return null;s.assertNumberOrInteger(e.timeout,"Transaction timeout");e=(0,u.int)(e.timeout);if(e.isZero())throw(0,a.newError)("Transaction timeout should not be zero");if(e.isNegative())throw(0,a.newError)("Transaction timeout should not be negative");return e}(e),this.metadata=function(e){if(s.isObject(e)&&e.metadata){e=e.metadata;if(s.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}(e)}var l=new(r.TxConfig=e)({})},{"../error":57,"../integer":60,"./util":77}],76:[function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.Url=r.formatIPv6Address=r.formatIPv4Address=r.defaultPortForScheme=r.parseDatabaseUrl=void 0;var u=e("./util"),n=7687,o=7474,i=7473,c=function(e,t,r,n,o){this.scheme=e,this.host=t,this.port=r,this.hostAndPort=n,this.query=o};function l(e,t,r){if(!(e=(e||"").trim()))throw new Error("Illegal empty "+t+" in URL query '"+r+"'");return e}function f(e){var t="["===e.charAt(0),r="]"===e.charAt(e.length-1);if(t||r){if(t&&r)return e;throw new Error("Illegal IPv6 address "+e)}return"["+e+"]"}function h(e){return"http"===e?o:"https"===e?i:n}r.Url=c,r.parseDatabaseUrl=function(e){(0,u.assertString)(e,"URL");var t=function(e){function i(e,t){t=e.indexOf(t);return 0<=t?[e.substring(0,t),e[t],e.substring(t+1)]:[e,"",""]}function t(e){var t,r={};(o="@")===(t=0<=(o=(n=e).lastIndexOf(o))?[n.substring(0,o),n[o],n.substring(o+1)]:["","",n])[1]&&(r.userInfo=decodeURIComponent(t[0]),e=t[2]);var n,o,n=a((o="]",n=i(e,n="["),[(o=i(n[2],o))[0],o[2]]),2),o=n[0],n=n[1];return""!==o?(r.host=o,t=i(n,":")):(t=i(e,":"),r.host=t[0]),":"===t[1]&&(r.port=t[2]),r}var r,n={};":"===(r=i(e,":"))[1]&&(n.scheme=decodeURIComponent(r[0]),e=r[2]);"#"===(r=i(e,"#"))[1]&&(n.fragment=decodeURIComponent(r[2]),e=r[0]);"?"===(r=i(e,"?"))[1]&&(n.query=r[2],e=r[0]);e.startsWith("//")?(r=i(e.substr(2),"/"),(n=s(s({},n),t(r[0]))).path=r[1]+r[2]):n.path=e;return n}((i=-1!==(o=(o=e).trim()).indexOf("://")?{schemeMissing:!1,url:o}:{schemeMissing:!0,url:"none://"+o}).url),r=i.schemeMissing?null:function(e){if(e)return e=":"===(e=e.trim()).charAt(e.length-1)?e.substring(0,e.length-1):e;return null}(t.scheme),n=function(e,t){if(e)return e.trim();throw new Error("Unable to extract host from "+t)}(t.host),o=function(e){if(e)return 0<=e.indexOf(":")?f(e):e;throw new Error("Illegal host "+e)}(n),i=function(e,t){e="string"==typeof e?parseInt(e,10):e;return 0===e||e?e:h(t)}(t.port,r),o=o+":"+i,e=function(e,r){var e=e?function(e){(e=(e||"").trim())&&"?"===e.charAt(0)&&(e=e.substring(1,e.length));return e}(e):null,n={};e&&e.split("&").forEach(function(e){var t=e.split("=");if(2!==t.length)throw new Error("Invalid parameters: '"+t+"' in URL '"+r+"'.");e=l(t[0],"key",r),t=l(t[1],"value",r);if(n[e])throw new Error("Duplicated query parameters with key '"+e+"' in URL '"+r+"'");n[e]=t});return n}(t.query||function(e){if("string"!=typeof e)return null;e=a(e.split("?"),2),e[0];return e[1]}(t.resourceName),e);return new c(r,n,i,o,e)},r.formatIPv4Address=function(e,t){return e+":"+t},r.formatIPv6Address=function(e,t){return f(e)+":"+t},r.defaultPortForScheme=h},{"./util":77}],77:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ENCRYPTION_OFF=r.ENCRYPTION_ON=r.validateQueryAndParameters=r.assertValidDate=r.assertNumberOrInteger=r.assertNumber=r.assertString=r.assertObject=r.isString=r.isObject=r.isEmptyObjectOrNull=void 0;var n=e("../integer"),o=e("../json");r.ENCRYPTION_ON="ENCRYPTION_ON";function i(e){return"object"==typeof e&&!Array.isArray(e)&&null!==e}function s(e,t){if(!a(e))throw new TypeError(t+" expected to be string but was: "+(0,o.stringify)(e));return e}function a(e){return"[object String]"===Object.prototype.toString.call(e)}r.ENCRYPTION_OFF="ENCRYPTION_OFF",r.isEmptyObjectOrNull=function(e){if(null===e)return!0;if(!i(e))return!1;for(var t in e)if(Object.prototype.hasOwnProperty.bind(e,t))return!1;return!0},r.isObject=i,r.validateQueryAndParameters=function(e,t,r){var n="",t=t||{},r=(null==r?void 0:r.skipAsserts)||!1;return"string"==typeof e?n=e:e instanceof String?n=e.toString():"object"==typeof e&&e.text&&(n=e.text,t=e.parameters||{}),r||(function(e){if(s(e,"Cypher query"),0===e.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(n),function(e){if(!i(e)){var t=e.constructor?" "+e.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:"+t+" "+e)}}(t)),{validatedQuery:n,params:t}},r.assertObject=function(e,t){if(!i(e))throw new TypeError(t+" expected to be an object but was: "+(0,o.stringify)(e));return e},r.assertString=s,r.assertNumber=function(e,t){if("number"!=typeof e)throw new TypeError(t+" expected to be a number but was: "+(0,o.stringify)(e));return e},r.assertNumberOrInteger=function(e,t){if("number"!=typeof e&&"bigint"!=typeof e&&!(0,n.isInt)(e))throw new TypeError(t+" expected to be either a number or an Integer object but was: "+(0,o.stringify)(e));return e},r.assertValidDate=function(e,t){if("[object Date]"!==Object.prototype.toString.call(e))throw new TypeError(t+" expected to be a standard JavaScript Date but was: "+(0,o.stringify)(e));if(Number.isNaN(e.getTime()))throw new TypeError(t+" expected to be valid JavaScript Date but its time was NaN: "+(0,o.stringify)(e));return e},r.isString=a},{"../integer":60,"../json":78}],78:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.stringify=void 0,r.stringify=function(e){return JSON.stringify(e,function(e,t){return"bigint"==typeof t?t+"n":t})}},{}],79:[function(e,t,r){"use strict";var n=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},c=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},l=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0});var o=e("./error");i.prototype.forEach=function(e){var t,r;try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0];e(i[1],s,this)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},i.prototype.map=function(e){var t,r,n=[];try{for(var o=c(this.entries()),i=o.next();!i.done;i=o.next()){var s=l(i.value,2),a=s[0],u=s[1];n.push(e(u,a,this))}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},i.prototype.entries=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.values=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype[Symbol.iterator]=function(){var t;return n(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}})},i.prototype.toObject=function(){var t,e,r={};try{for(var n=c(this.entries()),o=n.next();!o.done;o=n.next()){var i=l(o.value,2),s=i[0],a=i[1];r[s]=a}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return r},i.prototype.get=function(e){var t;if("number"!=typeof e){if(void 0===(t=this._fieldLookup[e]))throw(0,o.newError)("This record has no field with key '"+e+"', available key are: ["+this.keys+"].")}else t=e;if(t>this._fields.length-1||t<0)throw(0,o.newError)("This record has no field with index '"+t+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[t]},i.prototype.has=function(e){return"number"==typeof e?0<=e&&e<this._fields.length:void 0!==this._fieldLookup[e]},e=i;function i(e,t,r){var n;this.keys=e,this.length=e.length,this._fields=t,this._fieldLookup=r||(n={},e.forEach(function(e,t){n[e]=t}),n)}r.default=e},{"./error":57}],80:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(r,"__esModule",{value:!0}),r.Stats=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Notification=r.ServerInfo=r.queryType=void 0;var s=i(e("./integer")),e=(a.prototype._buildNotifications=function(e){return e?e.map(function(e){return new p(e)}):[]},a.prototype.hasPlan=function(){return this.plan instanceof u},a.prototype.hasProfile=function(){return this.profile instanceof c},a);function a(e,t,r,n){this.query={text:e,parameters:t},this.queryType=r.type,this.counters=new f(r.stats||{}),this.updateStatistics=this.counters,this.plan=!(!r.plan&&!r.profile)&&new u(r.plan||r.profile),this.profile=!!r.profile&&new c(r.profile),this.notifications=this._buildNotifications(r.notifications),this.server=new _(r.server,n),this.resultConsumedAfter=r.result_consumed_after,this.resultAvailableAfter=r.result_available_after,this.database={name:r.db||null}}var u=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=e.children?e.children.map(function(e){return new t(e)}):[]};r.Plan=u;var c=(l.prototype.hasPageCacheStats=function(){return 0<this.pageCacheMisses||0<this.pageCacheHits||0<this.pageCacheHitRatio},l);function l(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=b("dbHits",e),this.rows=b("rows",e),this.pageCacheMisses=b("pageCacheMisses",e),this.pageCacheHits=b("pageCacheHits",e),this.pageCacheHitRatio=b("pageCacheHitRatio",e),this.time=b("time",e),this.children=e.children?e.children.map(function(e){return new l(e)}):[]}r.ProfiledPlan=c,r.Stats=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};var f=(h.prototype.containsUpdates=function(){var r=this;return void 0!==this._containsUpdates?this._containsUpdates:0<Object.keys(this._stats).reduce(function(e,t){return e+r._stats[t]},0)},h.prototype.updates=function(){return this._stats},h.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:0<this._systemUpdates},h.prototype.systemUpdates=function(){return this._systemUpdates},h);function h(r){var n=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(r).forEach(function(e){var t=e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()});t in n._stats?n._stats[t]=y(r[e]):"systemUpdates"===t?n._systemUpdates=y(r[e]):"containsSystemUpdates"===t?n._containsSystemUpdates=r[e]:"containsUpdates"===t&&(n._containsUpdates=r[e])}),this._stats=Object.freeze(this._stats)}r.QueryStatistics=f;var p=(d._constructPosition=function(e){return e?{offset:y(e.offset),line:y(e.line),column:y(e.column)}:{}},d);function d(e){this.code=e.code,this.title=e.title,this.description=e.description,this.severity=e.severity,this.position=d._constructPosition(e.position)}r.Notification=p;var _=function(e,t){e&&(this.address=e.address,this.version=e.version,this.agent=e.version),this.protocolVersion=t};function y(e){return e instanceof s.default?e.toInt():"bigint"==typeof e?(0,s.int)(e).toInt():e}function b(e,t,r){return void 0===r&&(r=0),e in t?y(t[e]):r}r.ServerInfo=_;r.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},r.default=e},{"./integer":60}],81:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});function s(e){console.log("Uncaught error when processing result: "+e)}function a(e){}var i=n(e("./result-summary")),u=e("./internal"),o=u.connectionHolder.EMPTY_CONNECTION_HOLDER,e=(c.prototype.keys=function(){var e=this;return new Promise(function(t,r){e._streamObserverPromise.then(function(e){return e.subscribe({onKeys:function(e){return t(e)},onError:function(e){return r(e)}})}).catch(r)})},c.prototype.summary=function(){var n=this;return new Promise(function(t,r){n._streamObserverPromise.then(function(e){e.cancel(),e.subscribe({onCompleted:function(e){return n._createSummary(e).then(t,r)},onError:function(e){return r(e)}})}).catch(r)})},c.prototype._getOrCreatePromise=function(){var e=this;return this._p||(this._p=new Promise(function(t,r){var n=[];e.subscribe({onNext:function(e){n.push(e)},onCompleted:function(e){t({records:n,summary:e})},onError:function(e){r(e)}})})),this._p},c.prototype.then=function(e,t){return this._getOrCreatePromise().then(e,t)},c.prototype.catch=function(e){return this._getOrCreatePromise().catch(e)},c.prototype.finally=function(e){return this._getOrCreatePromise().finally(e)},c.prototype.subscribe=function(n){var o=this,t=n.onCompleted||a;n.onCompleted=function(e){o._createSummary(e).then(function(e){return t.call(n,e)})};var i=n.onError||s;n.onError=function(r){o._connectionHolder.releaseConnection().then(function(){var e,t;e=r,(t=o._stack)&&(e.stack=e.toString()+"\n"+t),i.call(n,r)})},this._streamObserverPromise.then(function(e){return e.subscribe(n)}).catch(function(e){return n.onError(e)})},c.prototype._cancel=function(){this._streamObserverPromise.then(function(e){return e.cancel()})},c.prototype._createSummary=function(t){var e=u.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),r=e.validatedQuery,n=e.params,o=this._connectionHolder;return o.getConnection().then(function(e){return o.releaseConnection().then(function(){return e?e.protocol().version:void 0})},function(e){}).then(function(e){return new i.default(r,n,t,e)})},c);function c(e,t,r,n){this._stack=function(){var e=new Error("");if(e.stack)return e.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=e,this._p=null,this._query=t,this._parameters=r||{},this._connectionHolder=n||o}Symbol.toStringTag,r.default=e},{"./internal":65,"./result-summary":80}],82:[function(e,t,r){"use strict";var o=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},i=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("./internal/observers"),a=e("./internal/util"),u=e("./error"),c=n(e("./result")),l=n(e("./transaction")),f=e("./internal/connection-holder"),h=e("./internal/constants"),p=e("./internal/transaction-executor"),d=e("./internal/bookmark"),_=e("./internal/tx-config"),e=(y.prototype.run=function(e,t,r){var n=this,t=(0,a.validateQueryAndParameters)(e,t),o=t.validatedQuery,i=t.params,s=r?new _.TxConfig(r):_.TxConfig.empty();return this._run(o,i,function(e){return n._assertSessionIsOpen(),e.protocol().run(o,i,{bookmark:n._lastBookmark,txConfig:s,mode:n._mode,database:n._database,impersonatedUser:n._impersonatedUser,afterComplete:n._onComplete,reactive:n._reactive,fetchSize:n._fetchSize})})},y.prototype._run=function(e,t,r){var n=this._connectionHolderWithMode(this._mode),o=this._open?!this._hasTx&&n.initializeConnection()?n.getConnection().then(function(e){return r(e)}).catch(function(e){return Promise.resolve(new s.FailedObserver({error:e}))}):Promise.resolve(new s.FailedObserver({error:(0,u.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")})):Promise.resolve(new s.FailedObserver({error:(0,u.newError)("Cannot run query in a closed session.")}));return new c.default(o,e,t,n)},y.prototype._acquireConnection=function(t){return o(this,void 0,void 0,function(){var r,n=this;return i(this,function(e){return r=this._connectionHolderWithMode(this._mode),[2,this._open?!this._hasTx&&r.initializeConnection()?r.getConnection().then(function(e){return t(e)}).then(function(t){return o(n,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return[4,r.releaseConnection()];case 1:return e.sent(),[2,t]}})})}):Promise.reject((0,u.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,u.newError)("Cannot run query in a closed session."))]})})},y.prototype.beginTransaction=function(e){var t=e,e=_.TxConfig.empty();return t&&(e=new _.TxConfig(t)),this._beginTransaction(this._mode,e)},y.prototype._beginTransaction=function(e,t){if(!this._open)throw(0,u.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,u.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");e=y._validateSessionMode(e),e=this._connectionHolderWithMode(e);e.initializeConnection(),this._hasTx=!0;e=new l.default({connectionHolder:e,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmark:this._updateBookmark.bind(this),onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize});return e._begin(this._lastBookmark,t),e},y.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,u.newError)("You cannot run more transactions on a closed session.")},y.prototype._transactionClosed=function(){this._hasTx=!1},y.prototype.lastBookmark=function(){return this._lastBookmark.values()},y.prototype.readTransaction=function(e,t){t=new _.TxConfig(t);return this._runTransaction(h.ACCESS_MODE_READ,t,e)},y.prototype.writeTransaction=function(e,t){t=new _.TxConfig(t);return this._runTransaction(h.ACCESS_MODE_WRITE,t,e)},y.prototype._runTransaction=function(e,t,r){var n=this;return this._transactionExecutor.execute(function(){return n._beginTransaction(e,t)},r)},y.prototype._onDatabaseNameResolved=function(e){this._databaseNameResolved||(this._database=e=e||"",this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0)},y.prototype._updateBookmark=function(e){e&&!e.isEmpty()&&(this._lastBookmark=e)},y.prototype.close=function(){return o(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this._open?(this._open=!1,this._transactionExecutor.close(),[4,this._readConnectionHolder.close()]):[3,3];case 1:return e.sent(),[4,this._writeConnectionHolder.close()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},y.prototype._connectionHolderWithMode=function(e){if(e===h.ACCESS_MODE_READ)return this._readConnectionHolder;if(e===h.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,u.newError)("Unknown access mode: "+e)},y.prototype._onCompleteCallback=function(e){this._updateBookmark(new d.Bookmark(e.bookmark))},y._validateSessionMode=function(e){e=e||h.ACCESS_MODE_WRITE;if(e!==h.ACCESS_MODE_READ&&e!==h.ACCESS_MODE_WRITE)throw(0,u.newError)("Illegal session mode "+e);return e},y);function y(e){var t=e.mode,r=e.connectionProvider,n=e.bookmark,o=e.database,i=e.config,s=e.reactive,a=e.fetchSize,e=e.impersonatedUser;this._mode=t,this._database=o,this._reactive=s,this._fetchSize=a,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._readConnectionHolder=new f.ConnectionHolder({mode:h.ACCESS_MODE_READ,database:o,bookmark:n,connectionProvider:r,impersonatedUser:e,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._writeConnectionHolder=new f.ConnectionHolder({mode:h.ACCESS_MODE_WRITE,database:o,bookmark:n,connectionProvider:r,impersonatedUser:e,onDatabaseNameResolved:this._onDatabaseNameResolved}),this._open=!0,this._hasTx=!1,this._impersonatedUser=e,this._lastBookmark=n||d.Bookmark.empty(),this._transactionExecutor=function(e){e=e&&e.maxTransactionRetryTime?e.maxTransactionRetryTime:null;return new p.TransactionExecutor(e)}(i),this._onComplete=this._onCompleteCallback.bind(this),this._databaseNameResolved=""!==this._database}r.default=e},{"./error":57,"./internal/bookmark":61,"./internal/connection-holder":62,"./internal/constants":64,"./internal/observers":67,"./internal/transaction-executor":74,"./internal/tx-config":75,"./internal/util":77,"./result":81,"./transaction":85}],83:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isPoint=r.Point=void 0;var o=e("./internal/util"),n="__isPoint__",e=(i.prototype.toString=function(){return this.z||0===this.z?"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+", z="+s(this.z)+"}":"Point{srid="+s(this.srid)+", x="+s(this.x)+", y="+s(this.y)+"}"},i);function i(e,t,r,n){this.srid=(0,o.assertNumberOrInteger)(e,"SRID"),this.x=(0,o.assertNumber)(t,"X coordinate"),this.y=(0,o.assertNumber)(r,"Y coordinate"),this.z=null==n?n:(0,o.assertNumber)(n,"Z coordinate"),Object.freeze(this)}function s(e){return Number.isInteger(e)?e+".0":e.toString()}r.Point=e,Object.defineProperty(e.prototype,n,{value:!0,enumerable:!1,configurable:!1,writable:!1}),r.isPoint=function(e){return!0===(e&&e[n])}},{"./internal/util":77}],84:[function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){e[n=void 0===n?r:n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},c=this&&this.__read||function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),s=[];try{for(;(void 0===t||0<t--)&&!(n=i.next()).done;)s.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s};Object.defineProperty(r,"__esModule",{value:!0}),r.isDateTime=r.DateTime=r.isLocalDateTime=r.LocalDateTime=r.isDate=r.Date=r.isTime=r.Time=r.isLocalTime=r.LocalTime=r.isDuration=r.Duration=void 0;var l=i(e("./internal/temporal-util")),f=e("./internal/util"),h=e("./error"),s=i(e("./integer")),i={value:!0,enumerable:!1,configurable:!1,writable:!1},a="__isDuration__",u="__isLocalTime__",p="__isTime__",d="__isDate__",_="__isLocalDateTime__",y="__isDateTime__",e=(b.prototype.toString=function(){return l.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},b);function b(e,t,r,n){this.months=(0,f.assertNumberOrInteger)(e,"Months"),this.days=(0,f.assertNumberOrInteger)(t,"Days"),(0,f.assertNumberOrInteger)(r,"Seconds"),(0,f.assertNumberOrInteger)(n,"Nanoseconds"),this.seconds=l.normalizeSecondsForDuration(r,n),this.nanoseconds=l.normalizeNanosecondsForDuration(n),Object.freeze(this)}r.Duration=e,Object.defineProperty(e.prototype,a,i),r.isDuration=function(e){return O(e,a)};v.fromStandardDate=function(e,t){P(e,t);t=l.totalNanoseconds(e,t);return new v(e.getHours(),e.getMinutes(),e.getSeconds(),t instanceof s.default?t.toInt():"bigint"==typeof t?(0,s.int)(t).toInt():t)},v.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},e=v;function v(e,t,r,n){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),Object.freeze(this)}r.LocalTime=e,Object.defineProperty(e.prototype,u,i),r.isLocalTime=function(e){return O(e,u)};m.fromStandardDate=function(e,t){return P(e,t),new m(e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e))},m.prototype.toString=function(){return l.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},e=m;function m(e,t,r,n,o){this.hour=l.assertValidHour(e),this.minute=l.assertValidMinute(t),this.second=l.assertValidSecond(r),this.nanosecond=l.assertValidNanosecond(n),this.timeZoneOffsetSeconds=(0,f.assertNumberOrInteger)(o,"Time zone offset in seconds"),Object.freeze(this)}r.Time=e,Object.defineProperty(e.prototype,p,i),r.isTime=function(e){return O(e,p)};g.fromStandardDate=function(e){return P(e),new g(e.getFullYear(),e.getMonth()+1,e.getDate())},g.prototype.toString=function(){return l.dateToIsoString(this.year,this.month,this.day)},e=g;function g(e,t,r){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),Object.freeze(this)}r.Date=e,Object.defineProperty(e.prototype,d,i),r.isDate=function(e){return O(e,d)};E.fromStandardDate=function(e,t){return P(e,t),new E(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)))},E.prototype.toString=function(){return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},e=E;function E(e,t,r,n,o,i,s){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s),Object.freeze(this)}r.LocalDateTime=e,Object.defineProperty(e.prototype,_,i),r.isLocalDateTime=function(e){return O(e,_)};w.fromStandardDate=function(e,t){return P(e,t),new w(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,s.toNumber)(l.totalNanoseconds(e,t)),l.timeZoneOffsetInSeconds(e),null)},w.prototype.toString=function(){return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(this.timeZoneId?"["+this.timeZoneId+"]":l.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds||0))},e=w;function w(e,t,r,n,o,i,s,a,u){this.year=l.assertValidYear(e),this.month=l.assertValidMonth(t),this.day=l.assertValidDay(r),this.hour=l.assertValidHour(n),this.minute=l.assertValidMinute(o),this.second=l.assertValidSecond(i),this.nanosecond=l.assertValidNanosecond(s);a=c(function(e,t){var r=e||0===e,n=t&&""!==t;{if(r&&!n)return(0,f.assertNumberOrInteger)(e,"Time zone offset in seconds"),[e,void 0];if(!r&&n)return(0,f.assertString)(t,"Time zone ID"),[void 0,t];throw r&&n?(0,h.newError)("Unable to create DateTime with both time zone offset and id. Please specify either of them. Given offset: "+e+" and id: "+t):(0,h.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: "+e+" and id: "+t)}}(a,u),2),u=a[0],a=a[1];this.timeZoneOffsetSeconds=u,this.timeZoneId=a||void 0,Object.freeze(this)}function O(e,t){return!0===(e&&e[t])}function C(e,t,r,n,o,i,s){return l.dateToIsoString(e,t,r)+"T"+l.timeToIsoString(n,o,i,s)}function P(e,t){(0,f.assertValidDate)(e,"Standard date"),null!=t&&(0,f.assertNumberOrInteger)(t,"Nanosecond")}r.DateTime=e,Object.defineProperty(e.prototype,y,i),r.isDateTime=function(e){return O(e,y)}},{"./error":57,"./integer":60,"./internal/temporal-util":73,"./internal/util":77}],85:[function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,s,a,u){return new(a=a||Promise)(function(r,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function o(e){try{i(u.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof a?t:new a(function(e){e(t)})).then(n,o)}i((u=u.apply(e,s||[])).next())})},o=this&&this.__generator||function(r,n){var o,i,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,(t=s?[2&t[0],s.value]:t)[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=n.call(r,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0});var s=e("./internal/util"),a=e("./internal/connection-holder"),c=e("./internal/bookmark"),l=e("./internal/tx-config"),f=e("./internal/observers"),h=e("./error"),u=i(e("./result")),e=(p.prototype._begin=function(t,r){var n=this;this._connectionHolder.getConnection().then(function(e){if(n._onConnection(),e)return e.protocol().beginTransaction({bookmark:t,txConfig:r,mode:n._connectionHolder.mode(),database:n._connectionHolder.database(),impersonatedUser:n._impersonatedUser,beforeError:n._onError,afterComplete:n._onComplete});throw(0,h.newError)("No connection available")}).catch(function(e){return n._onError(e)})},p.prototype.run=function(e,t){e=(0,s.validateQueryAndParameters)(e,t),t=e.validatedQuery,e=e.params,e=this._state.run(t,e,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize});return this._results.push(e),e},p.prototype.commit=function(){var r=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},p.prototype.rollback=function(){var r=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results});return this._state=r.state,this._onClose(),new Promise(function(e,t){r.result.subscribe({onCompleted:function(){return e()},onError:function(e){return t(e)}})})},p.prototype.isOpen=function(){return this._state===d.ACTIVE},p.prototype.close=function(){return n(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},p.prototype._onErrorCallback=function(e){return this._state=d.FAILED,this._onClose(),this._connectionHolder.releaseConnection()},p.prototype._onCompleteCallback=function(e){this._onBookmark(new c.Bookmark(e.bookmark))},p);function p(e){var t=e.connectionHolder,r=e.onClose,n=e.onBookmark,o=e.onConnection,i=e.reactive,s=e.fetchSize,e=e.impersonatedUser;this._connectionHolder=t,this._reactive=i,this._state=d.ACTIVE,this._onClose=r,this._onBookmark=n,this._onConnection=o,this._onError=this._onErrorCallback.bind(this),this._onComplete=this._onCompleteCallback.bind(this),this._fetchSize=s,this._results=[],this._impersonatedUser=e}var d={ACTIVE:{commit:function(e){return{result:_(!0,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:d.SUCCEEDED}},rollback:function(e){return{result:_(!1,e.connectionHolder,e.onError,e.onComplete,e.onConnection,e.pendingResults),state:d.ROLLED_BACK}},run:function(t,r,e){var n=e.connectionHolder,o=e.onError,i=e.onComplete,s=e.onConnection,a=e.reactive,u=e.fetchSize;return y(n.getConnection().then(function(e){if(s(),e)return e.protocol().run(t,r,{bookmark:c.Bookmark.empty(),txConfig:l.TxConfig.empty(),beforeError:o,afterComplete:i,reactive:a,fetchSize:u});throw(0,h.newError)("No connection available")}).catch(function(e){return new f.FailedObserver({error:e,onError:o})}),t,r,n)}},FAILED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new f.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:r}),"COMMIT",{},t),state:d.FAILED}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:y(new f.CompletedObserver,"ROLLBACK",{},t),state:d.FAILED}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new f.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:o}),e,t,n)}},SUCCEEDED:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new f.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has already been committed."),onError:r}),"COMMIT",{}),state:d.SUCCEEDED,connectionHolder:t}},rollback:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new f.FailedObserver({error:(0,h.newError)("Cannot rollback this transaction, because it has already been committed."),onError:r}),"ROLLBACK",{}),state:d.SUCCEEDED,connectionHolder:t}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new f.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has already been committed."),onError:o}),e,t,n)}},ROLLED_BACK:{commit:function(e){var t=e.connectionHolder,r=e.onError;e.onComplete;return{result:y(new f.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:r}),"COMMIT",{},t),state:d.ROLLED_BACK}},rollback:function(e){var t=e.connectionHolder;e.onError,e.onComplete;return{result:y(new f.FailedObserver({error:(0,h.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},t),state:d.ROLLED_BACK}},run:function(e,t,r){var n=r.connectionHolder,o=r.onError;r.onComplete;return y(new f.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:o}),e,t,n)}}};function _(r,e,n,o,i,s){var t=e.getConnection().then(function(t){return i(),s.forEach(function(e){return e._cancel()}),Promise.all(s).then(function(e){if(t)return r?t.protocol().commitTransaction({beforeError:n,afterComplete:o}):t.protocol().rollbackTransaction({beforeError:n,afterComplete:o});throw(0,h.newError)("No connection available")})}).catch(function(e){return new f.FailedObserver({error:e,onError:n})});return new u.default(t,r?"COMMIT":"ROLLBACK",{},e)}function y(e,t,r,n){return void 0===n&&(n=a.EMPTY_CONNECTION_HOLDER),new u.default(Promise.resolve(e),t,r,new a.ReadOnlyConnectionHolder(n||a.EMPTY_CONNECTION_HOLDER))}r.default=e},{"./error":57,"./internal/bookmark":61,"./internal/connection-holder":62,"./internal/observers":67,"./internal/tx-config":75,"./internal/util":77,"./result":81}],86:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0})},{}],87:[function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Connection=r.ConnectionProvider=r.DateTime=r.LocalDateTime=r.Date=r.Time=r.LocalTime=r.Duration=r.Point=r.Transaction=r.Session=r.ServerInfo=r.Notification=r.QueryStatistics=r.ProfiledPlan=r.Plan=r.Integer=r.Path=r.PathSegment=r.UnboundRelationship=r.Relationship=r.Node=r.ResultSummary=r.Record=r.Result=r.Driver=r.temporal=r.spatial=r.error=r.session=r.types=r.logging=r.auth=r.Neo4jError=r.integer=r.isDateTime=r.isLocalDateTime=r.isDate=r.isTime=r.isLocalTime=r.isDuration=r.isPoint=r.isInt=r.int=r.driver=void 0;var o=n(e("./version")),i=e("./logging");Object.defineProperty(r,"logging",{enumerable:!0,get:function(){return i.logging}});var c=e("neo4j-driver-core");Object.defineProperty(r,"Neo4jError",{enumerable:!0,get:function(){return c.Neo4jError}}),Object.defineProperty(r,"error",{enumerable:!0,get:function(){return c.error}}),Object.defineProperty(r,"Integer",{enumerable:!0,get:function(){return c.Integer}}),Object.defineProperty(r,"int",{enumerable:!0,get:function(){return c.int}}),Object.defineProperty(r,"isInt",{enumerable:!0,get:function(){return c.isInt}}),Object.defineProperty(r,"isPoint",{enumerable:!0,get:function(){return c.isPoint}}),Object.defineProperty(r,"Point",{enumerable:!0,get:function(){return c.Point}}),Object.defineProperty(r,"Date",{enumerable:!0,get:function(){return c.Date}}),Object.defineProperty(r,"DateTime",{enumerable:!0,get:function(){return c.DateTime}}),Object.defineProperty(r,"Duration",{enumerable:!0,get:function(){return c.Duration}}),Object.defineProperty(r,"isDate",{enumerable:!0,get:function(){return c.isDate}}),Object.defineProperty(r,"isDateTime",{enumerable:!0,get:function(){return c.isDateTime}}),Object.defineProperty(r,"isDuration",{enumerable:!0,get:function(){return c.isDuration}}),Object.defineProperty(r,"isLocalDateTime",{enumerable:!0,get:function(){return c.isLocalDateTime}}),Object.defineProperty(r,"isLocalTime",{enumerable:!0,get:function(){return c.isLocalTime}}),Object.defineProperty(r,"isTime",{enumerable:!0,get:function(){return c.isTime}}),Object.defineProperty(r,"LocalDateTime",{enumerable:!0,get:function(){return c.LocalDateTime}}),Object.defineProperty(r,"LocalTime",{enumerable:!0,get:function(){return c.LocalTime}}),Object.defineProperty(r,"Time",{enumerable:!0,get:function(){return c.Time}}),Object.defineProperty(r,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(r,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(r,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(r,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(r,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(r,"Record",{enumerable:!0,get:function(){return c.Record}}),Object.defineProperty(r,"ResultSummary",{enumerable:!0,get:function(){return c.ResultSummary}}),Object.defineProperty(r,"Result",{enumerable:!0,get:function(){return c.Result}}),Object.defineProperty(r,"ConnectionProvider",{enumerable:!0,get:function(){return c.ConnectionProvider}}),Object.defineProperty(r,"Driver",{enumerable:!0,get:function(){return c.Driver}}),Object.defineProperty(r,"Plan",{enumerable:!0,get:function(){return c.Plan}}),Object.defineProperty(r,"ProfiledPlan",{enumerable:!0,get:function(){return c.ProfiledPlan}}),Object.defineProperty(r,"QueryStatistics",{enumerable:!0,get:function(){return c.QueryStatistics}}),Object.defineProperty(r,"Notification",{enumerable:!0,get:function(){return c.Notification}}),Object.defineProperty(r,"Session",{enumerable:!0,get:function(){return c.Session}}),Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return c.Transaction}}),Object.defineProperty(r,"ServerInfo",{enumerable:!0,get:function(){return c.ServerInfo}}),Object.defineProperty(r,"Connection",{enumerable:!0,get:function(){return c.Connection}}),Object.defineProperty(r,"auth",{enumerable:!0,get:function(){return c.auth}});var l=e("neo4j-driver-bolt-connection"),s=c.driver.READ,a=c.driver.WRITE,n=c.internal.util,f=n.ENCRYPTION_ON,h=(n.ENCRYPTION_OFF,n.assertString),p=n.isEmptyObjectOrNull,d=c.internal.serverAddress.ServerAddress,_=c.internal.urlUtil;function u(e,o,t){void 0===t&&(t={}),h(e,"Bolt URL");var r,i=_.parseDatabaseUrl(e),n=!1,s=!1;switch(i.scheme){case"bolt":break;case"bolt+s":s=!0,r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":s=!0,r="TRUST_ALL_CERTIFICATES";break;case"neo4j":n=!0;break;case"neo4j+s":r="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",n=s=!0;break;case"neo4j+ssc":r="TRUST_ALL_CERTIFICATES",n=s=!0;break;default:throw new Error("Unknown scheme: "+i.scheme)}if(s){if("encrypted"in t||"trust"in t)throw new Error("Encryption/trust can only be configured either through URL or config, not both");t.encrypted=f,t.trust=r}(o=o||{}).scheme=o.scheme||"none",t.userAgent=t.userAgent||y;var a=d.fromUrl(i.hostAndPort),u={address:a,typename:n?"Routing":"Direct",routing:n};return new c.Driver(u,t,function(){{if(n)return function(e,t,r,n){return new l.RoutingConnectionProvider({id:e,config:t,log:r,hostNameResolver:n,authToken:o,address:a,userAgent:t.userAgent,routingContext:i.query})};if(!p(i.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '"+e+"'");return function(e,t,r){return new l.DirectConnectionProvider({id:e,config:t,log:r,authToken:o,address:a,userAgent:t.userAgent})}}}())}r.driver=u;var y="neo4j-javascript/"+o.default,e={Node:c.Node,Relationship:c.Relationship,UnboundRelationship:c.UnboundRelationship,PathSegment:c.PathSegment,Path:c.Path,Result:c.Result,ResultSummary:c.ResultSummary,Record:c.Record,Point:c.Point,Date:c.Date,DateTime:c.DateTime,Duration:c.Duration,LocalDateTime:c.LocalDateTime,LocalTime:c.LocalTime,Time:c.Time,Integer:c.Integer};r.types=e;n={READ:s,WRITE:a};r.session=n;o={toNumber:c.toNumber,toString:c.toString,inSafeRange:c.inSafeRange};r.integer=o;s={isPoint:c.isPoint};r.spatial=s;a={isDuration:c.isDuration,isLocalTime:c.isLocalTime,isTime:c.isTime,isDate:c.isDate,isLocalDateTime:c.isLocalDateTime,isDateTime:c.isDateTime};r.temporal=a;a={driver:u,int:c.int,isInt:c.isInt,isPoint:c.isPoint,isDuration:c.isDuration,isLocalTime:c.isLocalTime,isTime:c.isTime,isDate:c.isDate,isLocalDateTime:c.isLocalDateTime,isDateTime:c.isDateTime,integer:o,Neo4jError:c.Neo4jError,auth:c.auth,logging:i.logging,types:e,session:n,error:c.error,spatial:s,temporal:a,Driver:c.Driver,Result:c.Result,Record:c.Record,ResultSummary:c.ResultSummary,Node:c.Node,Relationship:c.Relationship,UnboundRelationship:c.UnboundRelationship,PathSegment:c.PathSegment,Path:c.Path,Integer:c.Integer,Plan:c.Plan,ProfiledPlan:c.ProfiledPlan,QueryStatistics:c.QueryStatistics,Notification:c.Notification,ServerInfo:c.ServerInfo,Session:c.Session,Transaction:c.Transaction,Point:c.Point,Duration:c.Duration,LocalTime:c.LocalTime,Time:c.Time,Date:c.Date,LocalDateTime:c.LocalDateTime,DateTime:c.DateTime,ConnectionProvider:c.ConnectionProvider,Connection:c.Connection};r.default=a},{"./logging":88,"./version":89,"neo4j-driver-bolt-connection":38,"neo4j-driver-core":59}],88:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.logging=void 0,r.logging={console:function(e){return{level:e,logger:function(e,t){return console.log(Date.now()+" "+e.toUpperCase()+" "+t)}}}}},{}],89:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default="4.4.5"},{}],90:[function(e,t,r){"use strict";r.byteLength=function(e){var t=l(e),e=t[0],t=t[1];return 3*(e+t)/4-t},r.toByteArray=function(e){var t,r,n=l(e),o=n[0],n=n[1],i=new c(function(e,t){return 3*(e+t)/4-t}(o,n)),s=0,a=0<n?o-4:o;for(r=0;r<a;r+=4)t=u[e.charCodeAt(r)]<<18|u[e.charCodeAt(r+1)]<<12|u[e.charCodeAt(r+2)]<<6|u[e.charCodeAt(r+3)],i[s++]=t>>16&255,i[s++]=t>>8&255,i[s++]=255&t;2===n&&(t=u[e.charCodeAt(r)]<<2|u[e.charCodeAt(r+1)]>>4,i[s++]=255&t);1===n&&(t=u[e.charCodeAt(r)]<<10|u[e.charCodeAt(r+1)]<<4|u[e.charCodeAt(r+2)]>>2,i[s++]=t>>8&255,i[s++]=255&t);return i},r.fromByteArray=function(e){for(var t,r=e.length,n=r%3,o=[],i=0,s=r-n;i<s;i+=16383)o.push(function(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return o.join("")}(e,i,s<i+16383?s:i+16383));1==n?(t=e[r-1],o.push(a[t>>2]+a[t<<4&63]+"==")):2==n&&(t=(e[r-2]<<8)+e[r-1],o.push(a[t>>10]+a[t>>4&63]+a[t<<2&63]+"="));return o.join("")};for(var a=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,i=n.length;o<i;++o)a[o]=n[o],u[n.charCodeAt(o)]=o;function l(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");e=e.indexOf("=");return[e=-1===e?t:e,e===t?0:4-e%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},{}],91:[function(N,e,j){!function(e){!function(){"use strict";var a=N("base64-js"),i=N("ieee754");j.Buffer=f,j.SlowBuffer=function(e){+e!=e&&(e=0);return f.alloc(+e)},j.INSPECT_MAX_BYTES=50;var t=2147483647;function o(e){if(t<e)throw new RangeError('The value "'+e+'" is invalid for option "size"');e=new Uint8Array(e);return e.__proto__=f.prototype,e}function f(e,t,r){if("number"!=typeof e)return n(e,t,r);if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return u(e)}function n(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!f.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|h(e,t),n=o(r),t=n.write(e,t);t!==r&&(n=n.slice(0,t));return n}(e,t);if(ArrayBuffer.isView(e))return c(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(R(e,ArrayBuffer)||e&&R(e.buffer,ArrayBuffer))return function(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');r=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r);return r.__proto__=f.prototype,r}(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);n=function(e){if(f.isBuffer(e)){var t=0|l(e.length),r=o(t);return 0===r.length?r:(e.copy(r,0,0,t),r)}if(void 0!==e.length)return"number"!=typeof e.length||k(e.length)?o(0):c(e);if("Buffer"===e.type&&Array.isArray(e.data))return c(e.data)}(e);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function u(e){return s(e),o(e<0?0:0|l(e))}function c(e){for(var t=e.length<0?0:0|l(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function l(e){if(t<=e)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return 0|e}function h(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||R(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return S(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return T(e).length;default:if(o)return n?-1:S(e).length;t=(""+t).toLowerCase(),o=!0}}function r(e,t,r){var n,o,i,s=!1;if((t=void 0===t||t<0?0:t)>this.length)return"";if((r=void 0===r||r>this.length?this.length:r)<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e=e||"utf8";;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0);(!r||r<0||n<r)&&(r=n);for(var o="",i=t;i<r;++i)o+=function(e){return e<16?"0"+e.toString(16):e.toString(16)}(e[i]);return o}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}(this,t,r);case"base64":return n=this,i=r,0===(o=t)&&i===n.length?a.fromByteArray(n):a.fromByteArray(n.slice(o,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}(this,t,r);default:if(s)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function p(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function d(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:r<-2147483648&&(r=-2147483648),(r=(r=k(r=+r)?o?0:e.length-1:r)<0?e.length+r:r)>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:_(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?(o?Uint8Array.prototype.indexOf:Uint8Array.prototype.lastIndexOf).call(e,t,r):_(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function _(e,t,r,n,o){var i=1,s=e.length,a=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s/=i=2,a/=2,r/=2}function u(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}if(o)for(var c=-1,l=r;l<s;l++)if(u(e,l)===u(t,-1===c?0:l-c)){if(l-(c=-1===c?l:c)+1===a)return c*i}else-1!==c&&(l-=l-c),c=-1;else for(l=r=s<r+a?s-a:r;0<=l;l--){for(var f=!0,h=0;h<a;h++)if(u(e,l+h)!==u(t,h)){f=!1;break}if(f)return l}return-1}function y(e,t,r,n){return I(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function b(e,t,r,n){return I(function(e,t){for(var r,n,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,n=n%256,o.push(n),o.push(r);return o}(t,e.length-r),e,r,n)}function v(e,t,r){r=Math.min(e.length,r);for(var n=[],o=t;o<r;){var i,s,a,u,c=e[o],l=null,f=239<c?4:223<c?3:191<c?2:1;if(o+f<=r)switch(f){case 1:c<128&&(l=c);break;case 2:128==(192&(i=e[o+1]))&&127<(u=(31&c)<<6|63&i)&&(l=u);break;case 3:i=e[o+1],s=e[o+2],128==(192&i)&&128==(192&s)&&2047<(u=(15&c)<<12|(63&i)<<6|63&s)&&(u<55296||57343<u)&&(l=u);break;case 4:i=e[o+1],s=e[o+2],a=e[o+3],128==(192&i)&&128==(192&s)&&128==(192&a)&&65535<(u=(15&c)<<18|(63&i)<<12|(63&s)<<6|63&a)&&u<1114112&&(l=u)}null===l?(l=65533,f=1):65535<l&&(l-=65536,n.push(l>>>10&1023|55296),l=56320|1023&l),n.push(l),o+=f}return function(e){var t=e.length;if(t<=m)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=m));return r}(n)}j.kMaxLength=t,(f.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),f.poolSize=8192,f.from=n,f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,f.alloc=function(e,t,r){return t=t,r=r,s(e=e),!(e<=0)&&void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},f.allocUnsafe=u,f.allocUnsafeSlow=u,f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(R(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),R(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(o=t=0;o<e.length;++o)t+=e[o].length;for(var r=f.allocUnsafe(t),n=0,o=0;o<e.length;++o){var i=e[o];if(R(i,Uint8Array)&&(i=f.from(i)),!f.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,n),n+=i.length}return r},f.byteLength=h,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)p(this,t,t+1);return this},f.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)p(this,t,t+3),p(this,t+1,t+2);return this},f.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)p(this,t,t+7),p(this,t+1,t+6),p(this,t+2,t+5),p(this,t+3,t+4);return this},f.prototype.toLocaleString=f.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?v(this,0,e):r.apply(this,arguments)},f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){var e="",t=j.INSPECT_MAX_BYTES,e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim();return this.length>t&&(e+=" ... "),"<Buffer "+e+">"},f.prototype.compare=function(e,t,r,n,o){if(R(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),(t=void 0===t?0:t)<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(o<=n&&r<=t)return 0;if(o<=n)return-1;if(r<=t)return 1;if(this===e)return 0;for(var i=(o>>>=0)-(n>>>=0),s=(r>>>=0)-(t>>>=0),a=Math.min(i,s),u=this.slice(n,o),c=e.slice(t,r),l=0;l<a;++l)if(u[l]!==c[l]){i=u[l],s=c[l];break}return i<s?-1:s<i?1:0},f.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return d(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return d(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-t;if((void 0===r||o<r)&&(r=o),0<e.length&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n=n||"utf8";for(var i,s,a,u=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var o=e.length-r;(!n||o<(n=Number(n)))&&(n=o),(o=t.length)/2<n&&(n=o/2);for(var i=0;i<n;++i){var s=parseInt(t.substr(2*i,2),16);if(k(s))return i;e[r+i]=s}return i}(this,e,t,r);case"utf8":case"utf-8":return s=t,a=r,I(S(e,(i=this).length-s),i,s,a);case"ascii":return y(this,e,t,r);case"latin1":case"binary":return y(this,e,t,r);case"base64":return i=this,s=t,a=r,I(T(e),i,s,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,r);default:if(u)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),u=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var m=4096;function g(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(r<e+t)throw new RangeError("Trying to access beyond buffer length")}function E(e,t,r,n,o,i){if(!f.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(o<t||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function w(e,t,r,n){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function O(e,t,r,n,o){return t=+t,r>>>=0,o||w(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function C(e,t,r,n,o){return t=+t,r>>>=0,o||w(e,0,r,8),i.write(e,t,r,n,52,8),r+8}f.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):r<e&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):r<t&&(t=r),t<e&&(t=e);t=this.subarray(e,t);return t.__proto__=f.prototype,t},f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return n},f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e+--t],o=1;0<t&&(o*=256);)n+=this[e+--t]*o;return n},f.prototype.readUInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),this[e]},f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||g(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=this[e],o=1,i=0;++i<t&&(o*=256);)n+=this[e+i]*o;return(o*=128)<=n&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||g(e,t,this.length);for(var n=t,o=1,i=this[e+--n];0<n&&(o*=256);)i+=this[e+--n]*o;return(o*=128)<=i&&(i-=Math.pow(2,8*t)),i},f.prototype.readInt8=function(e,t){return e>>>=0,t||g(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||g(e,2,this.length);e=this[e]|this[e+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(e,t){e>>>=0,t||g(e,2,this.length);e=this[e+1]|this[e]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||g(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readFloatLE=function(e,t){return e>>>=0,t||g(e,4,this.length),i.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||g(e,4,this.length),i.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||g(e,8,this.length),i.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||g(e,8,this.length),i.read(this,e,!1,52,8)},f.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||E(this,e,t,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||E(this,e,t,r,Math.pow(2,8*r)-1,0);var o=r-1,i=1;for(this[t+o]=255&e;0<=--o&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeIntLE=function(e,t,r,n){e=+e,t>>>=0,n||E(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){e=+e,t>>>=0,n||E(this,e,t,r,(n=Math.pow(2,8*r-1))-1,-n);var o=r-1,i=1,s=0;for(this[t+o]=255&e;0<=--o&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,1,127,-128),this[t]=255&(e=e<0?255+e+1:e),t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||E(this,e,t,4,2147483647,-2147483648),this[t]=(e=e<0?4294967295+e+1:e)>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeFloatLE=function(e,t,r){return O(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return O(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return C(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return C(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r=r||0,n||0===n||(n=this.length),t>=e.length&&(t=e.length),(n=0<n&&n<r?r:n)===r)return 0;if(0===e.length||0===this.length)return 0;if((t=t||0)<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length);var o=(n=e.length-t<n-r?e.length-t+r:n)-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var i=o-1;0<=i;--i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return o},f.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n);var o;1===e.length&&(o=e.charCodeAt(0),("utf8"===n&&o<128||"latin1"===n)&&(e=o))}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,"number"==typeof(e=e||0))for(i=t;i<r;++i)this[i]=e;else{var s=f.isBuffer(e)?e:f.from(e,n),a=s.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%a]}return this};var P=/[^+/0-9A-Za-z-_]/g;function S(e,t){var r;t=t||1/0;for(var n=e.length,o=null,i=[],s=0;s<n;++s){if(55295<(r=e.charCodeAt(s))&&r<57344){if(!o){if(56319<r){-1<(t-=3)&&i.push(239,191,189);continue}if(s+1===n){-1<(t-=3)&&i.push(239,191,189);continue}o=r;continue}if(r<56320){-1<(t-=3)&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&-1<(t-=3)&&i.push(239,191,189);if(o=null,r<128){if(--t<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function T(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(P,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function I(e,t,r,n){for(var o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function R(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function k(e){return e!=e}}.call(this)}.call(this,N("buffer").Buffer)},{"base64-js":90,buffer:91,ieee754:92}],92:[function(e,t,r){r.read=function(e,t,r,n,o){var i,s,a=8*o-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?o-1:0,h=r?-1:1,r=e[t+f];for(f+=h,i=r&(1<<-l)-1,r>>=-l,l+=a;0<l;i=256*i+e[t+f],f+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;0<l;s=256*s+e[t+f],f+=h,l-=8);if(0===i)i=1-c;else{if(i===u)return s?NaN:1/0*(r?-1:1);s+=Math.pow(2,n),i-=c}return(r?-1:1)*s*Math.pow(2,i-n)},r.write=function(e,t,r,n,o,i){var s,a,u=8*i-o-1,c=(1<<u)-1,l=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,h=n?0:i-1,p=n?1:-1,i=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(n=Math.pow(2,-s))<1&&(s--,n*=2),2<=(t+=1<=s+l?f/n:f*Math.pow(2,1-l))*n&&(s++,n/=2),c<=s+l?(a=0,s=c):1<=s+l?(a=(t*n-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));8<=o;e[r+h]=255&a,h+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;0<u;e[r+h]=255&s,h+=p,s/=256,u-=8);e[r+h-p]|=128*i}},{}],93:[function(e,t,r){var n=e("buffer"),o=n.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return o(e,t,r)}o.from&&o.alloc&&o.allocUnsafe&&o.allocUnsafeSlow?t.exports=n:(i(n,r),r.Buffer=s),s.prototype=Object.create(o.prototype),i(o,s),s.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return o(e,t,r)},s.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");e=o(e);return void 0!==t?"string"==typeof r?e.fill(t,r):e.fill(t):e.fill(0),e},s.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return o(e)},s.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n.SlowBuffer(e)}},{buffer:91}],94:[function(e,t,r){"use strict";var n=e("safe-buffer").Buffer,o=n.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(n.isEncoding===o||!o(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=l,t=4;break;case"utf8":this.fillLast=u,t=4;break;case"base64":this.text=f,this.end=h,t=3;break;default:return this.write=p,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(t)}function a(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function u(e){var t,r,n=this.lastTotal-this.lastNeed,t=(t=this,128!=(192&(r=e)[0])?(t.lastNeed=0,""):1<t.lastNeed&&1<r.length?128!=(192&r[1])?(t.lastNeed=1,""):2<t.lastNeed&&2<r.length&&128!=(192&r[2])?(t.lastNeed=2,""):void 0:void 0);return void 0!==t?t:this.lastNeed<=e.length?(e.copy(this.lastChar,n,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,n,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1);var r=e.toString("utf16le",t);if(r){t=r.charCodeAt(r.length-1);if(55296<=t&&t<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){e=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,e)}return t}function f(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(e){return e.toString(this.encoding)}function d(e){return e&&e.length?this.write(e):""}(r.StringDecoder=s).prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},s.prototype.end=function(e){e=e&&e.length?this.write(e):"";return this.lastNeed?e+"":e},s.prototype.text=function(e,t){var r=function(e,t,r){var n=t.length-1;if(n<r)return 0;var o=a(t[n]);if(0<=o)return 0<o&&(e.lastNeed=o-1),o;if(--n<r||-2===o)return 0;if(0<=(o=a(t[n])))return 0<o&&(e.lastNeed=o-2),o;if(--n<r||-2===o)return 0;if(0<=(o=a(t[n])))return 0<o&&(2===o?o=0:e.lastNeed=o-3),o;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;r=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,r),e.toString("utf8",t,r)},s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},{"safe-buffer":93}]},{},[87])(87)});